import{S as fe,i as ce,s as ue,e as E,t as N,a as I,c as x,b as S,d as V,f as _,g as A,m as G,h as k,j as v,B as M,q as y,p as U,o as b,l as L,n as J,D as B,r as pe,w as P,x as T,y as q,A as C,k as me,M as W,C as ge,E as $e,u as be,v as ve,F as ee,G as ye,z as ke}from"../chunks/index.c8313fb2.js";import{a as H,g as j,s as _e,n as we}from"../chunks/index.browser.3f8e3725.js";import{S as Ee,_ as xe,a as Se,D as De}from"../chunks/deleteButton.7b5b3c04.js";import{b as Ge,F as Ie,a as Ae,B as Ne,I as Ve}from"../chunks/fontGenerator.0cacd672.js";import{c as Be}from"../chunks/shapes.7a491156.js";function te(i,t,n){const e=i.slice();return e[6]=t[n],e}function Pe(i){let t,n;return{c(){t=E("p"),n=N("No glyphs")},l(e){t=x(e,"P",{});var l=S(t);n=V(l,"No glyphs"),l.forEach(_)},m(e,l){k(e,t,l),v(t,n)},p:J,i:J,o:J,d(e){e&&_(t)}}}function Te(i){let t,n,e=i[2],l=[];for(let s=0;s<e.length;s+=1)l[s]=ne(te(i,e,s));const r=s=>y(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=B()},l(s){for(let a=0;a<l.length;a+=1)l[a].l(s);t=B()},m(s,a){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(s,a);k(s,t,a),n=!0},p(s,a){if(a&519){e=s[2];let o;for(o=0;o<e.length;o+=1){const c=te(s,e,o);l[o]?(l[o].p(c,a),b(l[o],1)):(l[o]=ne(c),l[o].c(),b(l[o],1),l[o].m(t.parentNode,t))}for(M(),o=e.length;o<l.length;o+=1)r(o);U()}},i(s){if(!n){for(let a=0;a<e.length;a+=1)b(l[a]);n=!0}},o(s){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(s){pe(l,s),s&&_(t)}}}function le(i){let t,n,e=i[9].names.fontSubfamily.en+"",l,r,s,a;return s=new Ae({props:{canvasWidth:300,font:i[9],text:i[1]}}),{c(){t=E("div"),n=E("p"),l=N(e),r=I(),P(s.$$.fragment),this.h()},l(o){t=x(o,"DIV",{class:!0});var c=S(t);n=x(c,"P",{class:!0});var d=S(n);l=V(d,e),d.forEach(_),r=A(c),T(s.$$.fragment,c),c.forEach(_),this.h()},h(){G(n,"class","text-small font-mono text-slate-900 text-sm"),G(t,"class","space-y-2")},m(o,c){k(o,t,c),v(t,n),v(n,l),v(t,r),q(s,t,null),a=!0},p(o,c){(!a||c&512)&&e!==(e=o[9].names.fontSubfamily.en+"")&&me(l,e);const d={};c&512&&(d.font=o[9]),c&2&&(d.text=o[1]),s.$set(d)},i(o){a||(b(s.$$.fragment,o),a=!0)},o(o){y(s.$$.fragment,o),a=!1},d(o){o&&_(t),C(s)}}}function qe(i){let t,n,e=i[9]&&le(i);return{c(){e&&e.c(),t=I()},l(l){e&&e.l(l),t=A(l)},m(l,r){e&&e.m(l,r),k(l,t,r),n=!0},p(l,r){l[9]?e?(e.p(l,r),r&512&&b(e,1)):(e=le(l),e.c(),b(e,1),e.m(t.parentNode,t)):e&&(M(),y(e,1,1,()=>{e=null}),U())},i(l){n||(b(e),n=!0)},o(l){y(e),n=!1},d(l){e&&e.d(l),l&&_(t)}}}function ne(i){let t,n;return t=new Ie({props:{syntax:i[6],glyphs:[i[0]],$$slots:{default:[qe,({font:e})=>({9:e}),({font:e})=>e?512:0]},$$scope:{ctx:i}}}),{c(){P(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,l){q(t,e,l),n=!0},p(e,l){const r={};l&4&&(r.syntax=e[6]),l&1&&(r.glyphs=[e[0]]),l&1538&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Ce(i){let t,n,e,l,r,s,a;const o=[Te,Pe],c=[];function d(u,p){return u[0]?0:1}return r=d(i),s=c[r]=o[r](i),{c(){t=E("div"),n=E("p"),e=N("Anteprima"),l=I(),s.c(),this.h()},l(u){t=x(u,"DIV",{class:!0});var p=S(t);n=x(p,"P",{class:!0});var f=S(n);e=V(f,"Anteprima"),f.forEach(_),l=A(p),s.l(p),p.forEach(_),this.h()},h(){G(n,"class","text-small font-mono text-slate-900 text-sm"),G(t,"class","space-y-8")},m(u,p){k(u,t,p),v(t,n),v(n,e),v(t,l),c[r].m(t,null),a=!0},p(u,[p]){let f=r;r=d(u),r===f?c[r].p(u,p):(M(),y(c[f],1,1,()=>{c[f]=null}),U(),s=c[r],s?s.p(u,p):(s=c[r]=o[r](u),s.c()),b(s,1),s.m(t,null))},i(u){a||(b(s),a=!0)},o(u){y(s),a=!1},d(u){u&&_(t),c[r].d()}}}function Fe(i,t,n){let e,l,r;L(i,H,c=>n(3,e=c)),L(i,j,c=>n(4,l=c)),L(i,_e,c=>n(2,r=c));let s,a;function o(c){try{return String.fromCharCode(Ge(c.name))}catch(d){return console.log(d),""}}return i.$$.update=()=>{i.$$.dirty&24&&e&&n(0,s=l.find(c=>c.id===e)),i.$$.dirty&1&&s&&n(1,a=o(s))},[s,a,r,e,l]}class Re extends fe{constructor(t){super(),ce(this,t,Fe,Ce,ue,{})}}function re(i,t,n){const e=i.slice();return e[9]=t[n],e[10]=t,e[11]=n,e}function se(i,t,n){const e=i.slice();return e[9]=t[n],e}function je(i){let t;return{c(){t=N("+ Aggiungi glifo")},l(n){t=V(n,"+ Aggiungi glifo")},m(n,e){k(n,t,e)},d(n){n&&_(t)}}}function Le(i){let t,n;return t=new Ne({props:{$$slots:{default:[je]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){P(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,l){q(t,e,l),n=!0},p(e,l){const r={};l&16384&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Me(i){let t;return{c(){t=N("Lista glifi")},l(n){t=V(n,"Lista glifi")},m(n,e){k(n,t,e)},d(n){n&&_(t)}}}function Ue(i){let t=i[9].name+"",n,e;return{c(){n=N(t),e=I()},l(l){n=V(l,t),e=A(l)},m(l,r){k(l,n,r),k(l,e,r)},p(l,r){r&1&&t!==(t=l[9].name+"")&&me(n,t)},d(l){l&&_(n),l&&_(e)}}}function oe(i,t){let n,e,l;return e=new Se({props:{selection:H,id:t[9].id,$$slots:{default:[Ue]},$$scope:{ctx:t}}}),{key:i,first:null,c(){n=B(),P(e.$$.fragment),this.h()},l(r){n=B(),T(e.$$.fragment,r),this.h()},h(){this.first=n},m(r,s){k(r,n,s),q(e,r,s),l=!0},p(r,s){t=r;const a={};s&1&&(a.id=t[9].id),s&16385&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){y(e.$$.fragment,r),l=!1},d(r){r&&_(n),C(e,r)}}}function ze(i){let t=[],n=new Map,e,l,r=i[0];const s=a=>a[9].id;for(let a=0;a<r.length;a+=1){let o=se(i,r,a),c=s(o);n.set(c,t[a]=oe(c,o))}return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=B()},l(a){for(let o=0;o<t.length;o+=1)t[o].l(a);e=B()},m(a,o){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(a,o);k(a,e,o),l=!0},p(a,o){o&1&&(r=a[0],M(),t=ge(t,o,s,1,a,r,n,e.parentNode,$e,oe,e,se),U())},i(a){if(!l){for(let o=0;o<r.length;o+=1)b(t[o]);l=!0}},o(a){for(let o=0;o<t.length;o+=1)y(t[o]);l=!1},d(a){for(let o=0;o<t.length;o+=1)t[o].d(a);a&&_(e)}}}function ie(i){let t,n,e,l,r,s,a,o,c,d,u,p,f,m,g,$,w,F,O,X,K;function he(h){i[5](h,i[9])}let Q={};i[9].name!==void 0&&(Q.value=i[9].name),s=new Ve({props:Q}),be.push(()=>ve(s,"value",he)),c=new De({}),c.$on("delete",i[3]);function de(){i[6].call(w,i[10],i[11])}return{c(){t=E("div"),n=E("div"),e=E("p"),l=N("Nome glifo"),r=I(),P(s.$$.fragment),o=I(),P(c.$$.fragment),d=I(),u=E("hr"),p=I(),f=E("div"),m=E("p"),g=N("Struttura glifo"),$=I(),w=E("textarea"),F=I(),this.h()},l(h){t=x(h,"DIV",{class:!0});var D=S(t);n=x(D,"DIV",{});var R=S(n);e=x(R,"P",{class:!0});var Y=S(e);l=V(Y,"Nome glifo"),Y.forEach(_),r=A(R),T(s.$$.fragment,R),R.forEach(_),o=A(D),T(c.$$.fragment,D),D.forEach(_),d=A(h),u=x(h,"HR",{}),p=A(h),f=x(h,"DIV",{class:!0});var z=S(f);m=x(z,"P",{class:!0});var Z=S(m);g=V(Z,"Struttura glifo"),Z.forEach(_),$=A(z),w=x(z,"TEXTAREA",{class:!0}),S(w).forEach(_),F=A(z),z.forEach(_),this.h()},h(){G(e,"class","text-small font-mono text-slate-900 mb-2 text-sm"),G(t,"class","shrink-0 flex justify-between items-end"),G(m,"class","text-small font-mono text-slate-900 mb-2 text-sm"),G(w,"class","h-0 grow p-2 bg-slate-200 tracking-[0.75em] hover:bg-slate-300 font-mono focus:ring-4"),G(f,"class","grow flex flex-col items-stretch")},m(h,D){k(h,t,D),v(t,n),v(n,e),v(e,l),v(n,r),q(s,n,null),v(t,o),q(c,t,null),k(h,d,D),k(h,u,D),k(h,p,D),k(h,f,D),v(f,m),v(m,g),v(f,$),v(f,w),ee(w,i[9].structure),v(f,F),O=!0,X||(K=ye(w,"input",de),X=!0)},p(h,D){i=h;const R={};!a&&D&1&&(a=!0,R.value=i[9].name,ke(()=>a=!1)),s.$set(R),D&1&&ee(w,i[9].structure)},i(h){O||(b(s.$$.fragment,h),b(c.$$.fragment,h),O=!0)},o(h){y(s.$$.fragment,h),y(c.$$.fragment,h),O=!1},d(h){h&&_(t),C(s),C(c),h&&_(d),h&&_(u),h&&_(p),h&&_(f),X=!1,K()}}}function ae(i){let t,n,e=i[9].id==i[1]&&ie(i);return{c(){e&&e.c(),t=B()},l(l){e&&e.l(l),t=B()},m(l,r){e&&e.m(l,r),k(l,t,r),n=!0},p(l,r){l[9].id==l[1]?e?(e.p(l,r),r&3&&b(e,1)):(e=ie(l),e.c(),b(e,1),e.m(t.parentNode,t)):e&&(M(),y(e,1,1,()=>{e=null}),U())},i(l){n||(b(e),n=!0)},o(l){y(e),n=!1},d(l){e&&e.d(l),l&&_(t)}}}function He(i){let t,n,e,l,r,s,a,o,c;e=new Ee({props:{$$slots:{items:[ze],listTitle:[Me],topArea:[Le]},$$scope:{ctx:i}}});let d=i[0],u=[];for(let f=0;f<d.length;f+=1)u[f]=ae(re(i,d,f));const p=f=>y(u[f],1,1,()=>{u[f]=null});return o=new Re({}),{c(){t=E("div"),n=E("div"),P(e.$$.fragment),l=I(),r=E("div");for(let f=0;f<u.length;f+=1)u[f].c();s=I(),a=E("div"),P(o.$$.fragment),this.h()},l(f){t=x(f,"DIV",{class:!0});var m=S(t);n=x(m,"DIV",{class:!0});var g=S(n);T(e.$$.fragment,g),g.forEach(_),l=A(m),r=x(m,"DIV",{class:!0});var $=S(r);for(let F=0;F<u.length;F+=1)u[F].l($);$.forEach(_),s=A(m),a=x(m,"DIV",{class:!0});var w=S(a);T(o.$$.fragment,w),w.forEach(_),m.forEach(_),this.h()},h(){G(n,"class","shrink-0 flex items-stretch"),G(r,"class","p-8 space-y-8 grow flex flex-col items-stretch"),G(a,"class","p-8 border border-l-gray-300 overflow-y-scroll"),G(t,"class","flex flex-row flex-nowrap items-stretch overflow-hidden grow")},m(f,m){k(f,t,m),v(t,n),q(e,n,null),v(t,l),v(t,r);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(r,null);v(t,s),v(t,a),q(o,a,null),c=!0},p(f,[m]){const g={};if(m&16385&&(g.$$scope={dirty:m,ctx:f}),e.$set(g),m&11){d=f[0];let $;for($=0;$<d.length;$+=1){const w=re(f,d,$);u[$]?(u[$].p(w,m),b(u[$],1)):(u[$]=ae(w),u[$].c(),b(u[$],1),u[$].m(r,null))}for(M(),$=d.length;$<u.length;$+=1)p($);U()}},i(f){if(!c){b(e.$$.fragment,f);for(let m=0;m<d.length;m+=1)b(u[m]);b(o.$$.fragment,f),c=!0}},o(f){y(e.$$.fragment,f),u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)y(u[m]);y(o.$$.fragment,f),c=!1},d(f){f&&_(t),C(e),pe(u,f),C(o)}}}function Oe(i,t){for(let n of i.rules)if(n.symbol==t)return n;throw new Error("missingSymbol")}function We(i,t,n){let e,l,r;L(i,j,p=>n(0,e=p)),L(i,H,p=>n(1,l=p)),L(i,_e,p=>n(4,r=p)),e.length||s();function s(){const p={id:we(5),name:"[aggiungi nome]",structure:""};W(j,e=[...e,p],e),W(H,l=p.id,l)}function a(p){const f=[];for(const m of p){const g=m.structure.replace(/(\r\n|\n|\r)/gm,"");g&&f.push(...g.split(""))}return xe.uniq(f)}function o(p,f){const m=p.rules.map(g=>g.symbol);for(let g of f)m.includes(g)||p.rules.push(Be(g));for(let g of m)if(!a(e).includes(g)){const $=Oe(p,g),w=p.rules.indexOf($);p.rules.splice(w,1)}}function c(){W(j,e=e.filter(p=>p.id!=l),e),W(H,l=e[0].id,l)}function d(p,f){i.$$.not_equal(f.name,p)&&(f.name=p,j.set(e))}function u(p,f){p[f].structure=this.value,j.set(e)}return i.$$.update=()=>{if(i.$$.dirty&17){const p=a(e);for(let f of r)o(f,p)}},[e,l,s,c,r,d,u]}class Ze extends fe{constructor(t){super(),ce(this,t,We,He,ue,{})}}export{Ze as component};
