import{S as x,i as ee,s as te,e as P,c as N,b as F,f as h,m as I,a9 as nt,h as E,aa as Ie,G as _e,C as ge,ab as lt,n as Z,ac as at,X as rt,t as C,d as M,j as y,k as he,ad as it,u as G,v as L,w as S,x as V,y as D,z,o as v,q as b,A as q,D as X,B as j,p as H,a as U,g as K,ae as Se,r as st,l as ue,af as ot,ag as ut,E as Xe,M as fe}from"./index.c6f2fdfd.js";import{w as Je}from"./index.c0a17338.js";import{V as ne,S as Y,v as ft,l as pt,m as ct,n as _t,o as dt,c as mt,t as gt}from"./shapes.3b9e85f8.js";import{n as de,b as ht,s as oe,g as $t}from"./index.browser.093f5a39.js";import{S as vt,_ as bt,D as kt,a as yt}from"./deleteButton.bc855726.js";import{I as Ye,B as Ze,F as wt,a as Et}from"./fontGenerator.8edae8d3.js";import{I as me}from"./inputNumber.b24a9bf8.js";import{L as le}from"./label.c4123dbf.js";import{G as It}from"./glyphsField.5662018f.js";function Ve(r,e,n){const t=r.slice();return t[6]=e[n],t}function De(r,e){let n,t=e[6].label+"",a,i;return{key:r,first:null,c(){n=P("option"),a=C(t),this.h()},l(l){n=N(l,"OPTION",{});var s=F(n);a=M(s,t),s.forEach(h),this.h()},h(){n.__value=i=e[6].value,n.value=n.__value,this.first=n},m(l,s){E(l,n,s),y(n,a)},p(l,s){e=l,s&2&&t!==(t=e[6].label+"")&&he(a,t),s&2&&i!==(i=e[6].value)&&(n.__value=i,n.value=n.__value)},d(l){l&&h(n)}}}function St(r){let e,n=[],t=new Map,a,i,l=r[1];const s=o=>o[6].label;for(let o=0;o<l.length;o+=1){let u=Ve(r,l,o),f=s(u);t.set(f,n[o]=De(f,u))}return{c(){e=P("select");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=N(o,"SELECT",{class:!0,name:!0,id:!0});var u=F(e);for(let f=0;f<n.length;f+=1)n[f].l(u);u.forEach(h),this.h()},h(){I(e,"class","block h-10 bg-slate-200 font-mono rounded-none"),I(e,"name",r[2]),I(e,"id",r[2]),r[0]===void 0&&nt(()=>r[4].call(e))},m(o,u){E(o,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);Ie(e,r[0],!0),a||(i=[_e(e,"change",r[4]),_e(e,"change",r[3])],a=!0)},p(o,[u]){u&2&&(l=o[1],n=ge(n,u,s,1,o,l,t,e,lt,De,null,Ve)),u&4&&I(e,"name",o[2]),u&4&&I(e,"id",o[2]),u&3&&Ie(e,o[0])},i:Z,o:Z,d(o){o&&h(e);for(let u=0;u<n.length;u+=1)n[u].d();a=!1,at(i)}}}function Vt(r,e,n){let{options:t}=e,{value:a}=e,{name:i=de(5)}=e;const l=rt();function s(){l("changed",a)}function o(){a=it(this),n(0,a),n(1,t)}return r.$$set=u=>{"options"in u&&n(1,t=u.options),"value"in u&&n(0,a=u.value),"name"in u&&n(2,i=u.name)},[a,t,i,s,o]}class se extends x{constructor(e){super(),ee(this,e,Vt,St,te,{options:1,value:0,name:2})}}function Dt(r){let e,n,t;function a(l){r[5](l)}let i={};return r[0]!==void 0&&(i.value=r[0]),e=new Ye({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,[s]){const o={};!n&&s&1&&(n=!0,o.value=l[0],z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function qt(r,e,n){let{value:t=[]}=e,{parseNumbers:a=!1}=e,{parseBooleans:i=!1}=e,{separator:l=";"}=e,s="";u();function o(){const c=s.split(l).map(p=>p.trim()).filter(p=>p);!a&&!i?n(1,t=[...c]):a?n(1,t=[...c.map(p=>parseFloat(p)).filter(p=>!isNaN(p))]):i&&n(1,t=[...c.map(p=>p=="true"?!0:p=="false"?!1:null).filter(p=>p!==null)])}function u(){t.length&&n(0,s=t.join(`${l} `))}function f(c){s=c,n(0,s)}return r.$$set=c=>{"value"in c&&n(1,t=c.value),"parseNumbers"in c&&n(2,a=c.parseNumbers),"parseBooleans"in c&&n(3,i=c.parseBooleans),"separator"in c&&n(4,l=c.separator)},r.$$.update=()=>{r.$$.dirty&1&&o()},[s,t,a,i,l,f]}class $e extends x{constructor(e){super(),ee(this,e,qt,Dt,te,{value:1,parseNumbers:2,parseBooleans:3,separator:4})}}function qe(r){let e,n,t,a,i,l,s,o;function u(_){r[6](_)}let f={options:r[3]};r[1]!==void 0&&(f.value=r[1]),n=new se({props:f}),G.push(()=>L(n,"value",u)),n.$on("changed",r[2]);const c=[Nt,Pt],p=[];function $(_,m){return _[0].value.kind=="fixed"?0:_[0].value.kind=="choice"?1:-1}return~(l=$(r))&&(s=p[l]=c[l](r)),{c(){e=P("div"),S(n.$$.fragment),a=U(),i=P("div"),s&&s.c(),this.h()},l(_){e=N(_,"DIV",{class:!0});var m=F(e);V(n.$$.fragment,m),a=K(m),i=N(m,"DIV",{class:!0});var g=F(i);s&&s.l(g),g.forEach(h),m.forEach(h),this.h()},h(){I(i,"class","flex flex-row space-x-2"),I(e,"class","flex flex-row space-x-4")},m(_,m){E(_,e,m),D(n,e,null),y(e,a),y(e,i),~l&&p[l].m(i,null),o=!0},p(_,m){const g={};!t&&m&2&&(t=!0,g.value=_[1],z(()=>t=!1)),n.$set(g);let d=l;l=$(_),l===d?~l&&p[l].p(_,m):(s&&(j(),b(p[d],1,1,()=>{p[d]=null}),H()),~l?(s=p[l],s?s.p(_,m):(s=p[l]=c[l](_),s.c()),v(s,1),s.m(i,null)):s=null)},i(_){o||(v(n.$$.fragment,_),v(s),o=!0)},o(_){b(n.$$.fragment,_),b(s),o=!1},d(_){_&&h(e),q(n),~l&&p[l].d()}}}function Pt(r){let e,n,t;function a(l){r[8](l)}let i={parseBooleans:!0};return r[0].value.data.options!==void 0&&(i.value=r[0].value.data.options),e=new $e({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.value=l[0].value.data.options,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Nt(r){let e,n,t;function a(l){r[7](l)}let i={options:r[4]};return r[0].value.data!==void 0&&(i.value=r[0].value.data),e=new se({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.value=l[0].value.data,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Tt(r){let e,n,t=r[0]&&qe(r);return{c(){t&&t.c(),e=X()},l(a){t&&t.l(a),e=X()},m(a,i){t&&t.m(a,i),E(a,e,i),n=!0},p(a,[i]){a[0]?t?(t.p(a,i),i&1&&v(t,1)):(t=qe(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(j(),b(t,1,1,()=>{t=null}),H())},i(a){n||(v(t),n=!0)},o(a){b(t),n=!1},d(a){t&&t.d(a),a&&h(e)}}}function Ft(r,e,n){let{prop:t}=e,{defaults:a={fixed:!1,choice:{options:[!1,!0]}}}=e,i;t&&(i=t.value.kind,i!=t.value.kind&&l(i));function l($){n(0,t.value.kind=$,t),n(0,t.value.data=a[$],t)}function s($){const _=$.detail;l(_)}const o=[{label:"fixed",value:ne.Fixed},{label:"choice",value:ne.Choice}],u=[{label:"true",value:!0},{label:"false",value:!1}];function f($){i=$,n(1,i)}function c($){r.$$.not_equal(t.value.data,$)&&(t.value.data=$,n(0,t))}function p($){r.$$.not_equal(t.value.data.options,$)&&(t.value.data.options=$,n(0,t))}return r.$$set=$=>{"prop"in $&&n(0,t=$.prop),"defaults"in $&&n(5,a=$.defaults)},[t,i,s,o,u,a,f,c,p]}class Ot extends x{constructor(e){super(),ee(this,e,Ft,Tt,te,{prop:0,defaults:5})}}function Pe(r){let e,n,t,a,i,l,s,o;function u(_){r[5](_)}let f={options:r[3]};r[1]!==void 0&&(f.value=r[1]),n=new se({props:f}),G.push(()=>L(n,"value",u)),n.$on("changed",r[2]);const c=[At,Kt,Ut],p=[];function $(_,m){return _[0].value.kind=="fixed"?0:_[0].value.kind=="range"?1:_[0].value.kind=="choice"?2:-1}return~(l=$(r))&&(s=p[l]=c[l](r)),{c(){e=P("div"),S(n.$$.fragment),a=U(),i=P("div"),s&&s.c(),this.h()},l(_){e=N(_,"DIV",{class:!0});var m=F(e);V(n.$$.fragment,m),a=K(m),i=N(m,"DIV",{class:!0});var g=F(i);s&&s.l(g),g.forEach(h),m.forEach(h),this.h()},h(){I(i,"class","flex flex-row space-x-2"),I(e,"class","flex flex-row space-x-4")},m(_,m){E(_,e,m),D(n,e,null),y(e,a),y(e,i),~l&&p[l].m(i,null),o=!0},p(_,m){const g={};!t&&m&2&&(t=!0,g.value=_[1],z(()=>t=!1)),n.$set(g);let d=l;l=$(_),l===d?~l&&p[l].p(_,m):(s&&(j(),b(p[d],1,1,()=>{p[d]=null}),H()),~l?(s=p[l],s?s.p(_,m):(s=p[l]=c[l](_),s.c()),v(s,1),s.m(i,null)):s=null)},i(_){o||(v(n.$$.fragment,_),v(s),o=!0)},o(_){b(n.$$.fragment,_),b(s),o=!1},d(_){_&&h(e),q(n),~l&&p[l].d()}}}function Ut(r){let e,n,t;function a(l){r[9](l)}let i={parseNumbers:!0};return r[0].value.data.options!==void 0&&(i.value=r[0].value.data.options),e=new $e({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.value=l[0].value.data.options,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Kt(r){let e,n,t,a,i,l,s,o,u,f,c,p,$;function _(k){r[7](k)}let m={name:"min"};r[0].value.data.min!==void 0&&(m.value=r[0].value.data.min),t=new me({props:m}),G.push(()=>L(t,"value",_)),l=new le({props:{target:"min",$$slots:{default:[Bt]},$$scope:{ctx:r}}});function g(k){r[8](k)}let d={name:"max"};return r[0].value.data.max!==void 0&&(d.value=r[0].value.data.max),u=new me({props:d}),G.push(()=>L(u,"value",g)),p=new le({props:{target:"max",$$slots:{default:[Rt]},$$scope:{ctx:r}}}),{c(){e=P("div"),n=P("div"),S(t.$$.fragment),i=U(),S(l.$$.fragment),s=U(),o=P("div"),S(u.$$.fragment),c=U(),S(p.$$.fragment),this.h()},l(k){e=N(k,"DIV",{class:!0});var O=F(e);n=N(O,"DIV",{class:!0});var w=F(n);V(t.$$.fragment,w),i=K(w),V(l.$$.fragment,w),w.forEach(h),s=K(O),o=N(O,"DIV",{class:!0});var A=F(o);V(u.$$.fragment,A),c=K(A),V(p.$$.fragment,A),A.forEach(h),O.forEach(h),this.h()},h(){I(n,"class","flex flex-row flex-nowrap items-center space-x-2"),I(o,"class","flex flex-row flex-nowrap items-center space-x-2"),I(e,"class","space-y-2")},m(k,O){E(k,e,O),y(e,n),D(t,n,null),y(n,i),D(l,n,null),y(e,s),y(e,o),D(u,o,null),y(o,c),D(p,o,null),$=!0},p(k,O){const w={};!a&&O&1&&(a=!0,w.value=k[0].value.data.min,z(()=>a=!1)),t.$set(w);const A={};O&2048&&(A.$$scope={dirty:O,ctx:k}),l.$set(A);const J={};!f&&O&1&&(f=!0,J.value=k[0].value.data.max,z(()=>f=!1)),u.$set(J);const R={};O&2048&&(R.$$scope={dirty:O,ctx:k}),p.$set(R)},i(k){$||(v(t.$$.fragment,k),v(l.$$.fragment,k),v(u.$$.fragment,k),v(p.$$.fragment,k),$=!0)},o(k){b(t.$$.fragment,k),b(l.$$.fragment,k),b(u.$$.fragment,k),b(p.$$.fragment,k),$=!1},d(k){k&&h(e),q(t),q(l),q(u),q(p)}}}function At(r){let e,n,t;function a(l){r[6](l)}let i={};return r[0].value.data!==void 0&&(i.value=r[0].value.data),e=new me({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.value=l[0].value.data,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Bt(r){let e;return{c(){e=C("min")},l(n){e=M(n,"min")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Rt(r){let e;return{c(){e=C("max")},l(n){e=M(n,"max")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Gt(r){let e,n,t=r[0]&&Pe(r);return{c(){t&&t.c(),e=X()},l(a){t&&t.l(a),e=X()},m(a,i){t&&t.m(a,i),E(a,e,i),n=!0},p(a,[i]){a[0]?t?(t.p(a,i),i&1&&v(t,1)):(t=Pe(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(j(),b(t,1,1,()=>{t=null}),H())},i(a){n||(v(t),n=!0)},o(a){b(t),n=!1},d(a){t&&t.d(a),a&&h(e)}}}function Lt(r,e,n){let{prop:t}=e,{defaults:a={fixed:1,choice:{options:[1,2]},range:{min:1,max:2}}}=e,i;t&&(i=t.value.kind,i!=t.value.kind&&l(i));function l(_){n(0,t.value.kind=_,t),n(0,t.value.data=a[_],t)}function s(_){const m=_.detail;l(m)}const o=[{label:"fixed",value:ne.Fixed},{label:"choice",value:ne.Choice},{label:"range",value:ne.Range}];function u(_){i=_,n(1,i)}function f(_){r.$$.not_equal(t.value.data,_)&&(t.value.data=_,n(0,t))}function c(_){r.$$.not_equal(t.value.data.min,_)&&(t.value.data.min=_,n(0,t))}function p(_){r.$$.not_equal(t.value.data.max,_)&&(t.value.data.max=_,n(0,t))}function $(_){r.$$.not_equal(t.value.data.options,_)&&(t.value.data.options=_,n(0,t))}return r.$$set=_=>{"prop"in _&&n(0,t=_.prop),"defaults"in _&&n(4,a=_.defaults)},[t,i,s,o,a,u,f,c,p,$]}class pe extends x{constructor(e){super(),ee(this,e,Lt,Gt,te,{prop:0,defaults:4})}}function Ne(r){let e,n,t,a,i,l,s,o;function u(_){r[6](_)}let f={options:r[3]};r[1]!==void 0&&(f.value=r[1]),n=new se({props:f}),G.push(()=>L(n,"value",u)),n.$on("changed",r[2]);const c=[Ct,zt],p=[];function $(_,m){return _[0].value.kind=="fixed"?0:_[0].value.kind=="choice"?1:-1}return~(l=$(r))&&(s=p[l]=c[l](r)),{c(){e=P("div"),S(n.$$.fragment),a=U(),i=P("div"),s&&s.c(),this.h()},l(_){e=N(_,"DIV",{class:!0});var m=F(e);V(n.$$.fragment,m),a=K(m),i=N(m,"DIV",{class:!0});var g=F(i);s&&s.l(g),g.forEach(h),m.forEach(h),this.h()},h(){I(i,"class","flex flex-row space-x-2"),I(e,"class","flex flex-row space-x-4")},m(_,m){E(_,e,m),D(n,e,null),y(e,a),y(e,i),~l&&p[l].m(i,null),o=!0},p(_,m){const g={};!t&&m&2&&(t=!0,g.value=_[1],z(()=>t=!1)),n.$set(g);let d=l;l=$(_),l===d?~l&&p[l].p(_,m):(s&&(j(),b(p[d],1,1,()=>{p[d]=null}),H()),~l?(s=p[l],s?s.p(_,m):(s=p[l]=c[l](_),s.c()),v(s,1),s.m(i,null)):s=null)},i(_){o||(v(n.$$.fragment,_),v(s),o=!0)},o(_){b(n.$$.fragment,_),b(s),o=!1},d(_){_&&h(e),q(n),~l&&p[l].d()}}}function zt(r){let e,n,t;function a(l){r[8](l)}let i={};return r[0].value.data.options!==void 0&&(i.value=r[0].value.data.options),e=new $e({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.value=l[0].value.data.options,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Ct(r){let e,n,t;function a(l){r[7](l)}let i={options:r[4]};return r[0].value.data!==void 0&&(i.value=r[0].value.data),e=new se({props:i}),G.push(()=>L(e,"value",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.value=l[0].value.data,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Mt(r){let e,n,t=r[0]&&Ne(r);return{c(){t&&t.c(),e=X()},l(a){t&&t.l(a),e=X()},m(a,i){t&&t.m(a,i),E(a,e,i),n=!0},p(a,[i]){a[0]?t?(t.p(a,i),i&1&&v(t,1)):(t=Ne(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(j(),b(t,1,1,()=>{t=null}),H())},i(a){n||(v(t),n=!0)},o(a){b(t),n=!1},d(a){t&&t.d(a),a&&h(e)}}}function Qt(r,e,n){let{prop:t}=e,{defaults:a={fixed:"NE",choice:{options:["NE","NW"]}}}=e,i;t&&(i=t.value.kind,i!=t.value.kind&&l(i));function l($){n(0,t.value.kind=$,t),n(0,t.value.data=a[$],t)}function s($){const _=$.detail;l(_)}const o=[{label:"fixed",value:ne.Fixed},{label:"choice",value:ne.Choice}],u=[{label:"NW",value:"NW"},{label:"NE",value:"NE"},{label:"SW",value:"SW"},{label:"SE",value:"SE"}];function f($){i=$,n(1,i)}function c($){r.$$.not_equal(t.value.data,$)&&(t.value.data=$,n(0,t))}function p($){r.$$.not_equal(t.value.data.options,$)&&(t.value.data.options=$,n(0,t))}return r.$$set=$=>{"prop"in $&&n(0,t=$.prop),"defaults"in $&&n(5,a=$.defaults)},[t,i,s,o,u,a,f,c,p]}class Wt extends x{constructor(e){super(),ee(this,e,Qt,Mt,te,{prop:0,defaults:5})}}function Te(r){let e,n,t;return{c(){e=P("input"),this.h()},l(a){e=N(a,"INPUT",{type:!0,accept:!0}),this.h()},h(){I(e,"type","file"),I(e,"accept","image/svg+xml")},m(a,i){E(a,e,i),n||(t=_e(e,"change",r[3]),n=!0)},p:Z,d(a){a&&h(e),n=!1,t()}}}function jt(r){let e,n,t,a,i,l,s;return l=new Ze({props:{$$slots:{default:[Xt]},$$scope:{ctx:r}}}),l.$on("click",r[4]),{c(){e=P("div"),n=P("div"),t=P("img"),i=U(),S(l.$$.fragment),this.h()},l(o){e=N(o,"DIV",{class:!0});var u=F(e);n=N(u,"DIV",{class:!0});var f=F(n);t=N(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach(h),i=K(u),V(l.$$.fragment,u),u.forEach(h),this.h()},h(){I(t,"class","w-20 h-20 object-cover"),Se(t.src,a=r[0])||I(t,"src",a),I(t,"alt","up"),I(n,"class","bg-white"),I(e,"class","flex flex-row bg-slate-300 border-slate-300 border-2 w-fit items-center")},m(o,u){E(o,e,u),y(e,n),y(n,t),y(e,i),D(l,e,null),s=!0},p(o,u){(!s||u&1&&!Se(t.src,a=o[0]))&&I(t,"src",a);const f={};u&32&&(f.$$scope={dirty:u,ctx:o}),l.$set(f)},i(o){s||(v(l.$$.fragment,o),s=!0)},o(o){b(l.$$.fragment,o),s=!1},d(o){o&&h(e),q(l)}}}function Ht(r){let e,n;return{c(){e=P("p"),n=C("Loading...")},l(t){e=N(t,"P",{});var a=F(e);n=M(a,"Loading..."),a.forEach(h)},m(t,a){E(t,e,a),y(e,n)},p:Z,i:Z,o:Z,d(t){t&&h(e)}}}function Xt(r){let e;return{c(){e=C("x")},l(n){e=M(n,"x")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Jt(r){let e,n,t,a,i,l=!r[0]&&Te(r);const s=[Ht,jt],o=[];function u(f,c){return f[2]?0:f[0]?1:-1}return~(n=u(r))&&(t=o[n]=s[n](r)),{c(){l&&l.c(),e=U(),t&&t.c(),a=X()},l(f){l&&l.l(f),e=K(f),t&&t.l(f),a=X()},m(f,c){l&&l.m(f,c),E(f,e,c),~n&&o[n].m(f,c),E(f,a,c),i=!0},p(f,[c]){f[0]?l&&(l.d(1),l=null):l?l.p(f,c):(l=Te(f),l.c(),l.m(e.parentNode,e));let p=n;n=u(f),n===p?~n&&o[n].p(f,c):(t&&(j(),b(o[p],1,1,()=>{o[p]=null}),H()),~n?(t=o[n],t?t.p(f,c):(t=o[n]=s[n](f),t.c()),v(t,1),t.m(a.parentNode,a)):t=null)},i(f){i||(v(t),i=!0)},o(f){b(t),i=!1},d(f){l&&l.d(f),f&&h(e),~n&&o[n].d(f),f&&h(a)}}}function Yt(r,e,n){let{dataUrl:t}=e,a=!1,i;function l(){i=this.files,n(1,i)}const s=()=>{n(0,t="")};return r.$$set=o=>{"dataUrl"in o&&n(0,t=o.dataUrl)},r.$$.update=()=>{if(r.$$.dirty&2&&i){n(2,a=!0);const o=i[0],u=new FileReader;u.readAsDataURL(o),u.onload=()=>{const f=u.result;n(0,t=f),n(2,a=!1)}}},[t,i,a,l,s]}class Zt extends x{constructor(e){super(),ee(this,e,Yt,Jt,te,{dataUrl:0})}}function Fe(r,e,n){const t=r.slice();return t[6]=e[n],t}function Oe(r){let e,n,t,a,i=r[6]+"",l,s,o,u,f;return o=ot(r[3][0]),{c(){e=P("label"),n=P("input"),t=U(),a=P("span"),l=C(i),s=U(),this.h()},l(c){e=N(c,"LABEL",{class:!0});var p=F(e);n=N(p,"INPUT",{type:!0,name:!0,id:!0}),t=K(p),a=N(p,"SPAN",{});var $=F(a);l=M($,i),$.forEach(h),s=K(p),p.forEach(h),this.h()},h(){I(n,"type","checkbox"),n.__value=r[6],n.value=n.__value,I(n,"name","directory"),I(n,"id",r[6]),I(e,"class","text-sm"),o.p(n)},m(c,p){E(c,e,p),y(e,n),n.checked=~(r[0]||[]).indexOf(n.__value),y(e,t),y(e,a),y(a,l),y(e,s),u||(f=_e(n,"change",r[2]),u=!0)},p(c,p){p&1&&(n.checked=~(c[0]||[]).indexOf(n.__value))},d(c){c&&h(e),o.r(),u=!1,f()}}}function xt(r){let e,n=r[1],t=[];for(let a=0;a<n.length;a+=1)t[a]=Oe(Fe(r,n,a));return{c(){e=P("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=N(a,"DIV",{class:!0});var i=F(e);for(let l=0;l<t.length;l+=1)t[l].l(i);i.forEach(h),this.h()},h(){I(e,"class","flex flex-col space-y-1")},m(a,i){E(a,e,i);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(a,[i]){if(i&3){n=a[1];let l;for(l=0;l<n.length;l+=1){const s=Fe(a,n,l);t[l]?t[l].p(s,i):(t[l]=Oe(s),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i:Z,o:Z,d(a){a&&h(e),st(t,a)}}}function en(r,e,n){let t;ue(r,ht,u=>n(4,t=u));let{selected:a=[]}=e,i=l();function l(){const u=[];if(t.kind=="directory")for(let f of t.value)f.kind=="directory"&&u.push(f.name);return u}const s=[[]];function o(){a=ut(s[0],this.__value,this.checked),n(0,a)}return r.$$set=u=>{"selected"in u&&n(0,a=u.selected)},[a,i,o,s]}class tn extends x{constructor(e){super(),ee(this,e,en,xt,te,{selected:0})}}function Ue(r){let e,n,t,a,i,l,s,o;function u(_){r[5](_)}let f={options:r[3]};r[1]!==void 0&&(f.value=r[1]),n=new se({props:f}),G.push(()=>L(n,"value",u)),n.$on("changed",r[2]);const c=[ln,nn],p=[];function $(_,m){return _[0].value.kind==ne.Fixed?0:_[0].value.kind==ne.Choice?1:-1}return~(l=$(r))&&(s=p[l]=c[l](r)),{c(){e=P("div"),S(n.$$.fragment),a=U(),i=P("div"),s&&s.c(),this.h()},l(_){e=N(_,"DIV",{class:!0});var m=F(e);V(n.$$.fragment,m),a=K(m),i=N(m,"DIV",{class:!0});var g=F(i);s&&s.l(g),g.forEach(h),m.forEach(h),this.h()},h(){I(i,"class","flex flex-row space-x-2"),I(e,"class","flex flex-row space-x-4")},m(_,m){E(_,e,m),D(n,e,null),y(e,a),y(e,i),~l&&p[l].m(i,null),o=!0},p(_,m){const g={};!t&&m&2&&(t=!0,g.value=_[1],z(()=>t=!1)),n.$set(g);let d=l;l=$(_),l===d?~l&&p[l].p(_,m):(s&&(j(),b(p[d],1,1,()=>{p[d]=null}),H()),~l?(s=p[l],s?s.p(_,m):(s=p[l]=c[l](_),s.c()),v(s,1),s.m(i,null)):s=null)},i(_){o||(v(n.$$.fragment,_),v(s),o=!0)},o(_){b(n.$$.fragment,_),b(s),o=!1},d(_){_&&h(e),q(n),~l&&p[l].d()}}}function nn(r){let e,n,t;function a(l){r[7](l)}let i={};return r[0].value.data.options!==void 0&&(i.selected=r[0].value.data.options),e=new tn({props:i}),G.push(()=>L(e,"selected",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.selected=l[0].value.data.options,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function ln(r){let e,n,t;function a(l){r[6](l)}let i={};return r[0].value.data!==void 0&&(i.dataUrl=r[0].value.data),e=new Zt({props:i}),G.push(()=>L(e,"dataUrl",a)),{c(){S(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const o={};!n&&s&1&&(n=!0,o.dataUrl=l[0].value.data,z(()=>n=!1)),e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function an(r){let e,n,t=r[0]&&Ue(r);return{c(){t&&t.c(),e=X()},l(a){t&&t.l(a),e=X()},m(a,i){t&&t.m(a,i),E(a,e,i),n=!0},p(a,[i]){a[0]?t?(t.p(a,i),i&1&&v(t,1)):(t=Ue(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(j(),b(t,1,1,()=>{t=null}),H())},i(a){n||(v(t),n=!0)},o(a){b(t),n=!1},d(a){t&&t.d(a),a&&h(e)}}}function rn(r,e,n){let{prop:t}=e,{defaults:a={fixed:"",choice:{options:[]}}}=e,i;t&&(i=t.value.kind,i!=t.value.kind&&l(i));function l(p){n(0,t.value.kind=p,t),n(0,t.value.data=a[p],t)}function s(p){const $=p.detail;l($)}const o=[{label:"fixed",value:ne.Fixed},{label:"choice",value:ne.Choice}];function u(p){i=p,n(1,i)}function f(p){r.$$.not_equal(t.value.data,p)&&(t.value.data=p,n(0,t))}function c(p){r.$$.not_equal(t.value.data.options,p)&&(t.value.data.options=p,n(0,t))}return r.$$set=p=>{"prop"in p&&n(0,t=p.prop),"defaults"in p&&n(4,a=p.defaults)},[t,i,s,o,a,u,f,c]}class sn extends x{constructor(e){super(),ee(this,e,rn,an,te,{prop:0,defaults:4})}}function on(r){let e;return{c(){e=C("Forma")},l(n){e=M(n,"Forma")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Ke(r){let e,n,t,a,i,l,s,o,u,f,c,p,$,_,m,g,d,k,O,w,A,J,R=r[0].shape.kind==Y.SVG&&Ae(r);a=new le({props:{target:"scale_x",$$slots:{default:[fn]},$$scope:{ctx:r}}});function xe(T){r[8](T)}let ve={};r[0].shape.props.scale_x!==void 0&&(ve.prop=r[0].shape.props.scale_x),l=new pe({props:ve}),G.push(()=>L(l,"prop",xe)),f=new le({props:{target:"scale_y",$$slots:{default:[pn]},$$scope:{ctx:r}}});function et(T){r[9](T)}let be={};r[0].shape.props.scale_y!==void 0&&(be.prop=r[0].shape.props.scale_y),p=new pe({props:be}),G.push(()=>L(p,"prop",et)),g=new le({props:{target:"rotation",$$slots:{default:[cn]},$$scope:{ctx:r}}});function tt(T){r[10](T)}let ke={defaults:r[4]};r[0].shape.props.rotation!==void 0&&(ke.prop=r[0].shape.props.rotation),k=new pe({props:ke}),G.push(()=>L(k,"prop",tt));let Q=(r[0].shape.kind==Y.Quarter||r[0].shape.kind==Y.Ellipse)&&Be(r),W=r[0].shape.kind==Y.Quarter&&Re(r);return{c(){e=P("div"),R&&R.c(),n=U(),t=P("div"),S(a.$$.fragment),i=U(),S(l.$$.fragment),o=U(),u=P("div"),S(f.$$.fragment),c=U(),S(p.$$.fragment),_=U(),m=P("div"),S(g.$$.fragment),d=U(),S(k.$$.fragment),w=U(),Q&&Q.c(),A=U(),W&&W.c(),this.h()},l(T){e=N(T,"DIV",{class:!0});var B=F(e);R&&R.l(B),n=K(B),t=N(B,"DIV",{class:!0});var ae=F(t);V(a.$$.fragment,ae),i=K(ae),V(l.$$.fragment,ae),ae.forEach(h),o=K(B),u=N(B,"DIV",{class:!0});var re=F(u);V(f.$$.fragment,re),c=K(re),V(p.$$.fragment,re),re.forEach(h),_=K(B),m=N(B,"DIV",{class:!0});var ie=F(m);V(g.$$.fragment,ie),d=K(ie),V(k.$$.fragment,ie),ie.forEach(h),w=K(B),Q&&Q.l(B),A=K(B),W&&W.l(B),B.forEach(h),this.h()},h(){I(t,"class","block"),I(u,"class","block"),I(m,"class","block"),I(e,"class","space-y-4 pl-8")},m(T,B){E(T,e,B),R&&R.m(e,null),y(e,n),y(e,t),D(a,t,null),y(t,i),D(l,t,null),y(e,o),y(e,u),D(f,u,null),y(u,c),D(p,u,null),y(e,_),y(e,m),D(g,m,null),y(m,d),D(k,m,null),y(e,w),Q&&Q.m(e,null),y(e,A),W&&W.m(e,null),J=!0},p(T,B){T[0].shape.kind==Y.SVG?R?(R.p(T,B),B&1&&v(R,1)):(R=Ae(T),R.c(),v(R,1),R.m(e,n)):R&&(j(),b(R,1,1,()=>{R=null}),H());const ae={};B&16384&&(ae.$$scope={dirty:B,ctx:T}),a.$set(ae);const re={};!s&&B&1&&(s=!0,re.prop=T[0].shape.props.scale_x,z(()=>s=!1)),l.$set(re);const ie={};B&16384&&(ie.$$scope={dirty:B,ctx:T}),f.$set(ie);const ye={};!$&&B&1&&($=!0,ye.prop=T[0].shape.props.scale_y,z(()=>$=!1)),p.$set(ye);const we={};B&16384&&(we.$$scope={dirty:B,ctx:T}),g.$set(we);const Ee={};!O&&B&1&&(O=!0,Ee.prop=T[0].shape.props.rotation,z(()=>O=!1)),k.$set(Ee),T[0].shape.kind==Y.Quarter||T[0].shape.kind==Y.Ellipse?Q?(Q.p(T,B),B&1&&v(Q,1)):(Q=Be(T),Q.c(),v(Q,1),Q.m(e,A)):Q&&(j(),b(Q,1,1,()=>{Q=null}),H()),T[0].shape.kind==Y.Quarter?W?(W.p(T,B),B&1&&v(W,1)):(W=Re(T),W.c(),v(W,1),W.m(e,null)):W&&(j(),b(W,1,1,()=>{W=null}),H())},i(T){J||(v(R),v(a.$$.fragment,T),v(l.$$.fragment,T),v(f.$$.fragment,T),v(p.$$.fragment,T),v(g.$$.fragment,T),v(k.$$.fragment,T),v(Q),v(W),J=!0)},o(T){b(R),b(a.$$.fragment,T),b(l.$$.fragment,T),b(f.$$.fragment,T),b(p.$$.fragment,T),b(g.$$.fragment,T),b(k.$$.fragment,T),b(Q),b(W),J=!1},d(T){T&&h(e),R&&R.d(),q(a),q(l),q(f),q(p),q(g),q(k),Q&&Q.d(),W&&W.d()}}}function Ae(r){let e,n,t,a,i,l;n=new le({props:{target:"",$$slots:{default:[un]},$$scope:{ctx:r}}});function s(u){r[7](u)}let o={};return r[0].shape.props.path!==void 0&&(o.prop=r[0].shape.props.path),a=new sn({props:o}),G.push(()=>L(a,"prop",s)),{c(){e=P("div"),S(n.$$.fragment),t=U(),S(a.$$.fragment),this.h()},l(u){e=N(u,"DIV",{class:!0});var f=F(e);V(n.$$.fragment,f),t=K(f),V(a.$$.fragment,f),f.forEach(h),this.h()},h(){I(e,"class","block")},m(u,f){E(u,e,f),D(n,e,null),y(e,t),D(a,e,null),l=!0},p(u,f){const c={};f&16384&&(c.$$scope={dirty:f,ctx:u}),n.$set(c);const p={};!i&&f&1&&(i=!0,p.prop=u[0].shape.props.path,z(()=>i=!1)),a.$set(p)},i(u){l||(v(n.$$.fragment,u),v(a.$$.fragment,u),l=!0)},o(u){b(n.$$.fragment,u),b(a.$$.fragment,u),l=!1},d(u){u&&h(e),q(n),q(a)}}}function un(r){let e;return{c(){e=C("SVG Path")},l(n){e=M(n,"SVG Path")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function fn(r){let e;return{c(){e=C("Scala orizzontale")},l(n){e=M(n,"Scala orizzontale")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function pn(r){let e;return{c(){e=C("Scala verticale")},l(n){e=M(n,"Scala verticale")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function cn(r){let e;return{c(){e=C("Rotazione")},l(n){e=M(n,"Rotazione")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Be(r){let e,n,t,a,i,l,s,o,u,f,c,p;n=new le({props:{target:"squaring",$$slots:{default:[_n]},$$scope:{ctx:r}}});function $(d){r[11](d)}let _={defaults:r[5]};r[0].shape.props.squaring!==void 0&&(_.prop=r[0].shape.props.squaring),a=new pe({props:_}),G.push(()=>L(a,"prop",$)),o=new le({props:{target:"negative",$$slots:{default:[dn]},$$scope:{ctx:r}}});function m(d){r[12](d)}let g={};return r[0].shape.props.negative!==void 0&&(g.prop=r[0].shape.props.negative),f=new Ot({props:g}),G.push(()=>L(f,"prop",m)),{c(){e=P("div"),S(n.$$.fragment),t=U(),S(a.$$.fragment),l=U(),s=P("div"),S(o.$$.fragment),u=U(),S(f.$$.fragment),this.h()},l(d){e=N(d,"DIV",{class:!0});var k=F(e);V(n.$$.fragment,k),t=K(k),V(a.$$.fragment,k),k.forEach(h),l=K(d),s=N(d,"DIV",{class:!0});var O=F(s);V(o.$$.fragment,O),u=K(O),V(f.$$.fragment,O),O.forEach(h),this.h()},h(){I(e,"class","block"),I(s,"class","block")},m(d,k){E(d,e,k),D(n,e,null),y(e,t),D(a,e,null),E(d,l,k),E(d,s,k),D(o,s,null),y(s,u),D(f,s,null),p=!0},p(d,k){const O={};k&16384&&(O.$$scope={dirty:k,ctx:d}),n.$set(O);const w={};!i&&k&1&&(i=!0,w.prop=d[0].shape.props.squaring,z(()=>i=!1)),a.$set(w);const A={};k&16384&&(A.$$scope={dirty:k,ctx:d}),o.$set(A);const J={};!c&&k&1&&(c=!0,J.prop=d[0].shape.props.negative,z(()=>c=!1)),f.$set(J)},i(d){p||(v(n.$$.fragment,d),v(a.$$.fragment,d),v(o.$$.fragment,d),v(f.$$.fragment,d),p=!0)},o(d){b(n.$$.fragment,d),b(a.$$.fragment,d),b(o.$$.fragment,d),b(f.$$.fragment,d),p=!1},d(d){d&&h(e),q(n),q(a),d&&h(l),d&&h(s),q(o),q(f)}}}function _n(r){let e;return{c(){e=C("Squadratura")},l(n){e=M(n,"Squadratura")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function dn(r){let e;return{c(){e=C("Negativo")},l(n){e=M(n,"Negativo")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Re(r){let e,n,t,a,i,l;n=new le({props:{target:"orientamento",$$slots:{default:[mn]},$$scope:{ctx:r}}});function s(u){r[13](u)}let o={};return r[0].shape.props.orientation!==void 0&&(o.prop=r[0].shape.props.orientation),a=new Wt({props:o}),G.push(()=>L(a,"prop",s)),{c(){e=P("div"),S(n.$$.fragment),t=U(),S(a.$$.fragment),this.h()},l(u){e=N(u,"DIV",{class:!0});var f=F(e);V(n.$$.fragment,f),t=K(f),V(a.$$.fragment,f),f.forEach(h),this.h()},h(){I(e,"class","block")},m(u,f){E(u,e,f),D(n,e,null),y(e,t),D(a,e,null),l=!0},p(u,f){const c={};f&16384&&(c.$$scope={dirty:f,ctx:u}),n.$set(c);const p={};!i&&f&1&&(i=!0,p.prop=u[0].shape.props.orientation,z(()=>i=!1)),a.$set(p)},i(u){l||(v(n.$$.fragment,u),v(a.$$.fragment,u),l=!0)},o(u){b(n.$$.fragment,u),b(a.$$.fragment,u),l=!1},d(u){u&&h(e),q(n),q(a)}}}function mn(r){let e;return{c(){e=C("Orientamento")},l(n){e=M(n,"Orientamento")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function gn(r){let e,n,t=r[0].symbol+"",a,i,l,s,o,u,f,c,p,$;o=new le({props:{target:"shape",$$slots:{default:[on]},$$scope:{ctx:r}}});function _(d){r[6](d)}let m={options:r[3]};r[1]!==void 0&&(m.value=r[1]),f=new se({props:m}),G.push(()=>L(f,"value",_)),f.$on("changed",r[2]);let g=r[0].shape.kind!=Y.Void&&Ke(r);return{c(){e=P("div"),n=P("div"),a=C(t),i=U(),l=P("div"),s=P("div"),S(o.$$.fragment),u=U(),S(f.$$.fragment),p=U(),g&&g.c(),this.h()},l(d){e=N(d,"DIV",{class:!0});var k=F(e);n=N(k,"DIV",{class:!0});var O=F(n);a=M(O,t),O.forEach(h),i=K(k),l=N(k,"DIV",{class:!0});var w=F(l);s=N(w,"DIV",{class:!0});var A=F(s);V(o.$$.fragment,A),u=K(A),V(f.$$.fragment,A),A.forEach(h),p=K(w),g&&g.l(w),w.forEach(h),k.forEach(h),this.h()},h(){I(n,"class","text-xl p-4 bg-slate-800 text-white font-mono"),I(s,"class","space-y-1"),I(l,"class","space-y-8 px-0 pt-4"),I(e,"class","flex flex-col flex-nowrap")},m(d,k){E(d,e,k),y(e,n),y(n,a),y(e,i),y(e,l),y(l,s),D(o,s,null),y(s,u),D(f,s,null),y(l,p),g&&g.m(l,null),$=!0},p(d,[k]){(!$||k&1)&&t!==(t=d[0].symbol+"")&&he(a,t);const O={};k&16384&&(O.$$scope={dirty:k,ctx:d}),o.$set(O);const w={};!c&&k&2&&(c=!0,w.value=d[1],z(()=>c=!1)),f.$set(w),d[0].shape.kind!=Y.Void?g?(g.p(d,k),k&1&&v(g,1)):(g=Ke(d),g.c(),v(g,1),g.m(l,null)):g&&(j(),b(g,1,1,()=>{g=null}),H())},i(d){$||(v(o.$$.fragment,d),v(f.$$.fragment,d),v(g),$=!0)},o(d){b(o.$$.fragment,d),b(f.$$.fragment,d),b(g),$=!1},d(d){d&&h(e),q(o),q(f),g&&g.d()}}}function hn(r,e,n){let{rule:t}=e,a=t.shape.kind;a!=t.shape.kind&&i();function i(){const d={void:ft,rectangle:pt,ellipse:ct,quarter:_t,svg:dt};n(0,t.shape.props=d[a],t),n(0,t.shape.kind=a,t)}const l=[{label:"rectangle",value:Y.Rectangle},{label:"ellipse",value:Y.Ellipse},{label:"quarter",value:Y.Quarter},{label:"void",value:Y.Void},{label:"svg",value:Y.SVG}],s={fixed:0,choice:{options:[0,45]},range:{min:0,max:90}},o={fixed:.56,choice:{options:[0,.56,1]},range:{min:0,max:1}};function u(d){a=d,n(1,a)}function f(d){r.$$.not_equal(t.shape.props.path,d)&&(t.shape.props.path=d,n(0,t))}function c(d){r.$$.not_equal(t.shape.props.scale_x,d)&&(t.shape.props.scale_x=d,n(0,t))}function p(d){r.$$.not_equal(t.shape.props.scale_y,d)&&(t.shape.props.scale_y=d,n(0,t))}function $(d){r.$$.not_equal(t.shape.props.rotation,d)&&(t.shape.props.rotation=d,n(0,t))}function _(d){r.$$.not_equal(t.shape.props.squaring,d)&&(t.shape.props.squaring=d,n(0,t))}function m(d){r.$$.not_equal(t.shape.props.negative,d)&&(t.shape.props.negative=d,n(0,t))}function g(d){r.$$.not_equal(t.shape.props.orientation,d)&&(t.shape.props.orientation=d,n(0,t))}return r.$$set=d=>{"rule"in d&&n(0,t=d.rule)},[t,a,i,l,s,o,u,f,c,p,$,_,m,g]}class $n extends x{constructor(e){super(),ee(this,e,hn,gn,te,{rule:0})}}function Ge(r,e,n){const t=r.slice();return t[2]=e[n],t[3]=e,t[4]=n,t}function vn(r){let e,n;return{c(){e=P("p"),n=C("Inizia a disegnare un glifo per modificare la sintassi!"),this.h()},l(t){e=N(t,"P",{class:!0});var a=F(e);n=M(a,"Inizia a disegnare un glifo per modificare la sintassi!"),a.forEach(h),this.h()},h(){I(e,"class","font-mono w-full border-2 border-slate-200 text-slate-300 p-12")},m(t,a){E(t,e,a),y(e,n)},p:Z,i:Z,o:Z,d(t){t&&h(e)}}}function bn(r){let e=[],n=new Map,t,a,i=r[0].rules;const l=s=>s[2];for(let s=0;s<i.length;s+=1){let o=Ge(r,i,s),u=l(o);n.set(u,e[s]=Le(u,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=X()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=X()},m(s,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,o);E(s,t,o),a=!0},p(s,o){o&1&&(i=s[0].rules,j(),e=ge(e,o,l,1,s,i,n,t.parentNode,Xe,Le,t,Ge),H())},i(s){if(!a){for(let o=0;o<i.length;o+=1)v(e[o]);a=!0}},o(s){for(let o=0;o<e.length;o+=1)b(e[o]);a=!1},d(s){for(let o=0;o<e.length;o+=1)e[o].d(s);s&&h(t)}}}function Le(r,e){let n,t,a,i;function l(o){e[1](o,e[2],e[3],e[4])}let s={};return e[2]!==void 0&&(s.rule=e[2]),t=new $n({props:s}),G.push(()=>L(t,"rule",l)),{key:r,first:null,c(){n=X(),S(t.$$.fragment),this.h()},l(o){n=X(),V(t.$$.fragment,o),this.h()},h(){this.first=n},m(o,u){E(o,n,u),D(t,o,u),i=!0},p(o,u){e=o;const f={};!a&&u&1&&(a=!0,f.rule=e[2],z(()=>a=!1)),t.$set(f)},i(o){i||(v(t.$$.fragment,o),i=!0)},o(o){b(t.$$.fragment,o),i=!1},d(o){o&&h(n),q(t,o)}}}function kn(r){let e,n,t,a,i,l,s;const o=[bn,vn],u=[];function f(c,p){return c[0].rules.length?0:1}return i=f(r),l=u[i]=o[i](r),{c(){e=P("p"),n=C("Regole sintassi"),t=U(),a=P("div"),l.c(),this.h()},l(c){e=N(c,"P",{class:!0});var p=F(e);n=M(p,"Regole sintassi"),p.forEach(h),t=K(c),a=N(c,"DIV",{class:!0});var $=F(a);l.l($),$.forEach(h),this.h()},h(){I(e,"class","text-small font-mono text-slate-900 mb-2 text-sm"),I(a,"class","block space-y-12")},m(c,p){E(c,e,p),y(e,n),E(c,t,p),E(c,a,p),u[i].m(a,null),s=!0},p(c,[p]){let $=i;i=f(c),i===$?u[i].p(c,p):(j(),b(u[$],1,1,()=>{u[$]=null}),H(),l=u[i],l?l.p(c,p):(l=u[i]=o[i](c),l.c()),v(l,1),l.m(a,null))},i(c){s||(v(l),s=!0)},o(c){b(l),s=!1},d(c){c&&h(e),c&&h(t),c&&h(a),u[i].d()}}}function yn(r,e,n){let{syntax:t}=e;function a(i,l,s,o){s[o]=i,n(0,t)}return r.$$set=i=>{"syntax"in i&&n(0,t=i.syntax)},[t,a]}class wn extends x{constructor(e){super(),ee(this,e,yn,kn,te,{syntax:0})}}function En(r){let e;return{c(){e=C("Preview text")},l(n){e=M(n,"Preview text")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function ze(r){let e,n;return e=new wt({props:{syntax:r[0],glyphs:r[1],$$slots:{default:[In,({font:t})=>({7:t}),({font:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,a){D(e,t,a),n=!0},p(t,a){const i={};a&1&&(i.syntax=t[0]),a&2&&(i.glyphs=t[1]),a&388&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Ce(r){let e,n;return e=new Et({props:{font:r[7],text:r[2]}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,a){D(e,t,a),n=!0},p(t,a){const i={};a&128&&(i.font=t[7]),a&4&&(i.text=t[2]),e.$set(i)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function In(r){let e,n,t=r[7]&&Ce(r);return{c(){t&&t.c(),e=X()},l(a){t&&t.l(a),e=X()},m(a,i){t&&t.m(a,i),E(a,e,i),n=!0},p(a,i){a[7]?t?(t.p(a,i),i&128&&v(t,1)):(t=Ce(a),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(j(),b(t,1,1,()=>{t=null}),H())},i(a){n||(v(t),n=!0)},o(a){b(t),n=!1},d(a){t&&t.d(a),a&&h(e)}}}function Sn(r){let e,n,t,a,i,l,s,o,u,f;t=new le({props:{target:"previewText",$$slots:{default:[En]},$$scope:{ctx:r}}});function c(g){r[4](g)}function p(g){r[5](g)}function $(g){r[6](g)}let _={name:"previewText"};r[3]!==void 0&&(_.text=r[3]),r[1]!==void 0&&(_.glyphs=r[1]),r[2]!==void 0&&(_.validText=r[2]),i=new It({props:_}),G.push(()=>L(i,"text",c)),G.push(()=>L(i,"glyphs",p)),G.push(()=>L(i,"validText",$));let m=r[1].length&&r[0]&&ze(r);return{c(){e=P("div"),n=P("div"),S(t.$$.fragment),a=U(),S(i.$$.fragment),u=U(),m&&m.c(),this.h()},l(g){e=N(g,"DIV",{class:!0});var d=F(e);n=N(d,"DIV",{class:!0});var k=F(n);V(t.$$.fragment,k),a=K(k),V(i.$$.fragment,k),k.forEach(h),u=K(d),m&&m.l(d),d.forEach(h),this.h()},h(){I(n,"class","space-y-2 overflow-x-hidden shrink-0 sticky top-0 border-b border-b-gray-200 bg-white"),I(e,"class","space-y-8")},m(g,d){E(g,e,d),y(e,n),D(t,n,null),y(n,a),D(i,n,null),y(e,u),m&&m.m(e,null),f=!0},p(g,[d]){const k={};d&256&&(k.$$scope={dirty:d,ctx:g}),t.$set(k);const O={};!l&&d&8&&(l=!0,O.text=g[3],z(()=>l=!1)),!s&&d&2&&(s=!0,O.glyphs=g[1],z(()=>s=!1)),!o&&d&4&&(o=!0,O.validText=g[2],z(()=>o=!1)),i.$set(O),g[1].length&&g[0]?m?(m.p(g,d),d&3&&v(m,1)):(m=ze(g),m.c(),v(m,1),m.m(e,null)):m&&(j(),b(m,1,1,()=>{m=null}),H())},i(g){f||(v(t.$$.fragment,g),v(i.$$.fragment,g),v(m),f=!0)},o(g){b(t.$$.fragment,g),b(i.$$.fragment,g),b(m),f=!1},d(g){g&&h(e),q(t),q(i),m&&m.d()}}}const Me=Je("hello");function Vn(r,e,n){let t,a=Z;ue(r,Me,c=>n(3,t=c)),r.$$.on_destroy.push(()=>a());let{syntax:i}=e,l=[],s="";function o(c){t=c,Me.set(t)}function u(c){l=c,n(1,l)}function f(c){s=c,n(2,s)}return r.$$set=c=>{"syntax"in c&&n(0,i=c.syntax)},[i,l,s,t,o,u,f]}class Dn extends x{constructor(e){super(),ee(this,e,Vn,Sn,te,{syntax:0})}}function Qe(r,e,n){const t=r.slice();return t[11]=e[n],t}function qn(r){let e;return{c(){e=C("+ Aggiungi stile")},l(n){e=M(n,"+ Aggiungi stile")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Pn(r){let e,n;return e=new Ze({props:{$$slots:{default:[qn]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,a){D(e,t,a),n=!0},p(t,a){const i={};a&16384&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Nn(r){let e;return{c(){e=C("Lista stili")},l(n){e=M(n,"Lista stili")},m(n,t){E(n,e,t)},d(n){n&&h(e)}}}function Tn(r){let e=r[11].name+"",n,t;return{c(){n=C(e),t=U()},l(a){n=M(a,e),t=K(a)},m(a,i){E(a,n,i),E(a,t,i)},p(a,i){i&1&&e!==(e=a[11].name+"")&&he(n,e)},d(a){a&&h(n),a&&h(t)}}}function We(r,e){let n,t,a;return t=new yt({props:{selection:ce,id:e[11].id,$$slots:{default:[Tn]},$$scope:{ctx:e}}}),{key:r,first:null,c(){n=X(),S(t.$$.fragment),this.h()},l(i){n=X(),V(t.$$.fragment,i),this.h()},h(){this.first=n},m(i,l){E(i,n,l),D(t,i,l),a=!0},p(i,l){e=i;const s={};l&1&&(s.id=e[11].id),l&16385&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(i){a||(v(t.$$.fragment,i),a=!0)},o(i){b(t.$$.fragment,i),a=!1},d(i){i&&h(n),q(t,i)}}}function Fn(r){let e=[],n=new Map,t,a,i=r[0];const l=s=>s[11].id;for(let s=0;s<i.length;s+=1){let o=Qe(r,i,s),u=l(o);n.set(u,e[s]=We(u,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=X()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=X()},m(s,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,o);E(s,t,o),a=!0},p(s,o){o&1&&(i=s[0],j(),e=ge(e,o,l,1,s,i,n,t.parentNode,Xe,We,t,Qe),H())},i(s){if(!a){for(let o=0;o<i.length;o+=1)v(e[o]);a=!0}},o(s){for(let o=0;o<e.length;o+=1)b(e[o]);a=!1},d(s){for(let o=0;o<e.length;o+=1)e[o].d(s);s&&h(t)}}}function je(r){let e,n,t,a,i,l,s,o,u,f,c,p,$,_,m;function g(w){r[6](w)}let d={name:"styleName"};r[0][r[1]].name!==void 0&&(d.value=r[0][r[1]].name),l=new Ye({props:d}),G.push(()=>L(l,"value",g)),u=new kt({}),u.$on("delete",r[3]);function k(w){r[7](w)}let O={};return r[0][r[1]]!==void 0&&(O.syntax=r[0][r[1]]),$=new wn({props:O}),G.push(()=>L($,"syntax",k)),{c(){e=P("div"),n=P("div"),t=P("p"),a=C("Nome stile"),i=U(),S(l.$$.fragment),o=U(),S(u.$$.fragment),f=U(),c=P("hr"),p=U(),S($.$$.fragment),this.h()},l(w){e=N(w,"DIV",{class:!0});var A=F(e);n=N(A,"DIV",{class:!0});var J=F(n);t=N(J,"P",{class:!0});var R=F(t);a=M(R,"Nome stile"),R.forEach(h),i=K(J),V(l.$$.fragment,J),J.forEach(h),o=K(A),V(u.$$.fragment,A),A.forEach(h),f=K(w),c=N(w,"HR",{}),p=K(w),V($.$$.fragment,w),this.h()},h(){I(t,"class","text-small font-mono text-slate-900 mb-2 text-sm"),I(n,"class","flex flex-col mb-8"),I(e,"class","")},m(w,A){E(w,e,A),y(e,n),y(n,t),y(t,a),y(n,i),D(l,n,null),y(e,o),D(u,e,null),E(w,f,A),E(w,c,A),E(w,p,A),D($,w,A),m=!0},p(w,A){const J={};!s&&A&3&&(s=!0,J.value=w[0][w[1]].name,z(()=>s=!1)),l.$set(J);const R={};!_&&A&3&&(_=!0,R.syntax=w[0][w[1]],z(()=>_=!1)),$.$set(R)},i(w){m||(v(l.$$.fragment,w),v(u.$$.fragment,w),v($.$$.fragment,w),m=!0)},o(w){b(l.$$.fragment,w),b(u.$$.fragment,w),b($.$$.fragment,w),m=!1},d(w){w&&h(e),q(l),q(u),w&&h(f),w&&h(c),w&&h(p),q($,w)}}}function He(r){let e,n;return e=new Dn({props:{syntax:r[0][r[1]]}}),{c(){S(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,a){D(e,t,a),n=!0},p(t,a){const i={};a&3&&(i.syntax=t[0][t[1]]),e.$set(i)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function On(r){let e,n,t,a,i,l,s;n=new vt({props:{$$slots:{items:[Fn],listTitle:[Nn],topArea:[Pn]},$$scope:{ctx:r}}});let o=r[1]!==void 0&&je(r),u=r[1]!==void 0&&He(r);return{c(){e=P("div"),S(n.$$.fragment),t=U(),a=P("div"),o&&o.c(),i=U(),l=P("div"),u&&u.c(),this.h()},l(f){e=N(f,"DIV",{class:!0});var c=F(e);V(n.$$.fragment,c),t=K(c),a=N(c,"DIV",{class:!0});var p=F(a);o&&o.l(p),p.forEach(h),i=K(c),l=N(c,"DIV",{class:!0});var $=F(l);u&&u.l($),$.forEach(h),c.forEach(h),this.h()},h(){I(a,"class","p-8 space-y-8 overflow-y-auto"),I(l,"class","p-8 border border-l-gray-300 overflow-y-scroll"),I(e,"class","h-full flex flex-row flex-nowrap items-stretch")},m(f,c){E(f,e,c),D(n,e,null),y(e,t),y(e,a),o&&o.m(a,null),y(e,i),y(e,l),u&&u.m(l,null),s=!0},p(f,[c]){const p={};c&16385&&(p.$$scope={dirty:c,ctx:f}),n.$set(p),f[1]!==void 0?o?(o.p(f,c),c&2&&v(o,1)):(o=je(f),o.c(),v(o,1),o.m(a,null)):o&&(j(),b(o,1,1,()=>{o=null}),H()),f[1]!==void 0?u?(u.p(f,c),c&2&&v(u,1)):(u=He(f),u.c(),v(u,1),u.m(l,null)):u&&(j(),b(u,1,1,()=>{u=null}),H())},i(f){s||(v(n.$$.fragment,f),v(o),v(u),s=!0)},o(f){b(n.$$.fragment,f),b(o),b(u),s=!1},d(f){f&&h(e),q(n),o&&o.d(),u&&u.d()}}}const ce=Je("");function Un(r,e){for(let n of r.rules)if(n.symbol==e)return n;throw new Error("missingSymbol")}function Kn(r,e,n){let t,a,i=Z,l;ue(r,oe,m=>n(0,t=m)),ue(r,ce,m=>n(5,a=m)),ue(r,$t,m=>n(8,l=m)),r.$$.on_destroy.push(()=>i());for(let m of t){const g=m.rules.map(d=>d.symbol);for(let d of s(l))g.includes(d)||m.rules.push(mt(d));for(let d of g)if(!s(l).includes(d)){const k=Un(m,d),O=m.rules.indexOf(k);m.rules.splice(O,1)}}function s(m){const g=[];for(const d of m){const k=d.structure.replace(/(\r\n|\n|\r)/gm,"");k&&g.push(...k.split(""))}return bt.uniq(g)}function o(m=null){const g=gt(m||de(5),de(5),s(l));fe(oe,t=[...t,g],t),fe(ce,a=g.id,a)}function u(){o()}let f,c;function p(){fe(oe,t=t.filter(m=>m.id!=a),t),t[0]&&fe(ce,a=t[0].id,a)}function $(m){r.$$.not_equal(t[c].name,m)&&(t[c].name=m,oe.set(t))}function _(m){r.$$.not_equal(t[c],m)&&(t[c]=m,oe.set(t))}return r.$$.update=()=>{r.$$.dirty&33&&n(4,f=t.find(m=>m.id==a)),r.$$.dirty&17&&f&&n(1,c=t.indexOf(f))},[t,c,u,p,f,a,$,_]}class Wn extends x{constructor(e){super(),ee(this,e,Kn,On,te,{})}}export{Wn as P,ce as c};
