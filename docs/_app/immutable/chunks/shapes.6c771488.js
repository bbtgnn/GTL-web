var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $n(Y){return Y&&Y.__esModule&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y}function tr(Y){if(Y.__esModule)return Y;var Lt=Y.default;if(typeof Lt=="function"){var K=function Ct(){if(this instanceof Ct){var _t=[null];_t.push.apply(_t,arguments);var R=Function.bind.apply(Lt,_t);return new R}return Lt.apply(this,arguments)};K.prototype=Lt.prototype}else K={};return Object.defineProperty(K,"__esModule",{value:!0}),Object.keys(Y).forEach(function(Ct){var _t=Object.getOwnPropertyDescriptor(Y,Ct);Object.defineProperty(K,Ct,_t.get?_t:{enumerable:!0,get:function(){return Y[Ct]}})}),K}var ji=(Y=>(Y.NW="NW",Y.SW="SW",Y.NE="NE",Y.SE="SE",Y))(ji||{});const er=Object.values(ji);var me=(Y=>(Y.Fixed="fixed",Y.Choice="choice",Y.Range="range",Y))(me||{}),bi=(Y=>(Y.Number="number",Y.Orientation="orientation",Y.Boolean="boolean",Y.String="string",Y))(bi||{}),_n=(Y=>(Y.Void="void",Y.Rectangle="rectangle",Y.Ellipse="ellipse",Y.Quarter="quarter",Y.SVG="svg",Y))(_n||{});function Ni(Y){return Y[Math.floor(Y.length*Math.random())]}function ve(Y){return{kind:bi.Number,value:{kind:me.Fixed,data:Y}}}function ir(Y){return{kind:bi.Orientation,value:{kind:me.Fixed,data:Y}}}function Zi(Y){return{kind:bi.Boolean,value:{kind:me.Fixed,data:Y}}}function nr(Y){return{kind:bi.String,value:{kind:me.Fixed,data:Y}}}const fr={scale_x:ve(1),scale_y:ve(1),rotation:ve(0)},cr={scale_x:ve(1),scale_y:ve(1),rotation:ve(0),squaring:ve(.56),negative:Zi(!1)},dr={scale_x:ve(1),scale_y:ve(1),rotation:ve(0),squaring:ve(.56),orientation:ir("NE"),negative:Zi(!1)},pr={scale_x:ve(1),scale_y:ve(1),rotation:ve(0),negative:Zi(!1),path:nr("")},gr={};function rr(Y){return{symbol:Y,shape:{kind:_n.Void,props:{}}}}function _r(Y,Lt,K){return{name:Y,id:Lt,rules:K.map(Ct=>rr(Ct)),grid:{columns:1,rows:1}}}function Gi(Y){if(Y.value.kind==me.Fixed)return Y.value.data;if(Y.value.kind==me.Range){const{min:Lt,max:K}=Y.value.data;return Lt+Math.random()*(K-Lt)}else{if(Y.value.kind==me.Choice)return Ni(Y.value.data.options);throw new Error("WrongValueKind")}}function vr(Y){if(Y.value.kind==me.Fixed)return Y.value.data;if(Y.value.kind==me.Choice)return Ni(Y.value.data.options);throw new Error("WrongValueKind")}function mr(Y){if(Y.value.kind==me.Fixed)return Y.value.data;if(Y.value.kind==me.Choice)return Ni(Y.value.data.options);throw new Error("WrongValueKind")}function br(Y){if(Y.value.kind==me.Fixed)return Y.value.data;if(Y.value.kind==me.Choice)return Ni(Y.value.data.options);throw new Error("WrongValueKind")}function sr(Y){throw new Error('Could not dynamically require "'+Y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vn={exports:{}};const ar={},ur=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"})),dn=tr(ur);var Li={exports:{}},pn;function or(){return pn||(pn=1,function(Y,Lt){(function(K,Ct){Ct(Lt)})(gn,function(K){var Ct=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],_t=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],R="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",le="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Dt={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},xe="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",ye={5:xe,"5module":xe+" export import",6:xe+" const class extends export import super"},oe=/^in(stanceof)?$/,kt=new RegExp("["+le+"]"),Ye=new RegExp("["+le+R+"]");function D(n,u){for(var x=65536,P=0;P<u.length;P+=2){if(x+=u[P],x>n)return!1;if(x+=u[P+1],x>=n)return!0}return!1}function te(n,u){return n<65?n===36:n<91?!0:n<97?n===95:n<123?!0:n<=65535?n>=170&&kt.test(String.fromCharCode(n)):u===!1?!1:D(n,_t)}function ht(n,u){return n<48?n===36:n<58?!0:n<65?!1:n<91?!0:n<97?n===95:n<123?!0:n<=65535?n>=170&&Ye.test(String.fromCharCode(n)):u===!1?!1:D(n,_t)||D(n,Ct)}var At=function(u,x){x===void 0&&(x={}),this.label=u,this.keyword=x.keyword,this.beforeExpr=!!x.beforeExpr,this.startsExpr=!!x.startsExpr,this.isLoop=!!x.isLoop,this.isAssign=!!x.isAssign,this.prefix=!!x.prefix,this.postfix=!!x.postfix,this.binop=x.binop||null,this.updateContext=null};function ft(n,u){return new At(n,{beforeExpr:!0,binop:u})}var fe={beforeExpr:!0},It={startsExpr:!0},Kt={};function Et(n,u){return u===void 0&&(u={}),u.keyword=n,Kt[n]=new At(n,u)}var A={num:new At("num",It),regexp:new At("regexp",It),string:new At("string",It),name:new At("name",It),privateId:new At("privateId",It),eof:new At("eof"),bracketL:new At("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new At("]"),braceL:new At("{",{beforeExpr:!0,startsExpr:!0}),braceR:new At("}"),parenL:new At("(",{beforeExpr:!0,startsExpr:!0}),parenR:new At(")"),comma:new At(",",fe),semi:new At(";",fe),colon:new At(":",fe),dot:new At("."),question:new At("?",fe),questionDot:new At("?."),arrow:new At("=>",fe),template:new At("template"),invalidTemplate:new At("invalidTemplate"),ellipsis:new At("...",fe),backQuote:new At("`",It),dollarBraceL:new At("${",{beforeExpr:!0,startsExpr:!0}),eq:new At("=",{beforeExpr:!0,isAssign:!0}),assign:new At("_=",{beforeExpr:!0,isAssign:!0}),incDec:new At("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new At("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ft("||",1),logicalAND:ft("&&",2),bitwiseOR:ft("|",3),bitwiseXOR:ft("^",4),bitwiseAND:ft("&",5),equality:ft("==/!=/===/!==",6),relational:ft("</>/<=/>=",7),bitShift:ft("<</>>/>>>",8),plusMin:new At("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ft("%",10),star:ft("*",10),slash:ft("/",10),starstar:new At("**",{beforeExpr:!0}),coalesce:ft("??",1),_break:Et("break"),_case:Et("case",fe),_catch:Et("catch"),_continue:Et("continue"),_debugger:Et("debugger"),_default:Et("default",fe),_do:Et("do",{isLoop:!0,beforeExpr:!0}),_else:Et("else",fe),_finally:Et("finally"),_for:Et("for",{isLoop:!0}),_function:Et("function",It),_if:Et("if"),_return:Et("return",fe),_switch:Et("switch"),_throw:Et("throw",fe),_try:Et("try"),_var:Et("var"),_const:Et("const"),_while:Et("while",{isLoop:!0}),_with:Et("with"),_new:Et("new",{beforeExpr:!0,startsExpr:!0}),_this:Et("this",It),_super:Et("super",It),_class:Et("class",It),_extends:Et("extends",fe),_export:Et("export"),_import:Et("import",It),_null:Et("null",It),_true:Et("true",It),_false:Et("false",It),_in:Et("in",{beforeExpr:!0,binop:7}),_instanceof:Et("instanceof",{beforeExpr:!0,binop:7}),_typeof:Et("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Et("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Et("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},qt=/\r\n?|\n|\u2028|\u2029/,Me=new RegExp(qt.source,"g");function Qt(n){return n===10||n===13||n===8232||n===8233}function Re(n,u,x){x===void 0&&(x=n.length);for(var P=u;P<x;P++){var O=n.charCodeAt(P);if(Qt(O))return P<x-1&&O===13&&n.charCodeAt(P+1)===10?P+2:P+1}return-1}var qe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Xt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,we=Object.prototype,gt=we.hasOwnProperty,ai=we.toString,rt=Object.hasOwn||function(n,u){return gt.call(n,u)},be=Array.isArray||function(n){return ai.call(n)==="[object Array]"};function ce(n){return new RegExp("^(?:"+n.replace(/ /g,"|")+")$")}function Pt(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}var Se=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Te=function(u,x){this.line=u,this.column=x};Te.prototype.offset=function(u){return new Te(this.line,this.column+u)};var Ue=function(u,x,P){this.start=x,this.end=P,u.sourceFile!==null&&(this.source=u.sourceFile)};function Ve(n,u){for(var x=1,P=0;;){var O=Re(n,P,u);if(O<0)return new Te(x,u-P);++x,P=O}}var Je={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},jt=!1;function $e(n){var u={};for(var x in Je)u[x]=n&&rt(n,x)?n[x]:Je[x];if(u.ecmaVersion==="latest"?u.ecmaVersion=1e8:u.ecmaVersion==null?(!jt&&typeof console=="object"&&console.warn&&(jt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),u.ecmaVersion=11):u.ecmaVersion>=2015&&(u.ecmaVersion-=2009),u.allowReserved==null&&(u.allowReserved=u.ecmaVersion<5),(!n||n.allowHashBang==null)&&(u.allowHashBang=u.ecmaVersion>=14),be(u.onToken)){var P=u.onToken;u.onToken=function(O){return P.push(O)}}return be(u.onComment)&&(u.onComment=ui(u,u.onComment)),u}function ui(n,u){return function(x,P,O,H,G,$){var nt={type:x?"Block":"Line",value:P,start:O,end:H};n.locations&&(nt.loc=new Ue(this,G,$)),n.ranges&&(nt.range=[O,H]),u.push(nt)}}var Le=1,Vt=2,Ut=4,Ft=8,xi=16,He=32,oi=64,hi=128,We=256,li=Le|Vt|We;function fi(n,u){return Vt|(n?Ut:0)|(u?Ft:0)}var ti=0,ei=1,Rt=2,ii=3,Bt=4,ci=5,lt=function(u,x,P){this.options=u=$e(u),this.sourceFile=u.sourceFile,this.keywords=ce(ye[u.ecmaVersion>=6?6:u.sourceType==="module"?"5module":5]);var O="";u.allowReserved!==!0&&(O=Dt[u.ecmaVersion>=6?6:u.ecmaVersion===5?5:3],u.sourceType==="module"&&(O+=" await")),this.reservedWords=ce(O);var H=(O?O+" ":"")+Dt.strict;this.reservedWordsStrict=ce(H),this.reservedWordsStrictBind=ce(H+" "+Dt.strictBind),this.input=String(x),this.containsEsc=!1,P?(this.pos=P,this.lineStart=this.input.lastIndexOf(`
`,P-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(qt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=A.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=u.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&u.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Le),this.regexpState=null,this.privateNameStack=[]},t={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};lt.prototype.parse=function(){var u=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(u)},t.inFunction.get=function(){return(this.currentVarScope().flags&Vt)>0},t.inGenerator.get=function(){return(this.currentVarScope().flags&Ft)>0&&!this.currentVarScope().inClassFieldInit},t.inAsync.get=function(){return(this.currentVarScope().flags&Ut)>0&&!this.currentVarScope().inClassFieldInit},t.canAwait.get=function(){for(var n=this.scopeStack.length-1;n>=0;n--){var u=this.scopeStack[n];if(u.inClassFieldInit||u.flags&We)return!1;if(u.flags&Vt)return(u.flags&Ut)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},t.allowSuper.get=function(){var n=this.currentThisScope(),u=n.flags,x=n.inClassFieldInit;return(u&oi)>0||x||this.options.allowSuperOutsideMethod},t.allowDirectSuper.get=function(){return(this.currentThisScope().flags&hi)>0},t.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},t.allowNewDotTarget.get=function(){var n=this.currentThisScope(),u=n.flags,x=n.inClassFieldInit;return(u&(Vt|We))>0||x},t.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&We)>0},lt.extend=function(){for(var u=[],x=arguments.length;x--;)u[x]=arguments[x];for(var P=this,O=0;O<u.length;O++)P=u[O](P);return P},lt.parse=function(u,x){return new this(x,u).parse()},lt.parseExpressionAt=function(u,x,P){var O=new this(P,u,x);return O.nextToken(),O.parseExpression()},lt.tokenizer=function(u,x){return new this(x,u)},Object.defineProperties(lt.prototype,t);var e=lt.prototype,i=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;e.strictDirective=function(n){if(this.options.ecmaVersion<5)return!1;for(;;){Xt.lastIndex=n,n+=Xt.exec(this.input)[0].length;var u=i.exec(this.input.slice(n));if(!u)return!1;if((u[1]||u[2])==="use strict"){Xt.lastIndex=n+u[0].length;var x=Xt.exec(this.input),P=x.index+x[0].length,O=this.input.charAt(P);return O===";"||O==="}"||qt.test(x[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(O)||O==="!"&&this.input.charAt(P+1)==="=")}n+=u[0].length,Xt.lastIndex=n,n+=Xt.exec(this.input)[0].length,this.input[n]===";"&&n++}},e.eat=function(n){return this.type===n?(this.next(),!0):!1},e.isContextual=function(n){return this.type===A.name&&this.value===n&&!this.containsEsc},e.eatContextual=function(n){return this.isContextual(n)?(this.next(),!0):!1},e.expectContextual=function(n){this.eatContextual(n)||this.unexpected()},e.canInsertSemicolon=function(){return this.type===A.eof||this.type===A.braceR||qt.test(this.input.slice(this.lastTokEnd,this.start))},e.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},e.semicolon=function(){!this.eat(A.semi)&&!this.insertSemicolon()&&this.unexpected()},e.afterTrailingComma=function(n,u){if(this.type===n)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),u||this.next(),!0},e.expect=function(n){this.eat(n)||this.unexpected()},e.unexpected=function(n){this.raise(n??this.start,"Unexpected token")};var r=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};e.checkPatternErrors=function(n,u){if(n){n.trailingComma>-1&&this.raiseRecoverable(n.trailingComma,"Comma is not permitted after the rest element");var x=u?n.parenthesizedAssign:n.parenthesizedBind;x>-1&&this.raiseRecoverable(x,u?"Assigning to rvalue":"Parenthesized pattern")}},e.checkExpressionErrors=function(n,u){if(!n)return!1;var x=n.shorthandAssign,P=n.doubleProto;if(!u)return x>=0||P>=0;x>=0&&this.raise(x,"Shorthand property assignments are valid only in destructuring patterns"),P>=0&&this.raiseRecoverable(P,"Redefinition of __proto__ property")},e.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},e.isSimpleAssignTarget=function(n){return n.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(n.expression):n.type==="Identifier"||n.type==="MemberExpression"};var s=lt.prototype;s.parseTopLevel=function(n){var u=Object.create(null);for(n.body||(n.body=[]);this.type!==A.eof;){var x=this.parseStatement(null,!0,u);n.body.push(x)}if(this.inModule)for(var P=0,O=Object.keys(this.undefinedExports);P<O.length;P+=1){var H=O[P];this.raiseRecoverable(this.undefinedExports[H].start,"Export '"+H+"' is not defined")}return this.adaptDirectivePrologue(n.body),this.next(),n.sourceType=this.options.sourceType,this.finishNode(n,"Program")};var a={kind:"loop"},h={kind:"switch"};s.isLet=function(n){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Xt.lastIndex=this.pos;var u=Xt.exec(this.input),x=this.pos+u[0].length,P=this.input.charCodeAt(x);if(P===91||P===92)return!0;if(n)return!1;if(P===123||P>55295&&P<56320)return!0;if(te(P,!0)){for(var O=x+1;ht(P=this.input.charCodeAt(O),!0);)++O;if(P===92||P>55295&&P<56320)return!0;var H=this.input.slice(x,O);if(!oe.test(H))return!0}return!1},s.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Xt.lastIndex=this.pos;var n=Xt.exec(this.input),u=this.pos+n[0].length,x;return!qt.test(this.input.slice(this.pos,u))&&this.input.slice(u,u+8)==="function"&&(u+8===this.input.length||!(ht(x=this.input.charCodeAt(u+8))||x>55295&&x<56320))},s.parseStatement=function(n,u,x){var P=this.type,O=this.startNode(),H;switch(this.isLet(n)&&(P=A._var,H="let"),P){case A._break:case A._continue:return this.parseBreakContinueStatement(O,P.keyword);case A._debugger:return this.parseDebuggerStatement(O);case A._do:return this.parseDoStatement(O);case A._for:return this.parseForStatement(O);case A._function:return n&&(this.strict||n!=="if"&&n!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(O,!1,!n);case A._class:return n&&this.unexpected(),this.parseClass(O,!0);case A._if:return this.parseIfStatement(O);case A._return:return this.parseReturnStatement(O);case A._switch:return this.parseSwitchStatement(O);case A._throw:return this.parseThrowStatement(O);case A._try:return this.parseTryStatement(O);case A._const:case A._var:return H=H||this.value,n&&H!=="var"&&this.unexpected(),this.parseVarStatement(O,H);case A._while:return this.parseWhileStatement(O);case A._with:return this.parseWithStatement(O);case A.braceL:return this.parseBlock(!0,O);case A.semi:return this.parseEmptyStatement(O);case A._export:case A._import:if(this.options.ecmaVersion>10&&P===A._import){Xt.lastIndex=this.pos;var G=Xt.exec(this.input),$=this.pos+G[0].length,nt=this.input.charCodeAt($);if(nt===40||nt===46)return this.parseExpressionStatement(O,this.parseExpression())}return this.options.allowImportExportEverywhere||(u||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),P===A._import?this.parseImport(O):this.parseExport(O,x);default:if(this.isAsyncFunction())return n&&this.unexpected(),this.next(),this.parseFunctionStatement(O,!0,!n);var vt=this.value,yt=this.parseExpression();return P===A.name&&yt.type==="Identifier"&&this.eat(A.colon)?this.parseLabeledStatement(O,vt,yt,n):this.parseExpressionStatement(O,yt)}},s.parseBreakContinueStatement=function(n,u){var x=u==="break";this.next(),this.eat(A.semi)||this.insertSemicolon()?n.label=null:this.type!==A.name?this.unexpected():(n.label=this.parseIdent(),this.semicolon());for(var P=0;P<this.labels.length;++P){var O=this.labels[P];if((n.label==null||O.name===n.label.name)&&(O.kind!=null&&(x||O.kind==="loop")||n.label&&x))break}return P===this.labels.length&&this.raise(n.start,"Unsyntactic "+u),this.finishNode(n,x?"BreakStatement":"ContinueStatement")},s.parseDebuggerStatement=function(n){return this.next(),this.semicolon(),this.finishNode(n,"DebuggerStatement")},s.parseDoStatement=function(n){return this.next(),this.labels.push(a),n.body=this.parseStatement("do"),this.labels.pop(),this.expect(A._while),n.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(A.semi):this.semicolon(),this.finishNode(n,"DoWhileStatement")},s.parseForStatement=function(n){this.next();var u=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(a),this.enterScope(0),this.expect(A.parenL),this.type===A.semi)return u>-1&&this.unexpected(u),this.parseFor(n,null);var x=this.isLet();if(this.type===A._var||this.type===A._const||x){var P=this.startNode(),O=x?"let":this.value;return this.next(),this.parseVar(P,!0,O),this.finishNode(P,"VariableDeclaration"),(this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&P.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===A._in?u>-1&&this.unexpected(u):n.await=u>-1),this.parseForIn(n,P)):(u>-1&&this.unexpected(u),this.parseFor(n,P))}var H=this.isContextual("let"),G=!1,$=new r,nt=this.parseExpression(u>-1?"await":!0,$);return this.type===A._in||(G=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===A._in?u>-1&&this.unexpected(u):n.await=u>-1),H&&G&&this.raise(nt.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(nt,!1,$),this.checkLValPattern(nt),this.parseForIn(n,nt)):(this.checkExpressionErrors($,!0),u>-1&&this.unexpected(u),this.parseFor(n,nt))},s.parseFunctionStatement=function(n,u,x){return this.next(),this.parseFunction(n,l|(x?0:f),!1,u)},s.parseIfStatement=function(n){return this.next(),n.test=this.parseParenExpression(),n.consequent=this.parseStatement("if"),n.alternate=this.eat(A._else)?this.parseStatement("if"):null,this.finishNode(n,"IfStatement")},s.parseReturnStatement=function(n){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(A.semi)||this.insertSemicolon()?n.argument=null:(n.argument=this.parseExpression(),this.semicolon()),this.finishNode(n,"ReturnStatement")},s.parseSwitchStatement=function(n){this.next(),n.discriminant=this.parseParenExpression(),n.cases=[],this.expect(A.braceL),this.labels.push(h),this.enterScope(0);for(var u,x=!1;this.type!==A.braceR;)if(this.type===A._case||this.type===A._default){var P=this.type===A._case;u&&this.finishNode(u,"SwitchCase"),n.cases.push(u=this.startNode()),u.consequent=[],this.next(),P?u.test=this.parseExpression():(x&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),x=!0,u.test=null),this.expect(A.colon)}else u||this.unexpected(),u.consequent.push(this.parseStatement(null));return this.exitScope(),u&&this.finishNode(u,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(n,"SwitchStatement")},s.parseThrowStatement=function(n){return this.next(),qt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),n.argument=this.parseExpression(),this.semicolon(),this.finishNode(n,"ThrowStatement")};var o=[];s.parseTryStatement=function(n){if(this.next(),n.block=this.parseBlock(),n.handler=null,this.type===A._catch){var u=this.startNode();if(this.next(),this.eat(A.parenL)){u.param=this.parseBindingAtom();var x=u.param.type==="Identifier";this.enterScope(x?He:0),this.checkLValPattern(u.param,x?Bt:Rt),this.expect(A.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),u.param=null,this.enterScope(0);u.body=this.parseBlock(!1),this.exitScope(),n.handler=this.finishNode(u,"CatchClause")}return n.finalizer=this.eat(A._finally)?this.parseBlock():null,!n.handler&&!n.finalizer&&this.raise(n.start,"Missing catch or finally clause"),this.finishNode(n,"TryStatement")},s.parseVarStatement=function(n,u){return this.next(),this.parseVar(n,!1,u),this.semicolon(),this.finishNode(n,"VariableDeclaration")},s.parseWhileStatement=function(n){return this.next(),n.test=this.parseParenExpression(),this.labels.push(a),n.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(n,"WhileStatement")},s.parseWithStatement=function(n){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),n.object=this.parseParenExpression(),n.body=this.parseStatement("with"),this.finishNode(n,"WithStatement")},s.parseEmptyStatement=function(n){return this.next(),this.finishNode(n,"EmptyStatement")},s.parseLabeledStatement=function(n,u,x,P){for(var O=0,H=this.labels;O<H.length;O+=1){var G=H[O];G.name===u&&this.raise(x.start,"Label '"+u+"' is already declared")}for(var $=this.type.isLoop?"loop":this.type===A._switch?"switch":null,nt=this.labels.length-1;nt>=0;nt--){var vt=this.labels[nt];if(vt.statementStart===n.start)vt.statementStart=this.start,vt.kind=$;else break}return this.labels.push({name:u,kind:$,statementStart:this.start}),n.body=this.parseStatement(P?P.indexOf("label")===-1?P+"label":P:"label"),this.labels.pop(),n.label=x,this.finishNode(n,"LabeledStatement")},s.parseExpressionStatement=function(n,u){return n.expression=u,this.semicolon(),this.finishNode(n,"ExpressionStatement")},s.parseBlock=function(n,u,x){for(n===void 0&&(n=!0),u===void 0&&(u=this.startNode()),u.body=[],this.expect(A.braceL),n&&this.enterScope(0);this.type!==A.braceR;){var P=this.parseStatement(null);u.body.push(P)}return x&&(this.strict=!1),this.next(),n&&this.exitScope(),this.finishNode(u,"BlockStatement")},s.parseFor=function(n,u){return n.init=u,this.expect(A.semi),n.test=this.type===A.semi?null:this.parseExpression(),this.expect(A.semi),n.update=this.type===A.parenR?null:this.parseExpression(),this.expect(A.parenR),n.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(n,"ForStatement")},s.parseForIn=function(n,u){var x=this.type===A._in;return this.next(),u.type==="VariableDeclaration"&&u.declarations[0].init!=null&&(!x||this.options.ecmaVersion<8||this.strict||u.kind!=="var"||u.declarations[0].id.type!=="Identifier")&&this.raise(u.start,(x?"for-in":"for-of")+" loop variable declaration may not have an initializer"),n.left=u,n.right=x?this.parseExpression():this.parseMaybeAssign(),this.expect(A.parenR),n.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(n,x?"ForInStatement":"ForOfStatement")},s.parseVar=function(n,u,x){for(n.declarations=[],n.kind=x;;){var P=this.startNode();if(this.parseVarId(P,x),this.eat(A.eq)?P.init=this.parseMaybeAssign(u):x==="const"&&!(this.type===A._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():P.id.type!=="Identifier"&&!(u&&(this.type===A._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):P.init=null,n.declarations.push(this.finishNode(P,"VariableDeclarator")),!this.eat(A.comma))break}return n},s.parseVarId=function(n,u){n.id=this.parseBindingAtom(),this.checkLValPattern(n.id,u==="var"?ei:Rt,!1)};var l=1,f=2,_=4;s.parseFunction=function(n,u,x,P,O){this.initFunction(n),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!P)&&(this.type===A.star&&u&f&&this.unexpected(),n.generator=this.eat(A.star)),this.options.ecmaVersion>=8&&(n.async=!!P),u&l&&(n.id=u&_&&this.type!==A.name?null:this.parseIdent(),n.id&&!(u&f)&&this.checkLValSimple(n.id,this.strict||n.generator||n.async?this.treatFunctionsAsVar?ei:Rt:ii));var H=this.yieldPos,G=this.awaitPos,$=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fi(n.async,n.generator)),u&l||(n.id=this.type===A.name?this.parseIdent():null),this.parseFunctionParams(n),this.parseFunctionBody(n,x,!1,O),this.yieldPos=H,this.awaitPos=G,this.awaitIdentPos=$,this.finishNode(n,u&l?"FunctionDeclaration":"FunctionExpression")},s.parseFunctionParams=function(n){this.expect(A.parenL),n.params=this.parseBindingList(A.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},s.parseClass=function(n,u){this.next();var x=this.strict;this.strict=!0,this.parseClassId(n,u),this.parseClassSuper(n);var P=this.enterClassBody(),O=this.startNode(),H=!1;for(O.body=[],this.expect(A.braceL);this.type!==A.braceR;){var G=this.parseClassElement(n.superClass!==null);G&&(O.body.push(G),G.type==="MethodDefinition"&&G.kind==="constructor"?(H&&this.raise(G.start,"Duplicate constructor in the same class"),H=!0):G.key&&G.key.type==="PrivateIdentifier"&&v(P,G)&&this.raiseRecoverable(G.key.start,"Identifier '#"+G.key.name+"' has already been declared"))}return this.strict=x,this.next(),n.body=this.finishNode(O,"ClassBody"),this.exitClassBody(),this.finishNode(n,u?"ClassDeclaration":"ClassExpression")},s.parseClassElement=function(n){if(this.eat(A.semi))return null;var u=this.options.ecmaVersion,x=this.startNode(),P="",O=!1,H=!1,G="method",$=!1;if(this.eatContextual("static")){if(u>=13&&this.eat(A.braceL))return this.parseClassStaticBlock(x),x;this.isClassElementNameStart()||this.type===A.star?$=!0:P="static"}if(x.static=$,!P&&u>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===A.star)&&!this.canInsertSemicolon()?H=!0:P="async"),!P&&(u>=9||!H)&&this.eat(A.star)&&(O=!0),!P&&!H&&!O){var nt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?G=nt:P=nt)}if(P?(x.computed=!1,x.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),x.key.name=P,this.finishNode(x.key,"Identifier")):this.parseClassElementName(x),u<13||this.type===A.parenL||G!=="method"||O||H){var vt=!x.static&&g(x,"constructor"),yt=vt&&n;vt&&G!=="method"&&this.raise(x.key.start,"Constructor can't have get/set modifier"),x.kind=vt?"constructor":G,this.parseClassMethod(x,O,H,yt)}else this.parseClassField(x);return x},s.isClassElementNameStart=function(){return this.type===A.name||this.type===A.privateId||this.type===A.num||this.type===A.string||this.type===A.bracketL||this.type.keyword},s.parseClassElementName=function(n){this.type===A.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),n.computed=!1,n.key=this.parsePrivateIdent()):this.parsePropertyName(n)},s.parseClassMethod=function(n,u,x,P){var O=n.key;n.kind==="constructor"?(u&&this.raise(O.start,"Constructor can't be a generator"),x&&this.raise(O.start,"Constructor can't be an async method")):n.static&&g(n,"prototype")&&this.raise(O.start,"Classes may not have a static property named prototype");var H=n.value=this.parseMethod(u,x,P);return n.kind==="get"&&H.params.length!==0&&this.raiseRecoverable(H.start,"getter should have no params"),n.kind==="set"&&H.params.length!==1&&this.raiseRecoverable(H.start,"setter should have exactly one param"),n.kind==="set"&&H.params[0].type==="RestElement"&&this.raiseRecoverable(H.params[0].start,"Setter cannot use rest params"),this.finishNode(n,"MethodDefinition")},s.parseClassField=function(n){if(g(n,"constructor")?this.raise(n.key.start,"Classes can't have a field named 'constructor'"):n.static&&g(n,"prototype")&&this.raise(n.key.start,"Classes can't have a static field named 'prototype'"),this.eat(A.eq)){var u=this.currentThisScope(),x=u.inClassFieldInit;u.inClassFieldInit=!0,n.value=this.parseMaybeAssign(),u.inClassFieldInit=x}else n.value=null;return this.semicolon(),this.finishNode(n,"PropertyDefinition")},s.parseClassStaticBlock=function(n){n.body=[];var u=this.labels;for(this.labels=[],this.enterScope(We|oi);this.type!==A.braceR;){var x=this.parseStatement(null);n.body.push(x)}return this.next(),this.exitScope(),this.labels=u,this.finishNode(n,"StaticBlock")},s.parseClassId=function(n,u){this.type===A.name?(n.id=this.parseIdent(),u&&this.checkLValSimple(n.id,Rt,!1)):(u===!0&&this.unexpected(),n.id=null)},s.parseClassSuper=function(n){n.superClass=this.eat(A._extends)?this.parseExprSubscripts(null,!1):null},s.enterClassBody=function(){var n={declared:Object.create(null),used:[]};return this.privateNameStack.push(n),n.declared},s.exitClassBody=function(){for(var n=this.privateNameStack.pop(),u=n.declared,x=n.used,P=this.privateNameStack.length,O=P===0?null:this.privateNameStack[P-1],H=0;H<x.length;++H){var G=x[H];rt(u,G.name)||(O?O.used.push(G):this.raiseRecoverable(G.start,"Private field '#"+G.name+"' must be declared in an enclosing class"))}};function v(n,u){var x=u.key.name,P=n[x],O="true";return u.type==="MethodDefinition"&&(u.kind==="get"||u.kind==="set")&&(O=(u.static?"s":"i")+u.kind),P==="iget"&&O==="iset"||P==="iset"&&O==="iget"||P==="sget"&&O==="sset"||P==="sset"&&O==="sget"?(n[x]="true",!1):P?!0:(n[x]=O,!1)}function g(n,u){var x=n.computed,P=n.key;return!x&&(P.type==="Identifier"&&P.name===u||P.type==="Literal"&&P.value===u)}s.parseExport=function(n,u){if(this.next(),this.eat(A.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(n.exported=this.parseModuleExportName(),this.checkExport(u,n.exported,this.lastTokStart)):n.exported=null),this.expectContextual("from"),this.type!==A.string&&this.unexpected(),n.source=this.parseExprAtom(),this.semicolon(),this.finishNode(n,"ExportAllDeclaration");if(this.eat(A._default)){this.checkExport(u,"default",this.lastTokStart);var x;if(this.type===A._function||(x=this.isAsyncFunction())){var P=this.startNode();this.next(),x&&this.next(),n.declaration=this.parseFunction(P,l|_,!1,x)}else if(this.type===A._class){var O=this.startNode();n.declaration=this.parseClass(O,"nullableID")}else n.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(n,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())n.declaration=this.parseStatement(null),n.declaration.type==="VariableDeclaration"?this.checkVariableExport(u,n.declaration.declarations):this.checkExport(u,n.declaration.id,n.declaration.id.start),n.specifiers=[],n.source=null;else{if(n.declaration=null,n.specifiers=this.parseExportSpecifiers(u),this.eatContextual("from"))this.type!==A.string&&this.unexpected(),n.source=this.parseExprAtom();else{for(var H=0,G=n.specifiers;H<G.length;H+=1){var $=G[H];this.checkUnreserved($.local),this.checkLocalExport($.local),$.local.type==="Literal"&&this.raise($.local.start,"A string literal cannot be used as an exported binding without `from`.")}n.source=null}this.semicolon()}return this.finishNode(n,"ExportNamedDeclaration")},s.checkExport=function(n,u,x){n&&(typeof u!="string"&&(u=u.type==="Identifier"?u.name:u.value),rt(n,u)&&this.raiseRecoverable(x,"Duplicate export '"+u+"'"),n[u]=!0)},s.checkPatternExport=function(n,u){var x=u.type;if(x==="Identifier")this.checkExport(n,u,u.start);else if(x==="ObjectPattern")for(var P=0,O=u.properties;P<O.length;P+=1){var H=O[P];this.checkPatternExport(n,H)}else if(x==="ArrayPattern")for(var G=0,$=u.elements;G<$.length;G+=1){var nt=$[G];nt&&this.checkPatternExport(n,nt)}else x==="Property"?this.checkPatternExport(n,u.value):x==="AssignmentPattern"?this.checkPatternExport(n,u.left):x==="RestElement"?this.checkPatternExport(n,u.argument):x==="ParenthesizedExpression"&&this.checkPatternExport(n,u.expression)},s.checkVariableExport=function(n,u){if(n)for(var x=0,P=u;x<P.length;x+=1){var O=P[x];this.checkPatternExport(n,O.id)}},s.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},s.parseExportSpecifiers=function(n){var u=[],x=!0;for(this.expect(A.braceL);!this.eat(A.braceR);){if(x)x=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;var P=this.startNode();P.local=this.parseModuleExportName(),P.exported=this.eatContextual("as")?this.parseModuleExportName():P.local,this.checkExport(n,P.exported,P.exported.start),u.push(this.finishNode(P,"ExportSpecifier"))}return u},s.parseImport=function(n){return this.next(),this.type===A.string?(n.specifiers=o,n.source=this.parseExprAtom()):(n.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),n.source=this.type===A.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(n,"ImportDeclaration")},s.parseImportSpecifiers=function(){var n=[],u=!0;if(this.type===A.name){var x=this.startNode();if(x.local=this.parseIdent(),this.checkLValSimple(x.local,Rt),n.push(this.finishNode(x,"ImportDefaultSpecifier")),!this.eat(A.comma))return n}if(this.type===A.star){var P=this.startNode();return this.next(),this.expectContextual("as"),P.local=this.parseIdent(),this.checkLValSimple(P.local,Rt),n.push(this.finishNode(P,"ImportNamespaceSpecifier")),n}for(this.expect(A.braceL);!this.eat(A.braceR);){if(u)u=!1;else if(this.expect(A.comma),this.afterTrailingComma(A.braceR))break;var O=this.startNode();O.imported=this.parseModuleExportName(),this.eatContextual("as")?O.local=this.parseIdent():(this.checkUnreserved(O.imported),O.local=O.imported),this.checkLValSimple(O.local,Rt),n.push(this.finishNode(O,"ImportSpecifier"))}return n},s.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===A.string){var n=this.parseLiteral(this.value);return Se.test(n.value)&&this.raise(n.start,"An export name cannot include a lone surrogate."),n}return this.parseIdent(!0)},s.adaptDirectivePrologue=function(n){for(var u=0;u<n.length&&this.isDirectiveCandidate(n[u]);++u)n[u].directive=n[u].expression.raw.slice(1,-1)},s.isDirectiveCandidate=function(n){return this.options.ecmaVersion>=5&&n.type==="ExpressionStatement"&&n.expression.type==="Literal"&&typeof n.expression.value=="string"&&(this.input[n.start]==='"'||this.input[n.start]==="'")};var d=lt.prototype;d.toAssignable=function(n,u,x){if(this.options.ecmaVersion>=6&&n)switch(n.type){case"Identifier":this.inAsync&&n.name==="await"&&this.raise(n.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":n.type="ObjectPattern",x&&this.checkPatternErrors(x,!0);for(var P=0,O=n.properties;P<O.length;P+=1){var H=O[P];this.toAssignable(H,u),H.type==="RestElement"&&(H.argument.type==="ArrayPattern"||H.argument.type==="ObjectPattern")&&this.raise(H.argument.start,"Unexpected token")}break;case"Property":n.kind!=="init"&&this.raise(n.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(n.value,u);break;case"ArrayExpression":n.type="ArrayPattern",x&&this.checkPatternErrors(x,!0),this.toAssignableList(n.elements,u);break;case"SpreadElement":n.type="RestElement",this.toAssignable(n.argument,u),n.argument.type==="AssignmentPattern"&&this.raise(n.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":n.operator!=="="&&this.raise(n.left.end,"Only '=' operator can be used for specifying default value."),n.type="AssignmentPattern",delete n.operator,this.toAssignable(n.left,u);break;case"ParenthesizedExpression":this.toAssignable(n.expression,u,x);break;case"ChainExpression":this.raiseRecoverable(n.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!u)break;default:this.raise(n.start,"Assigning to rvalue")}else x&&this.checkPatternErrors(x,!0);return n},d.toAssignableList=function(n,u){for(var x=n.length,P=0;P<x;P++){var O=n[P];O&&this.toAssignable(O,u)}if(x){var H=n[x-1];this.options.ecmaVersion===6&&u&&H&&H.type==="RestElement"&&H.argument.type!=="Identifier"&&this.unexpected(H.argument.start)}return n},d.parseSpread=function(n){var u=this.startNode();return this.next(),u.argument=this.parseMaybeAssign(!1,n),this.finishNode(u,"SpreadElement")},d.parseRestBinding=function(){var n=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==A.name&&this.unexpected(),n.argument=this.parseBindingAtom(),this.finishNode(n,"RestElement")},d.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case A.bracketL:var n=this.startNode();return this.next(),n.elements=this.parseBindingList(A.bracketR,!0,!0),this.finishNode(n,"ArrayPattern");case A.braceL:return this.parseObj(!0)}return this.parseIdent()},d.parseBindingList=function(n,u,x){for(var P=[],O=!0;!this.eat(n);)if(O?O=!1:this.expect(A.comma),u&&this.type===A.comma)P.push(null);else{if(x&&this.afterTrailingComma(n))break;if(this.type===A.ellipsis){var H=this.parseRestBinding();this.parseBindingListItem(H),P.push(H),this.type===A.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(n);break}else{var G=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(G),P.push(G)}}return P},d.parseBindingListItem=function(n){return n},d.parseMaybeDefault=function(n,u,x){if(x=x||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(A.eq))return x;var P=this.startNodeAt(n,u);return P.left=x,P.right=this.parseMaybeAssign(),this.finishNode(P,"AssignmentPattern")},d.checkLValSimple=function(n,u,x){u===void 0&&(u=ti);var P=u!==ti;switch(n.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(n.name)&&this.raiseRecoverable(n.start,(P?"Binding ":"Assigning to ")+n.name+" in strict mode"),P&&(u===Rt&&n.name==="let"&&this.raiseRecoverable(n.start,"let is disallowed as a lexically bound name"),x&&(rt(x,n.name)&&this.raiseRecoverable(n.start,"Argument name clash"),x[n.name]=!0),u!==ci&&this.declareName(n.name,u,n.start));break;case"ChainExpression":this.raiseRecoverable(n.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":P&&this.raiseRecoverable(n.start,"Binding member expression");break;case"ParenthesizedExpression":return P&&this.raiseRecoverable(n.start,"Binding parenthesized expression"),this.checkLValSimple(n.expression,u,x);default:this.raise(n.start,(P?"Binding":"Assigning to")+" rvalue")}},d.checkLValPattern=function(n,u,x){switch(u===void 0&&(u=ti),n.type){case"ObjectPattern":for(var P=0,O=n.properties;P<O.length;P+=1){var H=O[P];this.checkLValInnerPattern(H,u,x)}break;case"ArrayPattern":for(var G=0,$=n.elements;G<$.length;G+=1){var nt=$[G];nt&&this.checkLValInnerPattern(nt,u,x)}break;default:this.checkLValSimple(n,u,x)}},d.checkLValInnerPattern=function(n,u,x){switch(u===void 0&&(u=ti),n.type){case"Property":this.checkLValInnerPattern(n.value,u,x);break;case"AssignmentPattern":this.checkLValPattern(n.left,u,x);break;case"RestElement":this.checkLValPattern(n.argument,u,x);break;default:this.checkLValPattern(n,u,x)}};var w=function(u,x,P,O,H){this.token=u,this.isExpr=!!x,this.preserveSpace=!!P,this.override=O,this.generator=!!H},m={b_stat:new w("{",!1),b_expr:new w("{",!0),b_tmpl:new w("${",!1),p_stat:new w("(",!1),p_expr:new w("(",!0),q_tmpl:new w("`",!0,!0,function(n){return n.tryReadTemplateToken()}),f_stat:new w("function",!1),f_expr:new w("function",!0),f_expr_gen:new w("function",!0,!1,null,!0),f_gen:new w("function",!1,!1,null,!0)},k=lt.prototype;k.initialContext=function(){return[m.b_stat]},k.curContext=function(){return this.context[this.context.length-1]},k.braceIsBlock=function(n){var u=this.curContext();return u===m.f_expr||u===m.f_stat?!0:n===A.colon&&(u===m.b_stat||u===m.b_expr)?!u.isExpr:n===A._return||n===A.name&&this.exprAllowed?qt.test(this.input.slice(this.lastTokEnd,this.start)):n===A._else||n===A.semi||n===A.eof||n===A.parenR||n===A.arrow?!0:n===A.braceL?u===m.b_stat:n===A._var||n===A._const||n===A.name?!1:!this.exprAllowed},k.inGeneratorContext=function(){for(var n=this.context.length-1;n>=1;n--){var u=this.context[n];if(u.token==="function")return u.generator}return!1},k.updateContext=function(n){var u,x=this.type;x.keyword&&n===A.dot?this.exprAllowed=!1:(u=x.updateContext)?u.call(this,n):this.exprAllowed=x.beforeExpr},k.overrideContext=function(n){this.curContext()!==n&&(this.context[this.context.length-1]=n)},A.parenR.updateContext=A.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var n=this.context.pop();n===m.b_stat&&this.curContext().token==="function"&&(n=this.context.pop()),this.exprAllowed=!n.isExpr},A.braceL.updateContext=function(n){this.context.push(this.braceIsBlock(n)?m.b_stat:m.b_expr),this.exprAllowed=!0},A.dollarBraceL.updateContext=function(){this.context.push(m.b_tmpl),this.exprAllowed=!0},A.parenL.updateContext=function(n){var u=n===A._if||n===A._for||n===A._with||n===A._while;this.context.push(u?m.p_stat:m.p_expr),this.exprAllowed=!0},A.incDec.updateContext=function(){},A._function.updateContext=A._class.updateContext=function(n){n.beforeExpr&&n!==A._else&&!(n===A.semi&&this.curContext()!==m.p_stat)&&!(n===A._return&&qt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((n===A.colon||n===A.braceL)&&this.curContext()===m.b_stat)?this.context.push(m.f_expr):this.context.push(m.f_stat),this.exprAllowed=!1},A.backQuote.updateContext=function(){this.curContext()===m.q_tmpl?this.context.pop():this.context.push(m.q_tmpl),this.exprAllowed=!1},A.star.updateContext=function(n){if(n===A._function){var u=this.context.length-1;this.context[u]===m.f_expr?this.context[u]=m.f_expr_gen:this.context[u]=m.f_gen}this.exprAllowed=!0},A.name.updateContext=function(n){var u=!1;this.options.ecmaVersion>=6&&n!==A.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(u=!0),this.exprAllowed=u};var p=lt.prototype;p.checkPropClash=function(n,u,x){if(!(this.options.ecmaVersion>=9&&n.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(n.computed||n.method||n.shorthand))){var P=n.key,O;switch(P.type){case"Identifier":O=P.name;break;case"Literal":O=String(P.value);break;default:return}var H=n.kind;if(this.options.ecmaVersion>=6){O==="__proto__"&&H==="init"&&(u.proto&&(x?x.doubleProto<0&&(x.doubleProto=P.start):this.raiseRecoverable(P.start,"Redefinition of __proto__ property")),u.proto=!0);return}O="$"+O;var G=u[O];if(G){var $;H==="init"?$=this.strict&&G.init||G.get||G.set:$=G.init||G[H],$&&this.raiseRecoverable(P.start,"Redefinition of property")}else G=u[O]={init:!1,get:!1,set:!1};G[H]=!0}},p.parseExpression=function(n,u){var x=this.start,P=this.startLoc,O=this.parseMaybeAssign(n,u);if(this.type===A.comma){var H=this.startNodeAt(x,P);for(H.expressions=[O];this.eat(A.comma);)H.expressions.push(this.parseMaybeAssign(n,u));return this.finishNode(H,"SequenceExpression")}return O},p.parseMaybeAssign=function(n,u,x){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(n);this.exprAllowed=!1}var P=!1,O=-1,H=-1,G=-1;u?(O=u.parenthesizedAssign,H=u.trailingComma,G=u.doubleProto,u.parenthesizedAssign=u.trailingComma=-1):(u=new r,P=!0);var $=this.start,nt=this.startLoc;(this.type===A.parenL||this.type===A.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=n==="await");var vt=this.parseMaybeConditional(n,u);if(x&&(vt=x.call(this,vt,$,nt)),this.type.isAssign){var yt=this.startNodeAt($,nt);return yt.operator=this.value,this.type===A.eq&&(vt=this.toAssignable(vt,!1,u)),P||(u.parenthesizedAssign=u.trailingComma=u.doubleProto=-1),u.shorthandAssign>=vt.start&&(u.shorthandAssign=-1),this.type===A.eq?this.checkLValPattern(vt):this.checkLValSimple(vt),yt.left=vt,this.next(),yt.right=this.parseMaybeAssign(n),G>-1&&(u.doubleProto=G),this.finishNode(yt,"AssignmentExpression")}else P&&this.checkExpressionErrors(u,!0);return O>-1&&(u.parenthesizedAssign=O),H>-1&&(u.trailingComma=H),vt},p.parseMaybeConditional=function(n,u){var x=this.start,P=this.startLoc,O=this.parseExprOps(n,u);if(this.checkExpressionErrors(u))return O;if(this.eat(A.question)){var H=this.startNodeAt(x,P);return H.test=O,H.consequent=this.parseMaybeAssign(),this.expect(A.colon),H.alternate=this.parseMaybeAssign(n),this.finishNode(H,"ConditionalExpression")}return O},p.parseExprOps=function(n,u){var x=this.start,P=this.startLoc,O=this.parseMaybeUnary(u,!1,!1,n);return this.checkExpressionErrors(u)||O.start===x&&O.type==="ArrowFunctionExpression"?O:this.parseExprOp(O,x,P,-1,n)},p.parseExprOp=function(n,u,x,P,O){var H=this.type.binop;if(H!=null&&(!O||this.type!==A._in)&&H>P){var G=this.type===A.logicalOR||this.type===A.logicalAND,$=this.type===A.coalesce;$&&(H=A.logicalAND.binop);var nt=this.value;this.next();var vt=this.start,yt=this.startLoc,Wt=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,O),vt,yt,H,O),ke=this.buildBinary(u,x,n,Wt,nt,G||$);return(G&&this.type===A.coalesce||$&&(this.type===A.logicalOR||this.type===A.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ke,u,x,P,O)}return n},p.buildBinary=function(n,u,x,P,O,H){P.type==="PrivateIdentifier"&&this.raise(P.start,"Private identifier can only be left side of binary expression");var G=this.startNodeAt(n,u);return G.left=x,G.operator=O,G.right=P,this.finishNode(G,H?"LogicalExpression":"BinaryExpression")},p.parseMaybeUnary=function(n,u,x,P){var O=this.start,H=this.startLoc,G;if(this.isContextual("await")&&this.canAwait)G=this.parseAwait(P),u=!0;else if(this.type.prefix){var $=this.startNode(),nt=this.type===A.incDec;$.operator=this.value,$.prefix=!0,this.next(),$.argument=this.parseMaybeUnary(null,!0,nt,P),this.checkExpressionErrors(n,!0),nt?this.checkLValSimple($.argument):this.strict&&$.operator==="delete"&&$.argument.type==="Identifier"?this.raiseRecoverable($.start,"Deleting local variable in strict mode"):$.operator==="delete"&&y($.argument)?this.raiseRecoverable($.start,"Private fields can not be deleted"):u=!0,G=this.finishNode($,nt?"UpdateExpression":"UnaryExpression")}else if(!u&&this.type===A.privateId)(P||this.privateNameStack.length===0)&&this.unexpected(),G=this.parsePrivateIdent(),this.type!==A._in&&this.unexpected();else{if(G=this.parseExprSubscripts(n,P),this.checkExpressionErrors(n))return G;for(;this.type.postfix&&!this.canInsertSemicolon();){var vt=this.startNodeAt(O,H);vt.operator=this.value,vt.prefix=!1,vt.argument=G,this.checkLValSimple(G),this.next(),G=this.finishNode(vt,"UpdateExpression")}}if(!x&&this.eat(A.starstar))if(u)this.unexpected(this.lastTokStart);else return this.buildBinary(O,H,G,this.parseMaybeUnary(null,!1,!1,P),"**",!1);else return G};function y(n){return n.type==="MemberExpression"&&n.property.type==="PrivateIdentifier"||n.type==="ChainExpression"&&y(n.expression)}p.parseExprSubscripts=function(n,u){var x=this.start,P=this.startLoc,O=this.parseExprAtom(n,u);if(O.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return O;var H=this.parseSubscripts(O,x,P,!1,u);return n&&H.type==="MemberExpression"&&(n.parenthesizedAssign>=H.start&&(n.parenthesizedAssign=-1),n.parenthesizedBind>=H.start&&(n.parenthesizedBind=-1),n.trailingComma>=H.start&&(n.trailingComma=-1)),H},p.parseSubscripts=function(n,u,x,P,O){for(var H=this.options.ecmaVersion>=8&&n.type==="Identifier"&&n.name==="async"&&this.lastTokEnd===n.end&&!this.canInsertSemicolon()&&n.end-n.start===5&&this.potentialArrowAt===n.start,G=!1;;){var $=this.parseSubscript(n,u,x,P,H,G,O);if($.optional&&(G=!0),$===n||$.type==="ArrowFunctionExpression"){if(G){var nt=this.startNodeAt(u,x);nt.expression=$,$=this.finishNode(nt,"ChainExpression")}return $}n=$}},p.parseSubscript=function(n,u,x,P,O,H,G){var $=this.options.ecmaVersion>=11,nt=$&&this.eat(A.questionDot);P&&nt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var vt=this.eat(A.bracketL);if(vt||nt&&this.type!==A.parenL&&this.type!==A.backQuote||this.eat(A.dot)){var yt=this.startNodeAt(u,x);yt.object=n,vt?(yt.property=this.parseExpression(),this.expect(A.bracketR)):this.type===A.privateId&&n.type!=="Super"?yt.property=this.parsePrivateIdent():yt.property=this.parseIdent(this.options.allowReserved!=="never"),yt.computed=!!vt,$&&(yt.optional=nt),n=this.finishNode(yt,"MemberExpression")}else if(!P&&this.eat(A.parenL)){var Wt=new r,ke=this.yieldPos,Ne=this.awaitPos,Ee=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Fe=this.parseExprList(A.parenR,this.options.ecmaVersion>=8,!1,Wt);if(O&&!nt&&!this.canInsertSemicolon()&&this.eat(A.arrow))return this.checkPatternErrors(Wt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ke,this.awaitPos=Ne,this.awaitIdentPos=Ee,this.parseArrowExpression(this.startNodeAt(u,x),Fe,!0,G);this.checkExpressionErrors(Wt,!0),this.yieldPos=ke||this.yieldPos,this.awaitPos=Ne||this.awaitPos,this.awaitIdentPos=Ee||this.awaitIdentPos;var _e=this.startNodeAt(u,x);_e.callee=n,_e.arguments=Fe,$&&(_e.optional=nt),n=this.finishNode(_e,"CallExpression")}else if(this.type===A.backQuote){(nt||H)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Be=this.startNodeAt(u,x);Be.tag=n,Be.quasi=this.parseTemplate({isTagged:!0}),n=this.finishNode(Be,"TaggedTemplateExpression")}return n},p.parseExprAtom=function(n,u){this.type===A.slash&&this.readRegexp();var x,P=this.potentialArrowAt===this.start;switch(this.type){case A._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),x=this.startNode(),this.next(),this.type===A.parenL&&!this.allowDirectSuper&&this.raise(x.start,"super() call outside constructor of a subclass"),this.type!==A.dot&&this.type!==A.bracketL&&this.type!==A.parenL&&this.unexpected(),this.finishNode(x,"Super");case A._this:return x=this.startNode(),this.next(),this.finishNode(x,"ThisExpression");case A.name:var O=this.start,H=this.startLoc,G=this.containsEsc,$=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!G&&$.name==="async"&&!this.canInsertSemicolon()&&this.eat(A._function))return this.overrideContext(m.f_expr),this.parseFunction(this.startNodeAt(O,H),0,!1,!0,u);if(P&&!this.canInsertSemicolon()){if(this.eat(A.arrow))return this.parseArrowExpression(this.startNodeAt(O,H),[$],!1,u);if(this.options.ecmaVersion>=8&&$.name==="async"&&this.type===A.name&&!G&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return $=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(A.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(O,H),[$],!0,u)}return $;case A.regexp:var nt=this.value;return x=this.parseLiteral(nt.value),x.regex={pattern:nt.pattern,flags:nt.flags},x;case A.num:case A.string:return this.parseLiteral(this.value);case A._null:case A._true:case A._false:return x=this.startNode(),x.value=this.type===A._null?null:this.type===A._true,x.raw=this.type.keyword,this.next(),this.finishNode(x,"Literal");case A.parenL:var vt=this.start,yt=this.parseParenAndDistinguishExpression(P,u);return n&&(n.parenthesizedAssign<0&&!this.isSimpleAssignTarget(yt)&&(n.parenthesizedAssign=vt),n.parenthesizedBind<0&&(n.parenthesizedBind=vt)),yt;case A.bracketL:return x=this.startNode(),this.next(),x.elements=this.parseExprList(A.bracketR,!0,!0,n),this.finishNode(x,"ArrayExpression");case A.braceL:return this.overrideContext(m.b_expr),this.parseObj(!1,n);case A._function:return x=this.startNode(),this.next(),this.parseFunction(x,0);case A._class:return this.parseClass(this.startNode(),!1);case A._new:return this.parseNew();case A.backQuote:return this.parseTemplate();case A._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},p.parseExprImport=function(){var n=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var u=this.parseIdent(!0);switch(this.type){case A.parenL:return this.parseDynamicImport(n);case A.dot:return n.meta=u,this.parseImportMeta(n);default:this.unexpected()}},p.parseDynamicImport=function(n){if(this.next(),n.source=this.parseMaybeAssign(),!this.eat(A.parenR)){var u=this.start;this.eat(A.comma)&&this.eat(A.parenR)?this.raiseRecoverable(u,"Trailing comma is not allowed in import()"):this.unexpected(u)}return this.finishNode(n,"ImportExpression")},p.parseImportMeta=function(n){this.next();var u=this.containsEsc;return n.property=this.parseIdent(!0),n.property.name!=="meta"&&this.raiseRecoverable(n.property.start,"The only valid meta property for import is 'import.meta'"),u&&this.raiseRecoverable(n.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(n.start,"Cannot use 'import.meta' outside a module"),this.finishNode(n,"MetaProperty")},p.parseLiteral=function(n){var u=this.startNode();return u.value=n,u.raw=this.input.slice(this.start,this.end),u.raw.charCodeAt(u.raw.length-1)===110&&(u.bigint=u.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(u,"Literal")},p.parseParenExpression=function(){this.expect(A.parenL);var n=this.parseExpression();return this.expect(A.parenR),n},p.parseParenAndDistinguishExpression=function(n,u){var x=this.start,P=this.startLoc,O,H=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var G=this.start,$=this.startLoc,nt=[],vt=!0,yt=!1,Wt=new r,ke=this.yieldPos,Ne=this.awaitPos,Ee;for(this.yieldPos=0,this.awaitPos=0;this.type!==A.parenR;)if(vt?vt=!1:this.expect(A.comma),H&&this.afterTrailingComma(A.parenR,!0)){yt=!0;break}else if(this.type===A.ellipsis){Ee=this.start,nt.push(this.parseParenItem(this.parseRestBinding())),this.type===A.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else nt.push(this.parseMaybeAssign(!1,Wt,this.parseParenItem));var Fe=this.lastTokEnd,_e=this.lastTokEndLoc;if(this.expect(A.parenR),n&&!this.canInsertSemicolon()&&this.eat(A.arrow))return this.checkPatternErrors(Wt,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ke,this.awaitPos=Ne,this.parseParenArrowList(x,P,nt,u);(!nt.length||yt)&&this.unexpected(this.lastTokStart),Ee&&this.unexpected(Ee),this.checkExpressionErrors(Wt,!0),this.yieldPos=ke||this.yieldPos,this.awaitPos=Ne||this.awaitPos,nt.length>1?(O=this.startNodeAt(G,$),O.expressions=nt,this.finishNodeAt(O,"SequenceExpression",Fe,_e)):O=nt[0]}else O=this.parseParenExpression();if(this.options.preserveParens){var Be=this.startNodeAt(x,P);return Be.expression=O,this.finishNode(Be,"ParenthesizedExpression")}else return O},p.parseParenItem=function(n){return n},p.parseParenArrowList=function(n,u,x,P){return this.parseArrowExpression(this.startNodeAt(n,u),x,!1,P)};var c=[];p.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var n=this.startNode(),u=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(A.dot)){n.meta=u;var x=this.containsEsc;return n.property=this.parseIdent(!0),n.property.name!=="target"&&this.raiseRecoverable(n.property.start,"The only valid meta property for new is 'new.target'"),x&&this.raiseRecoverable(n.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(n.start,"'new.target' can only be used in functions and class static block"),this.finishNode(n,"MetaProperty")}var P=this.start,O=this.startLoc,H=this.type===A._import;return n.callee=this.parseSubscripts(this.parseExprAtom(),P,O,!0,!1),H&&n.callee.type==="ImportExpression"&&this.raise(P,"Cannot use new with import()"),this.eat(A.parenL)?n.arguments=this.parseExprList(A.parenR,this.options.ecmaVersion>=8,!1):n.arguments=c,this.finishNode(n,"NewExpression")},p.parseTemplateElement=function(n){var u=n.isTagged,x=this.startNode();return this.type===A.invalidTemplate?(u||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),x.value={raw:this.value,cooked:null}):x.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),x.tail=this.type===A.backQuote,this.finishNode(x,"TemplateElement")},p.parseTemplate=function(n){n===void 0&&(n={});var u=n.isTagged;u===void 0&&(u=!1);var x=this.startNode();this.next(),x.expressions=[];var P=this.parseTemplateElement({isTagged:u});for(x.quasis=[P];!P.tail;)this.type===A.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(A.dollarBraceL),x.expressions.push(this.parseExpression()),this.expect(A.braceR),x.quasis.push(P=this.parseTemplateElement({isTagged:u}));return this.next(),this.finishNode(x,"TemplateLiteral")},p.isAsyncProp=function(n){return!n.computed&&n.key.type==="Identifier"&&n.key.name==="async"&&(this.type===A.name||this.type===A.num||this.type===A.string||this.type===A.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===A.star)&&!qt.test(this.input.slice(this.lastTokEnd,this.start))},p.parseObj=function(n,u){var x=this.startNode(),P=!0,O={};for(x.properties=[],this.next();!this.eat(A.braceR);){if(P)P=!1;else if(this.expect(A.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(A.braceR))break;var H=this.parseProperty(n,u);n||this.checkPropClash(H,O,u),x.properties.push(H)}return this.finishNode(x,n?"ObjectPattern":"ObjectExpression")},p.parseProperty=function(n,u){var x=this.startNode(),P,O,H,G;if(this.options.ecmaVersion>=9&&this.eat(A.ellipsis))return n?(x.argument=this.parseIdent(!1),this.type===A.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(x,"RestElement")):(x.argument=this.parseMaybeAssign(!1,u),this.type===A.comma&&u&&u.trailingComma<0&&(u.trailingComma=this.start),this.finishNode(x,"SpreadElement"));this.options.ecmaVersion>=6&&(x.method=!1,x.shorthand=!1,(n||u)&&(H=this.start,G=this.startLoc),n||(P=this.eat(A.star)));var $=this.containsEsc;return this.parsePropertyName(x),!n&&!$&&this.options.ecmaVersion>=8&&!P&&this.isAsyncProp(x)?(O=!0,P=this.options.ecmaVersion>=9&&this.eat(A.star),this.parsePropertyName(x)):O=!1,this.parsePropertyValue(x,n,P,O,H,G,u,$),this.finishNode(x,"Property")},p.parsePropertyValue=function(n,u,x,P,O,H,G,$){if((x||P)&&this.type===A.colon&&this.unexpected(),this.eat(A.colon))n.value=u?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,G),n.kind="init";else if(this.options.ecmaVersion>=6&&this.type===A.parenL)u&&this.unexpected(),n.kind="init",n.method=!0,n.value=this.parseMethod(x,P);else if(!u&&!$&&this.options.ecmaVersion>=5&&!n.computed&&n.key.type==="Identifier"&&(n.key.name==="get"||n.key.name==="set")&&this.type!==A.comma&&this.type!==A.braceR&&this.type!==A.eq){(x||P)&&this.unexpected(),n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1);var nt=n.kind==="get"?0:1;if(n.value.params.length!==nt){var vt=n.value.start;n.kind==="get"?this.raiseRecoverable(vt,"getter should have no params"):this.raiseRecoverable(vt,"setter should have exactly one param")}else n.kind==="set"&&n.value.params[0].type==="RestElement"&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!n.computed&&n.key.type==="Identifier"?((x||P)&&this.unexpected(),this.checkUnreserved(n.key),n.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=O),n.kind="init",u?n.value=this.parseMaybeDefault(O,H,this.copyNode(n.key)):this.type===A.eq&&G?(G.shorthandAssign<0&&(G.shorthandAssign=this.start),n.value=this.parseMaybeDefault(O,H,this.copyNode(n.key))):n.value=this.copyNode(n.key),n.shorthand=!0):this.unexpected()},p.parsePropertyName=function(n){if(this.options.ecmaVersion>=6){if(this.eat(A.bracketL))return n.computed=!0,n.key=this.parseMaybeAssign(),this.expect(A.bracketR),n.key;n.computed=!1}return n.key=this.type===A.num||this.type===A.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},p.initFunction=function(n){n.id=null,this.options.ecmaVersion>=6&&(n.generator=n.expression=!1),this.options.ecmaVersion>=8&&(n.async=!1)},p.parseMethod=function(n,u,x){var P=this.startNode(),O=this.yieldPos,H=this.awaitPos,G=this.awaitIdentPos;return this.initFunction(P),this.options.ecmaVersion>=6&&(P.generator=n),this.options.ecmaVersion>=8&&(P.async=!!u),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fi(u,P.generator)|oi|(x?hi:0)),this.expect(A.parenL),P.params=this.parseBindingList(A.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(P,!1,!0,!1),this.yieldPos=O,this.awaitPos=H,this.awaitIdentPos=G,this.finishNode(P,"FunctionExpression")},p.parseArrowExpression=function(n,u,x,P){var O=this.yieldPos,H=this.awaitPos,G=this.awaitIdentPos;return this.enterScope(fi(x,!1)|xi),this.initFunction(n),this.options.ecmaVersion>=8&&(n.async=!!x),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,n.params=this.toAssignableList(u,!0),this.parseFunctionBody(n,!0,!1,P),this.yieldPos=O,this.awaitPos=H,this.awaitIdentPos=G,this.finishNode(n,"ArrowFunctionExpression")},p.parseFunctionBody=function(n,u,x,P){var O=u&&this.type!==A.braceL,H=this.strict,G=!1;if(O)n.body=this.parseMaybeAssign(P),n.expression=!0,this.checkParams(n,!1);else{var $=this.options.ecmaVersion>=7&&!this.isSimpleParamList(n.params);(!H||$)&&(G=this.strictDirective(this.end),G&&$&&this.raiseRecoverable(n.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var nt=this.labels;this.labels=[],G&&(this.strict=!0),this.checkParams(n,!H&&!G&&!u&&!x&&this.isSimpleParamList(n.params)),this.strict&&n.id&&this.checkLValSimple(n.id,ci),n.body=this.parseBlock(!1,void 0,G&&!H),n.expression=!1,this.adaptDirectivePrologue(n.body.body),this.labels=nt}this.exitScope()},p.isSimpleParamList=function(n){for(var u=0,x=n;u<x.length;u+=1){var P=x[u];if(P.type!=="Identifier")return!1}return!0},p.checkParams=function(n,u){for(var x=Object.create(null),P=0,O=n.params;P<O.length;P+=1){var H=O[P];this.checkLValInnerPattern(H,ei,u?null:x)}},p.parseExprList=function(n,u,x,P){for(var O=[],H=!0;!this.eat(n);){if(H)H=!1;else if(this.expect(A.comma),u&&this.afterTrailingComma(n))break;var G=void 0;x&&this.type===A.comma?G=null:this.type===A.ellipsis?(G=this.parseSpread(P),P&&this.type===A.comma&&P.trailingComma<0&&(P.trailingComma=this.start)):G=this.parseMaybeAssign(!1,P),O.push(G)}return O},p.checkUnreserved=function(n){var u=n.start,x=n.end,P=n.name;if(this.inGenerator&&P==="yield"&&this.raiseRecoverable(u,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&P==="await"&&this.raiseRecoverable(u,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&P==="arguments"&&this.raiseRecoverable(u,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(P==="arguments"||P==="await")&&this.raise(u,"Cannot use "+P+" in class static initialization block"),this.keywords.test(P)&&this.raise(u,"Unexpected keyword '"+P+"'"),!(this.options.ecmaVersion<6&&this.input.slice(u,x).indexOf("\\")!==-1)){var O=this.strict?this.reservedWordsStrict:this.reservedWords;O.test(P)&&(!this.inAsync&&P==="await"&&this.raiseRecoverable(u,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(u,"The keyword '"+P+"' is reserved"))}},p.parseIdent=function(n){var u=this.startNode();return this.type===A.name?u.name=this.value:this.type.keyword?(u.name=this.type.keyword,(u.name==="class"||u.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!n),this.finishNode(u,"Identifier"),n||(this.checkUnreserved(u),u.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=u.start)),u},p.parsePrivateIdent=function(){var n=this.startNode();return this.type===A.privateId?n.name=this.value:this.unexpected(),this.next(),this.finishNode(n,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(n.start,"Private field '#"+n.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(n),n},p.parseYield=function(n){this.yieldPos||(this.yieldPos=this.start);var u=this.startNode();return this.next(),this.type===A.semi||this.canInsertSemicolon()||this.type!==A.star&&!this.type.startsExpr?(u.delegate=!1,u.argument=null):(u.delegate=this.eat(A.star),u.argument=this.parseMaybeAssign(n)),this.finishNode(u,"YieldExpression")},p.parseAwait=function(n){this.awaitPos||(this.awaitPos=this.start);var u=this.startNode();return this.next(),u.argument=this.parseMaybeUnary(null,!0,!1,n),this.finishNode(u,"AwaitExpression")};var b=lt.prototype;b.raise=function(n,u){var x=Ve(this.input,n);u+=" ("+x.line+":"+x.column+")";var P=new SyntaxError(u);throw P.pos=n,P.loc=x,P.raisedAt=this.pos,P},b.raiseRecoverable=b.raise,b.curPosition=function(){if(this.options.locations)return new Te(this.curLine,this.pos-this.lineStart)};var C=lt.prototype,I=function(u){this.flags=u,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};C.enterScope=function(n){this.scopeStack.push(new I(n))},C.exitScope=function(){this.scopeStack.pop()},C.treatFunctionsAsVarInScope=function(n){return n.flags&Vt||!this.inModule&&n.flags&Le},C.declareName=function(n,u,x){var P=!1;if(u===Rt){var O=this.currentScope();P=O.lexical.indexOf(n)>-1||O.functions.indexOf(n)>-1||O.var.indexOf(n)>-1,O.lexical.push(n),this.inModule&&O.flags&Le&&delete this.undefinedExports[n]}else if(u===Bt){var H=this.currentScope();H.lexical.push(n)}else if(u===ii){var G=this.currentScope();this.treatFunctionsAsVar?P=G.lexical.indexOf(n)>-1:P=G.lexical.indexOf(n)>-1||G.var.indexOf(n)>-1,G.functions.push(n)}else for(var $=this.scopeStack.length-1;$>=0;--$){var nt=this.scopeStack[$];if(nt.lexical.indexOf(n)>-1&&!(nt.flags&He&&nt.lexical[0]===n)||!this.treatFunctionsAsVarInScope(nt)&&nt.functions.indexOf(n)>-1){P=!0;break}if(nt.var.push(n),this.inModule&&nt.flags&Le&&delete this.undefinedExports[n],nt.flags&li)break}P&&this.raiseRecoverable(x,"Identifier '"+n+"' has already been declared")},C.checkLocalExport=function(n){this.scopeStack[0].lexical.indexOf(n.name)===-1&&this.scopeStack[0].var.indexOf(n.name)===-1&&(this.undefinedExports[n.name]=n)},C.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},C.currentVarScope=function(){for(var n=this.scopeStack.length-1;;n--){var u=this.scopeStack[n];if(u.flags&li)return u}},C.currentThisScope=function(){for(var n=this.scopeStack.length-1;;n--){var u=this.scopeStack[n];if(u.flags&li&&!(u.flags&xi))return u}};var S=function(u,x,P){this.type="",this.start=x,this.end=0,u.options.locations&&(this.loc=new Ue(u,P)),u.options.directSourceFile&&(this.sourceFile=u.options.directSourceFile),u.options.ranges&&(this.range=[x,0])},E=lt.prototype;E.startNode=function(){return new S(this,this.start,this.startLoc)},E.startNodeAt=function(n,u){return new S(this,n,u)};function L(n,u,x,P){return n.type=u,n.end=x,this.options.locations&&(n.loc.end=P),this.options.ranges&&(n.range[1]=x),n}E.finishNode=function(n,u){return L.call(this,n,u,this.lastTokEnd,this.lastTokEndLoc)},E.finishNodeAt=function(n,u,x,P){return L.call(this,n,u,x,P)},E.copyNode=function(n){var u=new S(this,n.start,this.startLoc);for(var x in n)u[x]=n[x];return u};var N="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",F=N+" Extended_Pictographic",T=F,V=T+" EBase EComp EMod EPres ExtPict",B=V,q=B,U={9:N,10:F,11:T,12:V,13:B,14:q},W="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",J="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",et=J+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",it=et+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",at=it+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Z=at+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Q=Z+" Kawi Nag_Mundari Nagm",st={9:J,10:et,11:it,12:at,13:Z,14:Q},ut={};function ot(n){var u=ut[n]={binary:ce(U[n]+" "+W),nonBinary:{General_Category:ce(W),Script:ce(st[n])}};u.nonBinary.Script_Extensions=u.nonBinary.Script,u.nonBinary.gc=u.nonBinary.General_Category,u.nonBinary.sc=u.nonBinary.Script,u.nonBinary.scx=u.nonBinary.Script_Extensions}for(var pt=0,dt=[9,10,11,12,13,14];pt<dt.length;pt+=1){var xt=dt[pt];ot(xt)}var tt=lt.prototype,ct=function(u){this.parser=u,this.validFlags="gim"+(u.options.ecmaVersion>=6?"uy":"")+(u.options.ecmaVersion>=9?"s":"")+(u.options.ecmaVersion>=13?"d":""),this.unicodeProperties=ut[u.options.ecmaVersion>=14?14:u.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ct.prototype.reset=function(u,x,P){var O=P.indexOf("u")!==-1;this.start=u|0,this.source=x+"",this.flags=P,this.switchU=O&&this.parser.options.ecmaVersion>=6,this.switchN=O&&this.parser.options.ecmaVersion>=9},ct.prototype.raise=function(u){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+u)},ct.prototype.at=function(u,x){x===void 0&&(x=!1);var P=this.source,O=P.length;if(u>=O)return-1;var H=P.charCodeAt(u);if(!(x||this.switchU)||H<=55295||H>=57344||u+1>=O)return H;var G=P.charCodeAt(u+1);return G>=56320&&G<=57343?(H<<10)+G-56613888:H},ct.prototype.nextIndex=function(u,x){x===void 0&&(x=!1);var P=this.source,O=P.length;if(u>=O)return O;var H=P.charCodeAt(u),G;return!(x||this.switchU)||H<=55295||H>=57344||u+1>=O||(G=P.charCodeAt(u+1))<56320||G>57343?u+1:u+2},ct.prototype.current=function(u){return u===void 0&&(u=!1),this.at(this.pos,u)},ct.prototype.lookahead=function(u){return u===void 0&&(u=!1),this.at(this.nextIndex(this.pos,u),u)},ct.prototype.advance=function(u){u===void 0&&(u=!1),this.pos=this.nextIndex(this.pos,u)},ct.prototype.eat=function(u,x){return x===void 0&&(x=!1),this.current(x)===u?(this.advance(x),!0):!1},tt.validateRegExpFlags=function(n){for(var u=n.validFlags,x=n.flags,P=0;P<x.length;P++){var O=x.charAt(P);u.indexOf(O)===-1&&this.raise(n.start,"Invalid regular expression flag"),x.indexOf(O,P+1)>-1&&this.raise(n.start,"Duplicate regular expression flag")}},tt.validateRegExpPattern=function(n){this.regexp_pattern(n),!n.switchN&&this.options.ecmaVersion>=9&&n.groupNames.length>0&&(n.switchN=!0,this.regexp_pattern(n))},tt.regexp_pattern=function(n){n.pos=0,n.lastIntValue=0,n.lastStringValue="",n.lastAssertionIsQuantifiable=!1,n.numCapturingParens=0,n.maxBackReference=0,n.groupNames.length=0,n.backReferenceNames.length=0,this.regexp_disjunction(n),n.pos!==n.source.length&&(n.eat(41)&&n.raise("Unmatched ')'"),(n.eat(93)||n.eat(125))&&n.raise("Lone quantifier brackets")),n.maxBackReference>n.numCapturingParens&&n.raise("Invalid escape");for(var u=0,x=n.backReferenceNames;u<x.length;u+=1){var P=x[u];n.groupNames.indexOf(P)===-1&&n.raise("Invalid named capture referenced")}},tt.regexp_disjunction=function(n){for(this.regexp_alternative(n);n.eat(124);)this.regexp_alternative(n);this.regexp_eatQuantifier(n,!0)&&n.raise("Nothing to repeat"),n.eat(123)&&n.raise("Lone quantifier brackets")},tt.regexp_alternative=function(n){for(;n.pos<n.source.length&&this.regexp_eatTerm(n););},tt.regexp_eatTerm=function(n){return this.regexp_eatAssertion(n)?(n.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(n)&&n.switchU&&n.raise("Invalid quantifier"),!0):(n.switchU?this.regexp_eatAtom(n):this.regexp_eatExtendedAtom(n))?(this.regexp_eatQuantifier(n),!0):!1},tt.regexp_eatAssertion=function(n){var u=n.pos;if(n.lastAssertionIsQuantifiable=!1,n.eat(94)||n.eat(36))return!0;if(n.eat(92)){if(n.eat(66)||n.eat(98))return!0;n.pos=u}if(n.eat(40)&&n.eat(63)){var x=!1;if(this.options.ecmaVersion>=9&&(x=n.eat(60)),n.eat(61)||n.eat(33))return this.regexp_disjunction(n),n.eat(41)||n.raise("Unterminated group"),n.lastAssertionIsQuantifiable=!x,!0}return n.pos=u,!1},tt.regexp_eatQuantifier=function(n,u){return u===void 0&&(u=!1),this.regexp_eatQuantifierPrefix(n,u)?(n.eat(63),!0):!1},tt.regexp_eatQuantifierPrefix=function(n,u){return n.eat(42)||n.eat(43)||n.eat(63)||this.regexp_eatBracedQuantifier(n,u)},tt.regexp_eatBracedQuantifier=function(n,u){var x=n.pos;if(n.eat(123)){var P=0,O=-1;if(this.regexp_eatDecimalDigits(n)&&(P=n.lastIntValue,n.eat(44)&&this.regexp_eatDecimalDigits(n)&&(O=n.lastIntValue),n.eat(125)))return O!==-1&&O<P&&!u&&n.raise("numbers out of order in {} quantifier"),!0;n.switchU&&!u&&n.raise("Incomplete quantifier"),n.pos=x}return!1},tt.regexp_eatAtom=function(n){return this.regexp_eatPatternCharacters(n)||n.eat(46)||this.regexp_eatReverseSolidusAtomEscape(n)||this.regexp_eatCharacterClass(n)||this.regexp_eatUncapturingGroup(n)||this.regexp_eatCapturingGroup(n)},tt.regexp_eatReverseSolidusAtomEscape=function(n){var u=n.pos;if(n.eat(92)){if(this.regexp_eatAtomEscape(n))return!0;n.pos=u}return!1},tt.regexp_eatUncapturingGroup=function(n){var u=n.pos;if(n.eat(40)){if(n.eat(63)&&n.eat(58)){if(this.regexp_disjunction(n),n.eat(41))return!0;n.raise("Unterminated group")}n.pos=u}return!1},tt.regexp_eatCapturingGroup=function(n){if(n.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(n):n.current()===63&&n.raise("Invalid group"),this.regexp_disjunction(n),n.eat(41))return n.numCapturingParens+=1,!0;n.raise("Unterminated group")}return!1},tt.regexp_eatExtendedAtom=function(n){return n.eat(46)||this.regexp_eatReverseSolidusAtomEscape(n)||this.regexp_eatCharacterClass(n)||this.regexp_eatUncapturingGroup(n)||this.regexp_eatCapturingGroup(n)||this.regexp_eatInvalidBracedQuantifier(n)||this.regexp_eatExtendedPatternCharacter(n)},tt.regexp_eatInvalidBracedQuantifier=function(n){return this.regexp_eatBracedQuantifier(n,!0)&&n.raise("Nothing to repeat"),!1},tt.regexp_eatSyntaxCharacter=function(n){var u=n.current();return Zt(u)?(n.lastIntValue=u,n.advance(),!0):!1};function Zt(n){return n===36||n>=40&&n<=43||n===46||n===63||n>=91&&n<=94||n>=123&&n<=125}tt.regexp_eatPatternCharacters=function(n){for(var u=n.pos,x=0;(x=n.current())!==-1&&!Zt(x);)n.advance();return n.pos!==u},tt.regexp_eatExtendedPatternCharacter=function(n){var u=n.current();return u!==-1&&u!==36&&!(u>=40&&u<=43)&&u!==46&&u!==63&&u!==91&&u!==94&&u!==124?(n.advance(),!0):!1},tt.regexp_groupSpecifier=function(n){if(n.eat(63)){if(this.regexp_eatGroupName(n)){n.groupNames.indexOf(n.lastStringValue)!==-1&&n.raise("Duplicate capture group name"),n.groupNames.push(n.lastStringValue);return}n.raise("Invalid group")}},tt.regexp_eatGroupName=function(n){if(n.lastStringValue="",n.eat(60)){if(this.regexp_eatRegExpIdentifierName(n)&&n.eat(62))return!0;n.raise("Invalid capture group name")}return!1},tt.regexp_eatRegExpIdentifierName=function(n){if(n.lastStringValue="",this.regexp_eatRegExpIdentifierStart(n)){for(n.lastStringValue+=Pt(n.lastIntValue);this.regexp_eatRegExpIdentifierPart(n);)n.lastStringValue+=Pt(n.lastIntValue);return!0}return!1},tt.regexp_eatRegExpIdentifierStart=function(n){var u=n.pos,x=this.options.ecmaVersion>=11,P=n.current(x);return n.advance(x),P===92&&this.regexp_eatRegExpUnicodeEscapeSequence(n,x)&&(P=n.lastIntValue),Yt(P)?(n.lastIntValue=P,!0):(n.pos=u,!1)};function Yt(n){return te(n,!0)||n===36||n===95}tt.regexp_eatRegExpIdentifierPart=function(n){var u=n.pos,x=this.options.ecmaVersion>=11,P=n.current(x);return n.advance(x),P===92&&this.regexp_eatRegExpUnicodeEscapeSequence(n,x)&&(P=n.lastIntValue),ee(P)?(n.lastIntValue=P,!0):(n.pos=u,!1)};function ee(n){return ht(n,!0)||n===36||n===95||n===8204||n===8205}tt.regexp_eatAtomEscape=function(n){return this.regexp_eatBackReference(n)||this.regexp_eatCharacterClassEscape(n)||this.regexp_eatCharacterEscape(n)||n.switchN&&this.regexp_eatKGroupName(n)?!0:(n.switchU&&(n.current()===99&&n.raise("Invalid unicode escape"),n.raise("Invalid escape")),!1)},tt.regexp_eatBackReference=function(n){var u=n.pos;if(this.regexp_eatDecimalEscape(n)){var x=n.lastIntValue;if(n.switchU)return x>n.maxBackReference&&(n.maxBackReference=x),!0;if(x<=n.numCapturingParens)return!0;n.pos=u}return!1},tt.regexp_eatKGroupName=function(n){if(n.eat(107)){if(this.regexp_eatGroupName(n))return n.backReferenceNames.push(n.lastStringValue),!0;n.raise("Invalid named reference")}return!1},tt.regexp_eatCharacterEscape=function(n){return this.regexp_eatControlEscape(n)||this.regexp_eatCControlLetter(n)||this.regexp_eatZero(n)||this.regexp_eatHexEscapeSequence(n)||this.regexp_eatRegExpUnicodeEscapeSequence(n,!1)||!n.switchU&&this.regexp_eatLegacyOctalEscapeSequence(n)||this.regexp_eatIdentityEscape(n)},tt.regexp_eatCControlLetter=function(n){var u=n.pos;if(n.eat(99)){if(this.regexp_eatControlLetter(n))return!0;n.pos=u}return!1},tt.regexp_eatZero=function(n){return n.current()===48&&!ae(n.lookahead())?(n.lastIntValue=0,n.advance(),!0):!1},tt.regexp_eatControlEscape=function(n){var u=n.current();return u===116?(n.lastIntValue=9,n.advance(),!0):u===110?(n.lastIntValue=10,n.advance(),!0):u===118?(n.lastIntValue=11,n.advance(),!0):u===102?(n.lastIntValue=12,n.advance(),!0):u===114?(n.lastIntValue=13,n.advance(),!0):!1},tt.regexp_eatControlLetter=function(n){var u=n.current();return zt(u)?(n.lastIntValue=u%32,n.advance(),!0):!1};function zt(n){return n>=65&&n<=90||n>=97&&n<=122}tt.regexp_eatRegExpUnicodeEscapeSequence=function(n,u){u===void 0&&(u=!1);var x=n.pos,P=u||n.switchU;if(n.eat(117)){if(this.regexp_eatFixedHexDigits(n,4)){var O=n.lastIntValue;if(P&&O>=55296&&O<=56319){var H=n.pos;if(n.eat(92)&&n.eat(117)&&this.regexp_eatFixedHexDigits(n,4)){var G=n.lastIntValue;if(G>=56320&&G<=57343)return n.lastIntValue=(O-55296)*1024+(G-56320)+65536,!0}n.pos=H,n.lastIntValue=O}return!0}if(P&&n.eat(123)&&this.regexp_eatHexDigits(n)&&n.eat(125)&&Ot(n.lastIntValue))return!0;P&&n.raise("Invalid unicode escape"),n.pos=x}return!1};function Ot(n){return n>=0&&n<=1114111}tt.regexp_eatIdentityEscape=function(n){if(n.switchU)return this.regexp_eatSyntaxCharacter(n)?!0:n.eat(47)?(n.lastIntValue=47,!0):!1;var u=n.current();return u!==99&&(!n.switchN||u!==107)?(n.lastIntValue=u,n.advance(),!0):!1},tt.regexp_eatDecimalEscape=function(n){n.lastIntValue=0;var u=n.current();if(u>=49&&u<=57){do n.lastIntValue=10*n.lastIntValue+(u-48),n.advance();while((u=n.current())>=48&&u<=57);return!0}return!1},tt.regexp_eatCharacterClassEscape=function(n){var u=n.current();if(Ht(u))return n.lastIntValue=-1,n.advance(),!0;if(n.switchU&&this.options.ecmaVersion>=9&&(u===80||u===112)){if(n.lastIntValue=-1,n.advance(),n.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(n)&&n.eat(125))return!0;n.raise("Invalid property name")}return!1};function Ht(n){return n===100||n===68||n===115||n===83||n===119||n===87}tt.regexp_eatUnicodePropertyValueExpression=function(n){var u=n.pos;if(this.regexp_eatUnicodePropertyName(n)&&n.eat(61)){var x=n.lastStringValue;if(this.regexp_eatUnicodePropertyValue(n)){var P=n.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(n,x,P),!0}}if(n.pos=u,this.regexp_eatLoneUnicodePropertyNameOrValue(n)){var O=n.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(n,O),!0}return!1},tt.regexp_validateUnicodePropertyNameAndValue=function(n,u,x){rt(n.unicodeProperties.nonBinary,u)||n.raise("Invalid property name"),n.unicodeProperties.nonBinary[u].test(x)||n.raise("Invalid property value")},tt.regexp_validateUnicodePropertyNameOrValue=function(n,u){n.unicodeProperties.binary.test(u)||n.raise("Invalid property name")},tt.regexp_eatUnicodePropertyName=function(n){var u=0;for(n.lastStringValue="";se(u=n.current());)n.lastStringValue+=Pt(u),n.advance();return n.lastStringValue!==""};function se(n){return zt(n)||n===95}tt.regexp_eatUnicodePropertyValue=function(n){var u=0;for(n.lastStringValue="";Jt(u=n.current());)n.lastStringValue+=Pt(u),n.advance();return n.lastStringValue!==""};function Jt(n){return se(n)||ae(n)}tt.regexp_eatLoneUnicodePropertyNameOrValue=function(n){return this.regexp_eatUnicodePropertyValue(n)},tt.regexp_eatCharacterClass=function(n){if(n.eat(91)){if(n.eat(94),this.regexp_classRanges(n),n.eat(93))return!0;n.raise("Unterminated character class")}return!1},tt.regexp_classRanges=function(n){for(;this.regexp_eatClassAtom(n);){var u=n.lastIntValue;if(n.eat(45)&&this.regexp_eatClassAtom(n)){var x=n.lastIntValue;n.switchU&&(u===-1||x===-1)&&n.raise("Invalid character class"),u!==-1&&x!==-1&&u>x&&n.raise("Range out of order in character class")}}},tt.regexp_eatClassAtom=function(n){var u=n.pos;if(n.eat(92)){if(this.regexp_eatClassEscape(n))return!0;if(n.switchU){var x=n.current();(x===99||pe(x))&&n.raise("Invalid class escape"),n.raise("Invalid escape")}n.pos=u}var P=n.current();return P!==93?(n.lastIntValue=P,n.advance(),!0):!1},tt.regexp_eatClassEscape=function(n){var u=n.pos;if(n.eat(98))return n.lastIntValue=8,!0;if(n.switchU&&n.eat(45))return n.lastIntValue=45,!0;if(!n.switchU&&n.eat(99)){if(this.regexp_eatClassControlLetter(n))return!0;n.pos=u}return this.regexp_eatCharacterClassEscape(n)||this.regexp_eatCharacterEscape(n)},tt.regexp_eatClassControlLetter=function(n){var u=n.current();return ae(u)||u===95?(n.lastIntValue=u%32,n.advance(),!0):!1},tt.regexp_eatHexEscapeSequence=function(n){var u=n.pos;if(n.eat(120)){if(this.regexp_eatFixedHexDigits(n,2))return!0;n.switchU&&n.raise("Invalid escape"),n.pos=u}return!1},tt.regexp_eatDecimalDigits=function(n){var u=n.pos,x=0;for(n.lastIntValue=0;ae(x=n.current());)n.lastIntValue=10*n.lastIntValue+(x-48),n.advance();return n.pos!==u};function ae(n){return n>=48&&n<=57}tt.regexp_eatHexDigits=function(n){var u=n.pos,x=0;for(n.lastIntValue=0;Ce(x=n.current());)n.lastIntValue=16*n.lastIntValue+de(x),n.advance();return n.pos!==u};function Ce(n){return n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102}function de(n){return n>=65&&n<=70?10+(n-65):n>=97&&n<=102?10+(n-97):n-48}tt.regexp_eatLegacyOctalEscapeSequence=function(n){if(this.regexp_eatOctalDigit(n)){var u=n.lastIntValue;if(this.regexp_eatOctalDigit(n)){var x=n.lastIntValue;u<=3&&this.regexp_eatOctalDigit(n)?n.lastIntValue=u*64+x*8+n.lastIntValue:n.lastIntValue=u*8+x}else n.lastIntValue=u;return!0}return!1},tt.regexp_eatOctalDigit=function(n){var u=n.current();return pe(u)?(n.lastIntValue=u-48,n.advance(),!0):(n.lastIntValue=0,!1)};function pe(n){return n>=48&&n<=55}tt.regexp_eatFixedHexDigits=function(n,u){var x=n.pos;n.lastIntValue=0;for(var P=0;P<u;++P){var O=n.current();if(!Ce(O))return n.pos=x,!1;n.lastIntValue=16*n.lastIntValue+de(O),n.advance()}return!0};var ie=function(u){this.type=u.type,this.value=u.value,this.start=u.start,this.end=u.end,u.options.locations&&(this.loc=new Ue(u,u.startLoc,u.endLoc)),u.options.ranges&&(this.range=[u.start,u.end])},mt=lt.prototype;mt.next=function(n){!n&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ie(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},mt.getToken=function(){return this.next(),new ie(this)},typeof Symbol<"u"&&(mt[Symbol.iterator]=function(){var n=this;return{next:function(){var u=n.getToken();return{done:u.type===A.eof,value:u}}}}),mt.nextToken=function(){var n=this.curContext();if((!n||!n.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(A.eof);if(n.override)return n.override(this);this.readToken(this.fullCharCodeAtPos())},mt.readToken=function(n){return te(n,this.options.ecmaVersion>=6)||n===92?this.readWord():this.getTokenFromCode(n)},mt.fullCharCodeAtPos=function(){var n=this.input.charCodeAt(this.pos);if(n<=55295||n>=56320)return n;var u=this.input.charCodeAt(this.pos+1);return u<=56319||u>=57344?n:(n<<10)+u-56613888},mt.skipBlockComment=function(){var n=this.options.onComment&&this.curPosition(),u=this.pos,x=this.input.indexOf("*/",this.pos+=2);if(x===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=x+2,this.options.locations)for(var P=void 0,O=u;(P=Re(this.input,O,this.pos))>-1;)++this.curLine,O=this.lineStart=P;this.options.onComment&&this.options.onComment(!0,this.input.slice(u+2,x),u,this.pos,n,this.curPosition())},mt.skipLineComment=function(n){for(var u=this.pos,x=this.options.onComment&&this.curPosition(),P=this.input.charCodeAt(this.pos+=n);this.pos<this.input.length&&!Qt(P);)P=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(u+n,this.pos),u,this.pos,x,this.curPosition())},mt.skipSpace=function(){t:for(;this.pos<this.input.length;){var n=this.input.charCodeAt(this.pos);switch(n){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(n>8&&n<14||n>=5760&&qe.test(String.fromCharCode(n)))++this.pos;else break t}}},mt.finishToken=function(n,u){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var x=this.type;this.type=n,this.value=u,this.updateContext(x)},mt.readToken_dot=function(){var n=this.input.charCodeAt(this.pos+1);if(n>=48&&n<=57)return this.readNumber(!0);var u=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&n===46&&u===46?(this.pos+=3,this.finishToken(A.ellipsis)):(++this.pos,this.finishToken(A.dot))},mt.readToken_slash=function(){var n=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):n===61?this.finishOp(A.assign,2):this.finishOp(A.slash,1)},mt.readToken_mult_modulo_exp=function(n){var u=this.input.charCodeAt(this.pos+1),x=1,P=n===42?A.star:A.modulo;return this.options.ecmaVersion>=7&&n===42&&u===42&&(++x,P=A.starstar,u=this.input.charCodeAt(this.pos+2)),u===61?this.finishOp(A.assign,x+1):this.finishOp(P,x)},mt.readToken_pipe_amp=function(n){var u=this.input.charCodeAt(this.pos+1);if(u===n){if(this.options.ecmaVersion>=12){var x=this.input.charCodeAt(this.pos+2);if(x===61)return this.finishOp(A.assign,3)}return this.finishOp(n===124?A.logicalOR:A.logicalAND,2)}return u===61?this.finishOp(A.assign,2):this.finishOp(n===124?A.bitwiseOR:A.bitwiseAND,1)},mt.readToken_caret=function(){var n=this.input.charCodeAt(this.pos+1);return n===61?this.finishOp(A.assign,2):this.finishOp(A.bitwiseXOR,1)},mt.readToken_plus_min=function(n){var u=this.input.charCodeAt(this.pos+1);return u===n?u===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||qt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(A.incDec,2):u===61?this.finishOp(A.assign,2):this.finishOp(A.plusMin,1)},mt.readToken_lt_gt=function(n){var u=this.input.charCodeAt(this.pos+1),x=1;return u===n?(x=n===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+x)===61?this.finishOp(A.assign,x+1):this.finishOp(A.bitShift,x)):u===33&&n===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(u===61&&(x=2),this.finishOp(A.relational,x))},mt.readToken_eq_excl=function(n){var u=this.input.charCodeAt(this.pos+1);return u===61?this.finishOp(A.equality,this.input.charCodeAt(this.pos+2)===61?3:2):n===61&&u===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(A.arrow)):this.finishOp(n===61?A.eq:A.prefix,1)},mt.readToken_question=function(){var n=this.options.ecmaVersion;if(n>=11){var u=this.input.charCodeAt(this.pos+1);if(u===46){var x=this.input.charCodeAt(this.pos+2);if(x<48||x>57)return this.finishOp(A.questionDot,2)}if(u===63){if(n>=12){var P=this.input.charCodeAt(this.pos+2);if(P===61)return this.finishOp(A.assign,3)}return this.finishOp(A.coalesce,2)}}return this.finishOp(A.question,1)},mt.readToken_numberSign=function(){var n=this.options.ecmaVersion,u=35;if(n>=13&&(++this.pos,u=this.fullCharCodeAtPos(),te(u,!0)||u===92))return this.finishToken(A.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Pt(u)+"'")},mt.getTokenFromCode=function(n){switch(n){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(A.parenL);case 41:return++this.pos,this.finishToken(A.parenR);case 59:return++this.pos,this.finishToken(A.semi);case 44:return++this.pos,this.finishToken(A.comma);case 91:return++this.pos,this.finishToken(A.bracketL);case 93:return++this.pos,this.finishToken(A.bracketR);case 123:return++this.pos,this.finishToken(A.braceL);case 125:return++this.pos,this.finishToken(A.braceR);case 58:return++this.pos,this.finishToken(A.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(A.backQuote);case 48:var u=this.input.charCodeAt(this.pos+1);if(u===120||u===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(u===111||u===79)return this.readRadixNumber(8);if(u===98||u===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(n);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(n);case 124:case 38:return this.readToken_pipe_amp(n);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(n);case 60:case 62:return this.readToken_lt_gt(n);case 61:case 33:return this.readToken_eq_excl(n);case 63:return this.readToken_question();case 126:return this.finishOp(A.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Pt(n)+"'")},mt.finishOp=function(n,u){var x=this.input.slice(this.pos,this.pos+u);return this.pos+=u,this.finishToken(n,x)},mt.readRegexp=function(){for(var n,u,x=this.pos;;){this.pos>=this.input.length&&this.raise(x,"Unterminated regular expression");var P=this.input.charAt(this.pos);if(qt.test(P)&&this.raise(x,"Unterminated regular expression"),n)n=!1;else{if(P==="[")u=!0;else if(P==="]"&&u)u=!1;else if(P==="/"&&!u)break;n=P==="\\"}++this.pos}var O=this.input.slice(x,this.pos);++this.pos;var H=this.pos,G=this.readWord1();this.containsEsc&&this.unexpected(H);var $=this.regexpState||(this.regexpState=new ct(this));$.reset(x,O,G),this.validateRegExpFlags($),this.validateRegExpPattern($);var nt=null;try{nt=new RegExp(O,G)}catch{}return this.finishToken(A.regexp,{pattern:O,flags:G,value:nt})},mt.readInt=function(n,u,x){for(var P=this.options.ecmaVersion>=12&&u===void 0,O=x&&this.input.charCodeAt(this.pos)===48,H=this.pos,G=0,$=0,nt=0,vt=u??1/0;nt<vt;++nt,++this.pos){var yt=this.input.charCodeAt(this.pos),Wt=void 0;if(P&&yt===95){O&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),$===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),nt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),$=yt;continue}if(yt>=97?Wt=yt-97+10:yt>=65?Wt=yt-65+10:yt>=48&&yt<=57?Wt=yt-48:Wt=1/0,Wt>=n)break;$=yt,G=G*n+Wt}return P&&$===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===H||u!=null&&this.pos-H!==u?null:G};function Ae(n,u){return u?parseInt(n,8):parseFloat(n.replace(/_/g,""))}function ge(n){return typeof BigInt!="function"?null:BigInt(n.replace(/_/g,""))}mt.readRadixNumber=function(n){var u=this.pos;this.pos+=2;var x=this.readInt(n);return x==null&&this.raise(this.start+2,"Expected number in radix "+n),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(x=ge(this.input.slice(u,this.pos)),++this.pos):te(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(A.num,x)},mt.readNumber=function(n){var u=this.pos;!n&&this.readInt(10,void 0,!0)===null&&this.raise(u,"Invalid number");var x=this.pos-u>=2&&this.input.charCodeAt(u)===48;x&&this.strict&&this.raise(u,"Invalid number");var P=this.input.charCodeAt(this.pos);if(!x&&!n&&this.options.ecmaVersion>=11&&P===110){var O=ge(this.input.slice(u,this.pos));return++this.pos,te(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(A.num,O)}x&&/[89]/.test(this.input.slice(u,this.pos))&&(x=!1),P===46&&!x&&(++this.pos,this.readInt(10),P=this.input.charCodeAt(this.pos)),(P===69||P===101)&&!x&&(P=this.input.charCodeAt(++this.pos),(P===43||P===45)&&++this.pos,this.readInt(10)===null&&this.raise(u,"Invalid number")),te(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var H=Ae(this.input.slice(u,this.pos),x);return this.finishToken(A.num,H)},mt.readCodePoint=function(){var n=this.input.charCodeAt(this.pos),u;if(n===123){this.options.ecmaVersion<6&&this.unexpected();var x=++this.pos;u=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,u>1114111&&this.invalidStringToken(x,"Code point out of bounds")}else u=this.readHexChar(4);return u},mt.readString=function(n){for(var u="",x=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var P=this.input.charCodeAt(this.pos);if(P===n)break;P===92?(u+=this.input.slice(x,this.pos),u+=this.readEscapedChar(!1),x=this.pos):P===8232||P===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Qt(P)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return u+=this.input.slice(x,this.pos++),this.finishToken(A.string,u)};var Ge={};mt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(n){if(n===Ge)this.readInvalidTemplateToken();else throw n}this.inTemplateElement=!1},mt.invalidStringToken=function(n,u){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ge;this.raise(n,u)},mt.readTmplToken=function(){for(var n="",u=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var x=this.input.charCodeAt(this.pos);if(x===96||x===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===A.template||this.type===A.invalidTemplate)?x===36?(this.pos+=2,this.finishToken(A.dollarBraceL)):(++this.pos,this.finishToken(A.backQuote)):(n+=this.input.slice(u,this.pos),this.finishToken(A.template,n));if(x===92)n+=this.input.slice(u,this.pos),n+=this.readEscapedChar(!0),u=this.pos;else if(Qt(x)){switch(n+=this.input.slice(u,this.pos),++this.pos,x){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:n+=`
`;break;default:n+=String.fromCharCode(x);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),u=this.pos}else++this.pos}},mt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(A.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},mt.readEscapedChar=function(n){var u=this.input.charCodeAt(++this.pos);switch(++this.pos,u){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Pt(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),n){var x=this.pos-1;this.invalidStringToken(x,"Invalid escape sequence in template string")}default:if(u>=48&&u<=55){var P=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],O=parseInt(P,8);return O>255&&(P=P.slice(0,-1),O=parseInt(P,8)),this.pos+=P.length-1,u=this.input.charCodeAt(this.pos),(P!=="0"||u===56||u===57)&&(this.strict||n)&&this.invalidStringToken(this.pos-1-P.length,n?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(O)}return Qt(u)?"":String.fromCharCode(u)}},mt.readHexChar=function(n){var u=this.pos,x=this.readInt(16,n);return x===null&&this.invalidStringToken(u,"Bad character escape sequence"),x},mt.readWord1=function(){this.containsEsc=!1;for(var n="",u=!0,x=this.pos,P=this.options.ecmaVersion>=6;this.pos<this.input.length;){var O=this.fullCharCodeAtPos();if(ht(O,P))this.pos+=O<=65535?1:2;else if(O===92){this.containsEsc=!0,n+=this.input.slice(x,this.pos);var H=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var G=this.readCodePoint();(u?te:ht)(G,P)||this.invalidStringToken(H,"Invalid Unicode escape"),n+=Pt(G),x=this.pos}else break;u=!1}return n+this.input.slice(x,this.pos)},mt.readWord=function(){var n=this.readWord1(),u=A.name;return this.keywords.test(n)&&(u=Kt[n]),this.finishToken(u,n)};var di="8.8.2";lt.acorn={Parser:lt,version:di,defaultOptions:Je,Position:Te,SourceLocation:Ue,getLineInfo:Ve,Node:S,TokenType:At,tokTypes:A,keywordTypes:Kt,TokContext:w,tokContexts:m,isIdentifierChar:ht,isIdentifierStart:te,Token:ie,isNewLine:Qt,lineBreak:qt,lineBreakG:Me,nonASCIIwhitespace:qe};function yi(n,u){return lt.parse(n,u)}function wi(n,u,x){return lt.parseExpressionAt(n,u,x)}function Si(n,u){return lt.tokenizer(n,u)}K.Node=S,K.Parser=lt,K.Position=Te,K.SourceLocation=Ue,K.TokContext=w,K.Token=ie,K.TokenType=At,K.defaultOptions=Je,K.getLineInfo=Ve,K.isIdentifierChar=ht,K.isIdentifierStart=te,K.isNewLine=Qt,K.keywordTypes=Kt,K.lineBreak=qt,K.lineBreakG=Me,K.nonASCIIwhitespace=qe,K.parse=yi,K.parseExpressionAt=wi,K.tokContexts=m,K.tokTypes=A,K.tokenizer=Si,K.version=di})}(Li,Li.exports)),Li.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(Y){(function(Lt,K){Lt=Lt||dn;var Ct=Lt.window,_t=Lt.document,R=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],i=e.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,h=e.forEach||function(g,d){for(var w=0,m=this.length;w<m;w++)g.call(d,this[w],w,this)},o=function(g,d){for(var w in this)this.hasOwnProperty(w)&&g.call(d,this[w],w,this)},l=Object.assign||function(g){for(var d=1,w=arguments.length;d<w;d++){var m=arguments[d];for(var k in m)m.hasOwnProperty(k)&&(g[k]=m[k])}return g},f=function(g,d,w){if(g){var m=s(g,"length");(m&&typeof m.value=="number"?h:o).call(g,d,w=w||g)}return w};function _(g,d,w,m,k){var p={};function y(S,E){E=E||(E=s(d,S))&&(E.get?E:E.value),typeof E=="string"&&E[0]==="#"&&(E=g[E.substring(1)]||E);var L=typeof E=="function",N=E,F=k||L&&!E.base?E&&E.get?S in g:g[S]:null,T;(!k||!F)&&(L&&F&&(E.base=F),L&&m!==!1&&(T=S.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(p[T[3].toLowerCase()+T[4]]=T[2]),(!N||L||!N.get||typeof N.get!="function"||!v.isPlainObject(N))&&(N={value:N,writable:!0}),(s(g,S)||{configurable:!0}).configurable&&(N.configurable=!0,N.enumerable=w??!T),a(g,S,N))}if(d){for(var c in d)d.hasOwnProperty(c)&&!t.test(c)&&y(c);for(var c in p){var b=p[c],C=g["set"+b],I=g["get"+b]||C&&g["is"+b];I&&(m===!0||I.length===0)&&y(c,{get:I,set:C})}}return g}function v(){for(var g=0,d=arguments.length;g<d;g++){var w=arguments[g];w&&l(this,w)}return this}return _(v,{inject:function(g){if(g){var d=g.statics===!0?g:g.statics,w=g.beans,m=g.preserve;d!==g&&_(this.prototype,g,g.enumerable,w,m),_(this,d,null,w,m)}for(var k=1,p=arguments.length;k<p;k++)this.inject(arguments[k]);return this},extend:function(){for(var g=this,d,w,m=0,k,p=arguments.length;m<p&&!(d&&w);m++)k=arguments[m],d=d||k.initialize,w=w||k.prototype;return d=d||function(){g.apply(this,arguments)},w=d.prototype=w||r(this.prototype),a(w,"constructor",{value:d,writable:!0,configurable:!0}),_(d,this),arguments.length&&this.inject.apply(d,arguments),d.base=g,d}}).inject({enumerable:!1,initialize:v,set:v,inject:function(){for(var g=0,d=arguments.length;g<d;g++){var w=arguments[g];w&&_(this,w,w.enumerable,w.beans,w.preserve)}return this},extend:function(){var g=r(this);return g.inject.apply(g,arguments)},each:function(g,d){return f(this,g,d)},clone:function(){return new this.constructor(this)},statics:{set:l,each:f,create:r,define:a,describe:s,clone:function(g){return l(new g.constructor,g)},isPlainObject:function(g){var d=g!=null&&g.constructor;return d&&(d===Object||d===v||d.name==="Object")},pick:function(g,d){return g!==K?g:d},slice:function(g,d,w){return i.call(g,d,w)}}})};Y.exports=R,R.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+R.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+(i==="number"?oe.instance.number(t):i==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return R.importJSON(t,this)},exportJSON:function(t){return R.exportJSON(this,t)},toJSON:function(){return R.serialize(this)},set:function(t,e){return t&&R.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!R.exports[i]&&(R.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&typeof t=="object"&&typeof e=="object"){if(Array.isArray(t)&&Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(!R.equals(t[i],e[i]))return!1}else{var r=Object.keys(t),i=r.length;if(i!==Object.keys(e).length)return!1;for(;i--;){var s=r[i];if(!(e.hasOwnProperty(s)&&R.equals(t[s],e[s])))return!1}}return!0}return!1},read:function(t,e,i,r){if(this===R){var s=this.peek(t,e);return t.__index++,s}var a=this.prototype,h=a._readIndex,o=e||h&&t.__index||0,l=t.length,f=t[o];if(r=r||l-o,f instanceof this||i&&i.readNull&&f==null&&r<=1)return h&&(t.__index=o+1),f&&i&&i.clone?f.clone():f;if(f=R.create(a),h&&(f.__read=!0),f=f.initialize.apply(f,o>0||o+r<l?R.slice(t,o,o+r):t)||f,h){t.__index=o+f.__read;var _=f.__filtered;_&&(t.__filtered=_,f.__filtered=K),f.__read=K}return f},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,r){for(var s=[],a,h=e||0,o=r?h+r:t.length,l=h;l<o;l++)s.push(Array.isArray(a=t[l])?this.read(a,0,i):this.read(t,l,i,1));return s},readNamed:function(t,e,i,r,s){var a=this.getNamed(t,e),h=a!==K;if(h){var o=t.__filtered;if(!o){var l=this.getSource(t);o=t.__filtered=R.create(l),o.__unfiltered=l}o[e]=K}return this.read(h?[a]:t,i,r,s)},readSupported:function(t,e){var i=this.getSource(t),r=this,s=!1;return i&&Object.keys(i).forEach(function(a){if(a in e){var h=r.readNamed(t,a);h!==K&&(e[a]=h),s=!0}}),s},getSource:function(t){var e=t.__source;if(e===K){var i=t.length===1&&t[0];e=t.__source=i&&R.isPlainObject(i)?i:null}return e},getNamed:function(t,e){var i=this.getSource(t);if(i)return e?i[e]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,r){var s;function a(_){if(!(i&&_ in i)&&!(s&&_ in s)){var v=e[_];v!==K&&(t[_]=v)}}if(r){for(var h={},o=0,l,f=r.length;o<f;o++)(l=r[o])in e&&(a(l),h[l]=!0);s=h}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return R.isPlainObject(t)||Array.isArray(t)||e&&typeof t=="string"},serialize:function(t,e,i,r){e=e||{};var s=!r,a;if(s&&(e.formatter=new oe(e.precision),r={length:0,definitions:{},references:{},add:function(v,g){var d="#"+v._id,w=this.references[d];if(!w){this.length++;var m=g.call(v),k=v._class;k&&m[0]!==k&&m.unshift(k),this.definitions[d]=m,w=this.references[d]=[d]}return w}}),t&&t._serialize){a=t._serialize(e,r);var h=t._class;h&&!t._compactSerialize&&(s||!i)&&a[0]!==h&&a.unshift(h)}else if(Array.isArray(t)){a=[];for(var o=0,l=t.length;o<l;o++)a[o]=R.serialize(t[o],e,i,r)}else if(R.isPlainObject(t)){a={};for(var f=Object.keys(t),o=0,l=f.length;o<l;o++){var _=f[o];a[_]=R.serialize(t[_],e,i,r)}}else typeof t=="number"?a=e.formatter.number(t,e.precision):a=t;return s&&r.length>0?[["dictionary",r.definitions],a]:a},deserialize:function(t,e,i,r,s){var a=t,h=!i,o=h&&t&&t.length&&t[0][0]==="dictionary";if(i=i||{},Array.isArray(t)){var l=t[0],f=l==="dictionary";if(t.length==1&&/^#/.test(l))return i.dictionary[l];l=R.exports[l],a=[];for(var _=l?1:0,v=t.length;_<v;_++)a.push(R.deserialize(t[_],e,i,f,o));if(l){var g=a;e?a=e(l,g,h||s):a=new l(g)}}else if(R.isPlainObject(t)){a={},r&&(i.dictionary=a);for(var d in t)a[d]=R.deserialize(t[d],e,i)}return o?a[1]:a},exportJSON:function(t,e){var i=R.serialize(t,e);return e&&e.asString==!1?i:JSON.stringify(i)},importJSON:function(t,e){return R.deserialize(typeof t=="string"?JSON.parse(t):t,function(i,r,s){var a=s&&e&&e.constructor===i,h=a?e:R.create(i.prototype);if(r.length===1&&h instanceof A&&(a||!(h instanceof Me))){var o=r[0];R.isPlainObject(o)&&(o.insert=!1,a&&(r=r.concat([A.INSERT])))}return(a?h.set:i).apply(h,r),a&&(e=null),h})},push:function(t,e){var i=e.length;if(i<4096)t.push.apply(t,e);else{var r=t.length;t.length+=i;for(var s=0;s<i;s++)t[r+s]=e[s]}return t},splice:function(t,e,i,r){var s=e&&e.length,a=i===K;i=a?t.length:i,i>t.length&&(i=t.length);for(var h=0;h<s;h++)e[h]._index=i+h;if(a)return R.push(t,e),[];var o=[i,r];e&&R.push(o,e);for(var l=t.splice.apply(t,o),h=0,f=l.length;h<f;h++)l[h]._index=K;for(var h=i+s,f=t.length;h<f;h++)t[h]._index=h;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(e,i){return i.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var le={on:function(t,e){if(typeof t!="string")R.each(t,function(a,h){this.on(h,a)},this);else{var i=this._eventTypes,r=i&&i[t],s=this._callbacks=this._callbacks||{};s=s[t]=s[t]||[],s.indexOf(e)===-1&&(s.push(e),r&&r.install&&s.length===1&&r.install.call(this,t))}return this},off:function(t,e){if(typeof t!="string"){R.each(t,function(h,o){this.off(o,h)},this);return}var i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t],a;return s&&(!e||(a=s.indexOf(e))!==-1&&s.length===1?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):a!==-1&&s.splice(a,1)),this},once:function(t,e){return this.on(t,function i(){e.apply(this,arguments),this.off(t,i)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var r=R.slice(arguments,1),s=e&&e.target&&!e.currentTarget;i=i.slice(),s&&(e.currentTarget=this);for(var a=0,h=i.length;a<h;a++)if(i[a].apply(this,r)==!1){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,r=t?"install":"uninstall";if(e){for(var s in i)if(i[s].length>0){var a=e[s],h=a&&a[r];h&&h.call(this,s)}}},statics:{inject:function t(e){var i=e._events;if(i){var r={};R.each(i,function(s,a){var h=typeof s=="string",o=h?s:a,l=R.capitalize(o),f=o.substring(2).toLowerCase();r[f]=h?{}:s,o="_"+o,e["get"+l]=function(){return this[o]},e["set"+l]=function(_){var v=this[o];v&&this.off(f,v),_&&this.on(f,_),this[o]=_}}),e._eventTypes=r}return t.base.apply(this,arguments)}}},Dt=R.extend({_class:"PaperScope",initialize:function t(){lt=this,this.settings=new R({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var i=Rt.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:ii.nativeModes},Rt.release(i)}if(!this.agent){var r=Lt.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a=s==="darwin"?"mac":s,h=e.agent=e.browser={platform:a};a&&(h[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(o,l,f,_,v){if(!h.chrome){var g=l==="opera"?_:/^(node|trident)$/.test(l)?v:f;h.version=g,h.versionNumber=parseFloat(g),l={trident:"msie",jsdom:"node"}[l]||l,h.name=l,h[l]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.17",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var i=lt.PaperScript.execute(t,this,e);return Ft.updateFocus(),i},install:function(t){var e=this;R.each(["project","view","tool"],function(r){R.define(t,r,{configurable:!0,get:function(){return e[r]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return lt=this,this.project=new Et(t),this},createCanvas:function(t,e){return Rt.getCanvas(t,e)},activate:function(){lt=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(var i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete Dt._scopes[this._id]},statics:new function(){function t(e){return e+="Attribute",function(i,r){return i[e](r)||i[e]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),xe=R.extend(le,{initialize:function(t){this._scope=lt,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(R.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),ye={findItemBoundsCollisions:function(t,e,i){function r(h){for(var o=new Array(h.length),l=0;l<h.length;l++){var f=h[l].getBounds();o[l]=[f.left,f.top,f.right,f.bottom]}return o}var s=r(t),a=!e||e===t?s:r(e);return this.findBoundsCollisions(s,a,i||0)},findCurveBoundsCollisions:function(t,e,i,r){function s(g){for(var d=Math.min,w=Math.max,m=new Array(g.length),k=0;k<g.length;k++){var p=g[k];m[k]=[d(p[0],p[2],p[4],p[6]),d(p[1],p[3],p[5],p[7]),w(p[0],p[2],p[4],p[6]),w(p[1],p[3],p[5],p[7])]}return m}var a=s(t),h=!e||e===t?a:s(e);if(r){for(var o=this.findBoundsCollisions(a,h,i||0,!1,!0),l=this.findBoundsCollisions(a,h,i||0,!0,!0),f=[],_=0,v=o.length;_<v;_++)f[_]={hor:o[_],ver:l[_]};return f}return this.findBoundsCollisions(a,h,i||0)},findBoundsCollisions:function(t,e,i,r,s){var a=!e||t===e,h=a?t:t.concat(e),o=t.length,l=h.length;function f(et,it,at){for(var Z=0,Q=et.length;Z<Q;){var st=Q+Z>>>1;h[et[st]][it]<at?Z=st+1:Q=st}return Z-1}for(var _=r?1:0,v=_+2,g=r?0:1,d=g+2,w=new Array(l),m=0;m<l;m++)w[m]=m;w.sort(function(et,it){return h[et][_]-h[it][_]});for(var k=[],p=new Array(o),m=0;m<l;m++){var y=w[m],c=h[y],b=a?y:y-o,C=y<o,I=a||!C,S=C?[]:null;if(k.length){var E=f(k,v,c[_]-i)+1;if(k.splice(0,E),a&&s){S=S.concat(k);for(var L=0;L<k.length;L++){var N=k[L];p[N].push(b)}}else for(var F=c[d],T=c[g],L=0;L<k.length;L++){var N=k[L],V=h[N],B=N<o,q=a||N>=o;(s||(C&&q||I&&B)&&F>=V[g]-i&&T<=V[d]+i)&&(C&&q&&S.push(a?N:N-o),I&&B&&p[N].push(b))}}if(C&&(t===e&&S.push(y),p[y]=S),k.length){var U=c[v],W=f(k,v,U);k.splice(W+1,0,y)}else k.push(y)}for(var m=0;m<p.length;m++){var J=p[m];J&&J.sort(function(it,at){return it-at})}return p}},oe=R.extend({initialize:function(t){this.precision=R.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});oe.instance=new oe;var kt=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,s=Math.pow,a=Math.log2||function(v){return Math.log(v)*Math.LOG2E},h=1e-12,o=112e-18;function l(v,g,d){return v<g?g:v>d?d:v}function f(v,g,d){function w(E){var L=E*134217729,N=E-L,F=N+L,T=E-F;return[F,T]}var m=g*g-v*d,k=g*g+v*d;if(i(m)*3<k){var p=w(v),y=w(g),c=w(d),b=g*g,C=y[0]*y[0]-b+2*y[0]*y[1]+y[1]*y[1],I=v*d,S=p[0]*c[0]-I+p[0]*c[1]+p[1]*c[0]+p[1]*c[1];m=b-I+(C-S)}return m}function _(){var v=Math.max.apply(Math,arguments);return v&&(v<1e-8||v>1e8)?s(2,-Math.round(a(v))):0}return{EPSILON:h,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(v){return v>=-h&&v<=h},isMachineZero:function(v){return v>=-o&&v<=o},clamp:l,integrate:function(v,g,d,w){for(var m=t[w-2],k=e[w-2],p=(d-g)*.5,y=p+g,c=0,b=w+1>>1,C=w&1?k[c++]*v(y):0;c<b;){var I=p*m[c];C+=k[c++]*(v(y+I)+v(y-I))}return p*C},findRoot:function(v,g,d,w,m,k,p){for(var y=0;y<k;y++){var c=v(d),b=c/g(d),C=d-b;if(i(b)<p){d=C;break}c>0?(m=d,d=C<=w?(w+m)*.5:C):(w=d,d=C>=m?(w+m)*.5:C)}return l(d,w,m)},solveQuadratic:function(v,g,d,w,m,k){var p,y=1/0;if(i(v)<h){if(i(g)<h)return i(d)<h?-1:0;p=-d/g}else{g*=-.5;var c=f(v,g,d);if(c&&i(c)<o){var b=_(i(v),i(g),i(d));b&&(v*=b,g*=b,d*=b,c=f(v,g,d))}if(c>=-o){var C=c<0?0:r(c),I=g+(g<0?-C:C);I===0?(p=d/v,y=-p):(p=I/v,y=d/I)}}var S=0,E=m==null,L=m-h,N=k+h;return isFinite(p)&&(E||p>L&&p<N)&&(w[S++]=E?p:l(p,m,k)),y!==p&&isFinite(y)&&(E||y>L&&y<N)&&(w[S++]=E?y:l(y,m,k)),S},solveCubic:function(v,g,d,w,m,k,p){var y=_(i(v),i(g),i(d),i(w)),c,b,C,I,S;y&&(v*=y,g*=y,d*=y,w*=y);function E(W){c=W;var J=v*c;b=J+g,C=b*c+d,I=(J+b)*c+C,S=C*c+w}if(i(v)<h)v=g,b=d,C=w,c=1/0;else if(i(w)<h)b=g,C=d,c=0;else{E(-(g/v)/3);var L=S/v,N=s(i(L),1/3),F=L<0?-1:1,T=-I/v,V=T>0?1.324717957244746*Math.max(N,r(T)):N,B=c-F*V;if(B!==c){do E(B),B=I===0?c:c-S/I/(1+o);while(F*B>F*c);i(v)*c*c>i(w/c)&&(C=-w/c,b=(C-d)/c)}}var q=kt.solveQuadratic(v,b,C,m,k,p),U=k==null;return isFinite(c)&&(q===0||q>0&&c!==m[0]&&c!==m[1])&&(U||c>k-h&&c<p+h)&&(m[q++]=U?c:l(c,k,p)),q}}},Ye={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}else return this._id++}},D=R.extend({_class:"Point",_readIndex:!0,initialize:function(e,i){var r=typeof e,s=this.__read,a=0;if(r==="number"){var h=typeof i=="number";this._set(e,h?i:e),s&&(a=h?2:1)}else if(r==="undefined"||e===null)this._set(0,0),s&&(a=e===null?1:0);else{var o=r==="string"?e.split(/[\s,]+/)||[]:e;a=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),a=0)}return s&&(this.__read=a),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new D(this.x,this.y)},toString:function(){var t=oe.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();kt.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=D.read(arguments),e=this.getLength()*t.getLength();if(kt.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=D.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,e=D.read(t),i=e.x-this.x,r=e.y-this.y,s=i*i+r*r,a=R.read(t);return a?s:Math.sqrt(s)},normalize:function(t){t===K&&(t=1);var e=this.getLength(),i=e!==0?t/e:0,r=new D(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(t===0)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,r=Math.sin(t),s=Math.cos(t);return i=new D(i.x*s-i.y*r,i.x*r+i.y*s),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=D.read(arguments);return new D(this.x+t.x,this.y+t.y)},subtract:function(){var t=D.read(arguments);return new D(this.x-t.x,this.y-t.y)},multiply:function(){var t=D.read(arguments);return new D(this.x*t.x,this.y*t.y)},divide:function(){var t=D.read(arguments);return new D(this.x/t.x,this.y/t.y)},modulo:function(){var t=D.read(arguments);return new D(this.x%t.x,this.y%t.y)},negate:function(){return new D(-this.x,-this.y)},isInside:function(){return ft.read(arguments).contains(this)},isClose:function(){var t=arguments,e=D.read(t),i=R.read(t);return this.getDistance(e)<=i},isCollinear:function(){var t=D.read(arguments);return D.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=D.read(arguments);return D.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=kt.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=D.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=D.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=D.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new D(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=D.read(t),i=D.read(t);return new D(Math.min(e.x,i.x),Math.min(e.y,i.y))},max:function(){var t=arguments,e=D.read(t),i=D.read(t);return new D(Math.max(e.x,i.x),Math.max(e.y,i.y))},random:function(){return new D(Math.random(),Math.random())},isCollinear:function(t,e,i,r){return Math.abs(t*r-e*i)<=Math.sqrt((t*t+e*e)*(i*i+r*r))*1e-8},isOrthogonal:function(t,e,i,r){return Math.abs(t*i+e*r)<=Math.sqrt((t*t+e*e)*(i*i+r*r))*1e-8}}},R.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new D(e(this.x),e(this.y))}},{})),te=D.extend({initialize:function(e,i,r,s){this._x=e,this._y=i,this._owner=r,this._setter=s},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),ht=R.extend({_class:"Size",_readIndex:!0,initialize:function(e,i){var r=typeof e,s=this.__read,a=0;if(r==="number"){var h=typeof i=="number";this._set(e,h?i:e),s&&(a=h?2:1)}else if(r==="undefined"||e===null)this._set(0,0),s&&(a=e===null?1:0);else{var o=r==="string"?e.split(/[\s,]+/)||[]:e;a=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),a=0)}return s&&(this.__read=a),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new ht(this.width,this.height)},toString:function(){var t=oe.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=ht.read(arguments);return new ht(this.width+t.width,this.height+t.height)},subtract:function(){var t=ht.read(arguments);return new ht(this.width-t.width,this.height-t.height)},multiply:function(){var t=ht.read(arguments);return new ht(this.width*t.width,this.height*t.height)},divide:function(){var t=ht.read(arguments);return new ht(this.width/t.width,this.height/t.height)},modulo:function(){var t=ht.read(arguments);return new ht(this.width%t.width,this.height%t.height)},negate:function(){return new ht(-this.width,-this.height)},isZero:function(){var t=kt.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new ht(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new ht(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new ht(Math.random(),Math.random())}}},R.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new ht(e(this.width),e(this.height))}},{})),At=ht.extend({initialize:function(e,i,r,s){this._width=e,this._height=i,this._owner=r,this._setter=s},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),ft=R.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,i,r,s){var a=arguments,h=typeof e,o;if(h==="number"?(this._set(e,i,r,s),o=4):h==="undefined"||e===null?(this._set(0,0,0,0),o=e===null?1:0):a.length===1&&(Array.isArray(e)?(this._set.apply(this,e),o=1):e.x!==K||e.width!==K?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),o=1):e.from===K&&e.to===K&&(this._set(0,0,0,0),R.readSupported(a,this)&&(o=1))),o===K){var l=D.readNamed(a,"from"),f=R.peek(a),_=l.x,v=l.y,g,d;if(f&&f.x!==K||R.hasNamed(a,"to")){var w=D.readNamed(a,"to");g=w.x-_,d=w.y-v,g<0&&(_=w.x,g=-g),d<0&&(v=w.y,d=-d)}else{var m=ht.read(a);g=m.width,d=m.height}this._set(_,v,g,d),o=a.__index}var k=a.__filtered;return k&&(this.__filtered=k),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},clone:function(){return new ft(this.x,this.y,this.width,this.height)},equals:function(t){var e=R.isPlainValue(t)?ft.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=oe.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?D:te;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=D.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?ht:At;return new e(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=ht.read(arguments),e=this._sx,i=this._sy,r=t.width,s=t.height;e&&(this.x+=(this.width-r)*e),i&&(this.y+=(this.height-s)*i),this.width=r,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=this._sx===.5?e*2:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=this._sy===.5?e*2:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=this._sx===.5?e*2:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=this._sy===.5?e*2:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var e=t?D:te;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=D.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==K||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(ft.read(arguments)):this._containsPoint(D.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=ft.read(arguments),e=R.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=ft.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return new ft(e,i,r-e,s-i)},unite:function(){var t=ft.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new ft(e,i,r-e,s-i)},include:function(){var t=D.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return new ft(e,i,r-e,s-i)},expand:function(){var t=ht.read(arguments),e=t.width,i=t.height;return new ft(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===K?t:e)-this.height)}},R.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),r=/^[RL]/.test(i);e>=4&&(t[1]+=r?"Y":"X");var s=t[r?0:1],a=t[r?1:0],h="get"+s,o="get"+a,l="set"+s,f="set"+a,_="get"+i,v="set"+i;this[_]=function(g){var d=g?D:te;return new d(this[h](),this[o](),this,v)},this[v]=function(){var g=D.read(arguments);this[l](g.x),this[f](g.y)}},{beans:!0})),fe=ft.extend({initialize:function(e,i,r,s,a,h){this._set(e,i,r,s,!0),this._owner=a,this._setter=h},_set:function(t,e,i,r,s){return this._x=t,this._y=e,this._width=i,this._height=r,s||this._owner[this._setter](this),this}},new function(){var t=ft.prototype;return R.each(["x","y","width","height"],function(e){var i=R.capitalize(e),r="_"+e;this["get"+i]=function(){return this[r]},this["set"+i]=function(s){this[r]=s,this._dontNotify||this._owner[this._setter](this)}},R.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(e){var i=this._owner;i._changeSelection&&i._changeSelection(2,e)}}))}),It=R.extend({_class:"Matrix",initialize:function t(e,i){var r=arguments,s=r.length,a=!0;if(s>=6?this._set.apply(this,r):s===1||s===2?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):a=!1:s?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,r,s,a,h){return this._a=t,this._b=e,this._c=i,this._d=r,this._tx=s,this._ty=a,h||this._changed(),this},_serialize:function(t,e){return R.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new It(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=oe.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return i?(i.transform(null,R.pick(t,!0),e),this.isIdentity()):!1},translate:function(){var t=D.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=arguments,e=D.read(t),i=D.read(t,0,{readNull:!0});return i&&this.translate(i),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,i&&this.translate(i.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=D.read(arguments,1),i=e.x,r=e.y,s=Math.cos(t),a=Math.sin(t),h=i-i*s+r*a,o=r-i*a-r*s,l=this._a,f=this._b,_=this._c,v=this._d;return this._a=s*l+a*_,this._b=s*f+a*v,this._c=-a*l+s*_,this._d=-a*f+s*v,this._tx+=h*l+o*_,this._ty+=h*f+o*v,this._changed(),this},shear:function(){var t=arguments,e=D.read(t),i=D.read(t,0,{readNull:!0});i&&this.translate(i);var r=this._a,s=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*s,i&&this.translate(i.negate()),this._changed(),this},skew:function(){var t=arguments,e=D.read(t),i=D.read(t,0,{readNull:!0}),r=Math.PI/180,s=new D(Math.tan(e.x*r),Math.tan(e.y*r));return this.shear(s,i)},append:function(t,e){if(t){var i=this._a,r=this._b,s=this._c,a=this._d,h=t._a,o=t._c,l=t._b,f=t._d,_=t._tx,v=t._ty;this._a=h*i+l*s,this._c=o*i+f*s,this._b=h*r+l*a,this._d=o*r+f*a,this._tx+=_*i+v*s,this._ty+=_*r+v*a,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,r=this._b,s=this._c,a=this._d,h=this._tx,o=this._ty,l=t._a,f=t._c,_=t._b,v=t._d,g=t._tx,d=t._ty;this._a=l*i+f*r,this._c=l*s+f*a,this._b=_*i+v*r,this._d=_*s+v*a,this._tx=l*h+f*o+g,this._ty=_*h+v*o+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,r=this._d,s=this._tx,a=this._ty,h=t*r-e*i,o=null;return h&&!isNaN(h)&&isFinite(s)&&isFinite(a)&&(this._a=r/h,this._b=-e/h,this._c=-i/h,this._d=t/h,this._tx=(i*a-r*s)/h,this._ty=(e*s-t*a)/h,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new It(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(D.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var r=t.x,s=t.y;return e||(e=new D),e._set(r*this._a+s*this._c+this._tx,r*this._b+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var r=0,s=2*i;r<s;r+=2){var a=t[r],h=t[r+1];e[r]=a*this._a+h*this._c+this._tx,e[r+1]=a*this._b+h*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,r=e+t.width,s=i+t.height,a=[e,i,r,i,r,s,e,s];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,i){for(var r=this._transformCorners(t),s=r.slice(0,2),a=s.slice(),h=2;h<8;h++){var o=r[h],l=h&1;o<s[l]?s[l]=o:o>a[l]&&(a[l]=o)}return e||(e=new ft),e._set(s[0],s[1],a[0]-s[0],a[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(D.read(arguments))},_inverseTransform:function(t,e,i){var r=this._a,s=this._b,a=this._c,h=this._d,o=this._tx,l=this._ty,f=r*h-s*a,_=null;if(f&&!isNaN(f)&&isFinite(o)&&isFinite(l)){var v=t.x-this._tx,g=t.y-this._ty;e||(e=new D),_=e._set((v*h-g*a)/f,(g*r-v*s)/f,i)}return _},decompose:function(){var t=this._a,e=this._b,i=this._c,r=this._d,s=t*r-e*i,a=Math.sqrt,h=Math.atan2,o=180/Math.PI,l,f,_;if(t!==0||e!==0){var v=a(t*t+e*e);l=Math.acos(t/v)*(e>0?1:-1),f=[v,s/v],_=[h(t*i+e*r,v*v),0]}else if(i!==0||r!==0){var g=a(i*i+r*r);l=Math.asin(i/g)*(r>0?1:-1),f=[s/g,g],_=[0,h(t*i+e*r,g*g)]}else l=0,_=f=[0,0];return{translation:this.getTranslation(),rotation:l*o,scaling:new D(f),skewing:new D(_[0]*o,_[1]*o)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new D(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},R.each(["a","b","c","d","tx","ty"],function(t){var e=R.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(r){this[i]=r,this._changed()}},{})),Kt=R.extend({_class:"Line",initialize:function(e,i,r,s,a){var h=!1;arguments.length>=4?(this._px=e,this._py=i,this._vx=r,this._vy=s,h=a):(this._px=e.x,this._py=e.y,this._vx=i.x,this._vy=i.y,h=r),h||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new D(this._px,this._py)},getVector:function(){return new D(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return Kt.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return Kt.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return Kt.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return D.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return D.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,r,s,a,h,o,l,f){l||(i-=t,r-=e,h-=s,o-=a);var _=i*o-r*h;if(!kt.isMachineZero(_)){var v=t-s,g=e-a,d=(h*g-o*v)/_,w=(i*g-r*v)/_,m=1e-12,k=-m,p=1+m;if(f||k<d&&d<p&&k<w&&w<p)return f||(d=d<=0?0:d>=1?1:d),new D(t+d*i,e+d*r)}},getSide:function(t,e,i,r,s,a,h,o){h||(i-=t,r-=e);var l=s-t,f=a-e,_=l*r-f*i;return!o&&kt.isMachineZero(_)&&(_=(l*i+l*i)/(i*i+r*r),_>=0&&_<=1&&(_=0)),_<0?-1:_>0?1:0},getSignedDistance:function(t,e,i,r,s,a,h){return h||(i-=t,r-=e),i===0?r>0?s-t:t-s:r===0?i<0?a-e:e-a:((s-t)*r-(a-e)*i)/(r>i?r*Math.sqrt(1+i*i/(r*r)):i*Math.sqrt(1+r*r/(i*i)))},getDistance:function(t,e,i,r,s,a,h){return Math.abs(Kt.getSignedDistance(t,e,i,r,s,a,h))}}}),Et=xe.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){xe.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Le(null,null,this),this._view=Ft.create(this,e||Rt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return R.serialize(this._children,t,!0,e)},_changed:function(t,e){if(t&1){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var r=this._changes;if(r&&e){var s=this._changesById,a=e._id,h=s[a];h?h.flags|=t:r.push(s[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Me({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:qe,match:function(i){var r=i._definition,s=r._id;return e[s]||(e[s]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var r=t[i],s=r._selection;s&1&&r.isInserted()?e.push(r):s||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(K,t)},insertLayer:function(t,e){if(e instanceof Me){e._remove(!1,!0),R.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(K,new Me(A.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return A._getItems(this,t)},getItem:function(t){return A._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return R.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){t==="mouseup"&&(e.mousedrag=null);var i=e[t];if(i){for(var r in i){var s=i[r];for(var a in e){var h=e[a];h&&h!=i&&delete h[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,s=new R({offset:new D(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new It],updateMatrix:!0}),a=0,h=r.length;a<h;a++)r[a].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var o=this._selectionItems,l=this._scope.settings.handleSize,f=this._updateVersion;for(var _ in o)o[_]._drawSelection(t,e,l,o,f);t.restore()}}}),A=R.extend(le,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=R.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new It,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return R.each(t,function(e){this._events[e]={install:function(i){this.getView()._countItemEvent(i,1)},uninstall:function(i){this.getView()._countItemEvent(i,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&R.isPlainObject(t),r=i&&t.internal===!0,s=this._matrix=new It,a=i&&t.project||lt.project,h=lt.settings;return this._id=r?null:Ye.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,e&&s.translate(e),s._owner=this,this._style=new Le(a._currentStyle,this,a),r||i&&t.insert==!1||!h.insertItems&&!(i&&t.insert==!0)?this._setProject(a):(i&&t.parent||a)._insertItem(K,this,!0),i&&t!==A.NO_INSERT&&t!==A.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var i={},r=this;function s(a){for(var h in a){var o=r[h];R.equals(o,h==="leading"?a.fontSize*1.2:a[h])||(i[h]=R.serialize(o,t,h!=="data",e))}}return s(this._serializeFields),this instanceof qt||s(this._style._defaults),[this._class,i]},_changed:function(t){var e=this._symbol,i=this._parent||e,r=this._project;t&8&&(this._bounds=this._position=this._decomposed=K),t&16&&(this._globalMatrix=K),i&&t&72&&A._clearBoundsCache(i),t&2&&A._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||K,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},R.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=R.capitalize(t),i="_"+t,r={locked:256,visible:265};this["get"+e]=function(){return this[i]},this["set"+e]=function(s){s!=this[i]&&(this[i]=s,this._changed(r[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,r=e.length;i<r;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(this._selection&1);if(t&&e){for(var i=0,r=t.length;i<r;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,r=e.length;i<r;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?D:te,i=this._position||(this._position=this._getPositionFromBounds());return new e(i.x,i.y,this,"setPosition")},setPosition:function(){this.translate(D.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new te(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=D.read(arguments,0,{clone:!0,readNull:!0}),this._position=K}},R.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(i){return this.getBounds(i,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof It,r=R.set({},i?e:t,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var s=this._getCachedBounds(i&&t,r).rect;return arguments.length?s:new fe(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=ft.read(arguments),e=this.getBounds(),i=this._matrix,r=new It,s=t.getCenter();r.translate(s),(t.width!=e.width||t.height!=e.height)&&(i.isInvertible()||(i.set(i._backup||new It().translate(i.getTranslation())),e=this.getBounds()),r.scale(e.width!==0?t.width/e.width:0,e.height!==0?t.height/e.height:0)),s=e.getCenter(),r.translate(-s.x,-s.y),this.transform(r)},_getBounds:function(t,e){var i=this._children;return!i||!i.length?new ft:(A._updateBoundsCache(this,e.cacheItem),A._getBounds(i,t,e))},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var r=e.internal&&!i,s=e.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),h=s&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,r),o=this._bounds;if(A._updateBoundsCache(this._parent||this._symbol,s),h&&o&&h in o){var l=o[h];return{rect:l.rect.clone(),nonscaling:l.nonscaling}}var f=this._getBounds(t||a,e),_=f.rect||f,v=this._style,g=f.nonscaling||v.hasStroke()&&!v.getStrokeScaling();if(h){o||(this._bounds=o={});var l=o[h]={rect:_.clone(),nonscaling:g,internal:r}}return{rect:_,nonscaling:g}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=i?i.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[i]||(r.list.push(e),r.ids[i]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=K;for(var i=0,r=e.list,s=r.length;i<s;i++){var a=r[i];a!==t&&(a._bounds=a._position=K,a._boundsCache&&A._clearBoundsCache(a))}}},_getBounds:function(t,e,i){var r=1/0,s=-r,a=r,h=s,o=!1;i=i||{};for(var l=0,f=t.length;l<f;l++){var _=t[l];if(_._visible&&!_.isEmpty(!0)){var v=_._getCachedBounds(e&&e.appended(_._matrix),i,!0),g=v.rect;r=Math.min(g.x,r),a=Math.min(g.y,a),s=Math.max(g.x+g.width,s),h=Math.max(g.y+g.height,h),v.nonscaling&&(o=!0)}}return{rect:isFinite(r)?new ft(r,a,s-r,h-a):new ft,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(e!=null&&t!=null){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new te(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=D.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),r=this._decomposed,s=new It,a=kt.isZero;if(a(t.x)||a(t.y))s.translate(r.translation),i&&s.rotate(i),s.scale(e.x,e.y),this._matrix.set(s);else{var h=this.getPosition(!0);s.translate(h),i&&s.rotate(i),s.scale(e.x/t.x,e.y/t.y),i&&s.rotate(-i),s.translate(h.negate()),this.transform(s)}r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var i=this._parent,r=[];i;){if(!i._globalMatrix){e=null;for(var s=0,a=r.length;s<a;s++)r[s]._globalMatrix=null;break}r.push(i),i=i._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0))}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,r=0,s=i&&i.length;r<s;r++)i[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,r=0,s=i&&i.length;r<s;r++)i[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Me)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return R.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(A.NO_INSERT),i=this._children,r=R.pick(t?t.insert:K,t===K||t===!0),s=R.pick(t?t.deep:K,!0);i&&e.copyAttributes(this),(!i||s)&&e.copyContent(this),i||e.copyAttributes(this),r&&e.insertAbove(this);var a=this._name,h=this._parent;if(a&&h){for(var i=h._children,o=a,l=1;i[a];)a=o+" "+l++;a!==o&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,i=0,r=e&&e.length;i<r;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,s=i.length;r<s;r++){var a=i[r];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var h=t._data,o=t._name;this._data=h?R.clone(h):null,o&&this.setName(o)},rasterize:function(t,e){var i,r,s;R.isPlainObject(t)?(i=t.resolution,r=t.insert,s=t.raster):(i=t,r=e),s||(s=new Re(A.NO_INSERT));var a=this.getStrokeBounds(),h=(i||this.getView().getResolution())/72,o=a.getTopLeft().floor(),l=a.getBottomRight().ceil(),f=new ht(l.subtract(o)),_=f.multiply(h);if(s.setSize(_,!0),!_.isZero()){var v=s.getContext(!0),g=new It().scale(h).translate(o.negate());v.save(),g.applyToContext(v),this.draw(v,new R({matrices:[g]})),v.restore()}return s._matrix.set(new It().translate(o.add(f.divide(2))).scale(1/h)),(r===K||r)&&s.insertAbove(this),s},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(D.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return ft.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Pt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof A?this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0:!1}},new function(){function t(){var r=arguments;return this._hitTest(D.read(r),we.getOptions(r))}function e(){var r=arguments,s=D.read(r),a=we.getOptions(r),h=[];return this._hitTest(s,new R({all:h},a)),h}function i(r,s,a,h){var o=this._children;if(o)for(var l=o.length-1;l>=0;l--){var f=o[l],_=f!==h&&f._hitTest(r,s,a);if(_&&!s.all)return _}return null}return Et.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,s=i?i.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new ht(Pt._getStrokePadding(a,r._shiftless().invert()));if(t=r._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var o=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==R.hyphenate(this._class)||e.class&&!(this instanceof e.class)),l=e.match,f=this,_,v;function g(c){return c&&l&&!l(c)&&(c=null),c&&e.all&&e.all.push(c),c}function d(c,b){var C=b?_["get"+b]():f.getPosition();if(t.subtract(C).divide(h).length<=1)return new we(c,f,{name:b?R.hyphenate(b):c,point:C})}var w=e.position,m=e.center,k=e.bounds;if(o&&this._parent&&(w||m||k)){if((m||k)&&(_=this.getInternalBounds()),v=w&&d("position")||m&&d("center","Center"),!v&&k)for(var p=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!v;y++)v=d("bounds",p[y]);v=g(v)}return v||(v=this._hitTestChildren(t,e,s)||o&&g(this._hitTestSelf(t,e,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),v&&v.point&&(v.point=r.transform(v.point)),v},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new we("fill",this)},matches:function(t,e){function i(h,o){for(var l in h)if(h.hasOwnProperty(l)){var f=h[l],_=o[l];if(R.isPlainObject(f)&&R.isPlainObject(_)){if(!i(f,_))return!1}else if(!R.equals(f,_))return!1}return!0}var r=typeof t;if(r==="object"){for(var s in t)if(t.hasOwnProperty(s)&&!this.matches(s,t[s]))return!1;return!0}else{if(r==="function")return t(this);if(t==="match")return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+R.capitalize(t)]():t==="type"?R.hyphenate(this._class):this[t];if(t==="class"){if(typeof e=="function")return this instanceof e;a=this._class}if(typeof e=="function")return!!e(a);if(e){if(e.test)return e.test(a);if(R.isPlainObject(e))return i(e,a)}return R.equals(a,e)}},getItems:function(t){return A._getItems(this,t,this._matrix)},getItem:function(t){return A._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,r,s,a){if(!s){var h=typeof i=="object"&&i,o=h&&h.overlapping,l=h&&h.inside,f=o||l,g=f&&ft.read([f]);s={items:[],recursive:h&&h.recursive!==!1,inside:!!l,overlapping:!!o,rect:g,path:o&&new Pt.Rectangle({rectangle:g,insert:!1})},h&&(i=R.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var _=e._children,v=s.items,g=s.rect;r=g&&(r||new It);for(var d=0,w=_&&_.length;d<w;d++){var m=_[d],k=r&&r.appended(m._matrix),p=!0;if(g){var f=m.getBounds(k);if(!g.intersects(f))continue;g.contains(f)||s.overlapping&&(f.contains(g)||s.path.intersects(m,k))||(p=!1)}if(p&&m.matches(i)&&(v.push(m),a)||(s.recursive!==!1&&t(m,i,k,s,a),a&&v.length>0))break}return v}}},{importJSON:function(t){var e=R.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(K,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){e=R.slice(e);for(var r={},s=e.length-1;s>=0;s--){var a=e[s],h=a&&a._id;!a||r[h]?e.splice(s,1):(a._remove(!1,!0),r[h]=!0)}R.splice(i,e,t,0);for(var o=this._project,l=o._changes,s=0,f=e.length;s<f;s++){var a=e[s],_=a._name;a._parent=this,a._setProject(o,!0),_&&a.setName(_),l&&a._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),r=t!==this&&i?this:null;return r&&(r._remove(!1,!0),i._insertItem(t._index+e,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(K,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(K,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&e.length===1){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,r=this._name,s=i[r],a=s?s.indexOf(this):-1;a!==-1&&(e[r]==this&&delete e[r],s.splice(a,1),s.length?e[r]=s[0]:delete i[r])}},_remove:function(t,e){var i=this._getOwner(),r=this._project,s=this._index;return this._style&&this._style._dispose(),i?(this._name&&this._removeNamed(),s!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),R.splice(i._children,null,s,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=R.pick(e,this._children.length);for(var i=R.splice(this._children,null,t,e-t),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,i=e?e.length:0;if(t){for(var r=0;r<i;r++)if(!e[r].isEmpty(t))return!1;return!0}return!i},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(h){var o=[];do o.unshift(h);while(h=h._parent);return o}for(var i=e(this),r=e(t),s=0,a=Math.min(i.length,r.length);s<a;s++)if(i[s]!=r[s])return i[s]._index<r[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},R.each(["rotate","scale","shear","skew"],function(t){var e=t==="rotate";this[t]=function(){var i=arguments,r=(e?R:D).read(i),s=D.read(i,0,{readNull:!0});return this.transform(new It()[t](r,s||this.getPosition(!0)))}},{translate:function(){var t=new It;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i){var r=this._matrix,s=t&&!t.isIdentity(),a=i&&this._canApplyMatrix||this._applyMatrix&&(s||!r.isIdentity()||e&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var h=this._style,o=h.getFillColor(!0),l=h.getStrokeColor(!0);o&&o.transform(t),l&&l.transform(t)}if(a&&(a=this._transformContent(r,e,i))){var f=this._pivot;f&&r._transformPoint(f,f,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var _=this._bounds,v=this._position;(s||a)&&this._changed(25);var g=s&&_&&t.decompose();if(g&&g.skewing.isZero()&&g.rotation%90===0){for(var d in _){var w=_[d];if(w.nonscaling)delete _[d];else if(a||!w.internal){var m=w.rect;t._transformBounds(m,m)}}this._bounds=_;var k=_[this._getBoundsCacheKey(this._boundsOptions||{})];k&&(this._position=this._getPositionFromBounds(k.rect))}else s&&v&&this._pivot&&(this._position=t._transformPoint(v,v));return this},_transformContent:function(t,e,i){var r=this._children;if(r){for(var s=0,a=r.length;s<a;s++)r[s].transform(t,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(D.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(D.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(D.read(arguments))},localToParent:function(){return this._matrix._transformPoint(D.read(arguments))},fitBounds:function(t,e){t=ft.read(arguments);var i=this.getBounds(),r=i.height/i.width,s=t.height/t.width,a=(e?r>s:r<s)?t.width/i.width:t.height/i.height,h=new ft(new D,new ht(i.width*a,i.height*a));h.setCenter(t.getCenter()),this.setBounds(h)}}),{_setStyles:function(t,e,i){var r=this._style,s=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,s)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,s),t.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),h=r.getStrokeCap(),o=r.getMiterLimit();if(a&&(t.lineJoin=a),h&&(t.lineCap=h),o&&(t.miterLimit=o),lt.support.nativeDash){var l=r.getDashArray(),f=r.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=f):(t.mozDash=l,t.mozDashOffset=f))}}if(r.hasShadow()){var _=e.pixelRatio||1,v=i._shiftless().prepend(new It().scale(_,_)),g=v.transform(new D(r.getShadowBlur(),0)),d=v.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=g.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,i){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=e.matrices,s=e.viewMatrix,a=this._matrix,h=r[r.length-1].appended(a);if(h.isInvertible()){s=s?s.appended(h):h,r.push(h),e.updateMatrix&&(this._globalMatrix=h);var o=this._blendMode,l=kt.clamp(this._opacity,0,1),f=o==="normal",_=ii.nativeModes[o],v=f&&l===1||e.dontStart||e.clip||(_||f&&l<1)&&this._canComposite(),g=e.pixelRatio||1,d,w,m;if(!v){var k=this.getStrokeBounds(s);if(!k.width||!k.height){r.pop();return}m=e.offset,w=e.offset=k.getTopLeft().floor(),d=t,t=Rt.getContext(k.getSize().ceil().add(1).multiply(g)),g!==1&&t.scale(g,g)}t.save();var p=i?i.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!v&&e.clipItem,c=!p||y;if(v?(t.globalAlpha=l,_&&(t.globalCompositeOperation=o)):c&&t.translate(-w.x,-w.y),c&&(v?a:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),p){t.setTransform(g,0,0,g,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,s,p),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),v||(ii.process(o,t,d,l,w.subtract(m).multiply(g)),Rt.release(t),e.offset=m)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof Se)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,r,s){var a=this._selection,h=a&1,o=a&2||h&&this._selectBounds,l=a&4;if(this._drawSelected||(h=!1),(h||o||l)&&this._isUpdated(s)){var f,_=this.getSelectedColor(!0)||(f=this.getLayer())&&f.getSelectedColor(!0),v=e.appended(this.getGlobalMatrix(!0)),g=i/2;if(t.strokeStyle=t.fillStyle=_?_.toCanvasStyle(t):"#009dec",h&&this._drawSelected(t,v,r),l){var d=this.getPosition(!0),w=this._parent,m=w?w.localToGlobal(d):d,k=m.x,p=m.y;t.beginPath(),t.arc(k,p,g,0,Math.PI*2,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],c=g,b=i+1,C=0;C<4;C++){var I=y[C],S=I[0],E=I[1];t.moveTo(k+S*c,p+E*c),t.lineTo(k+S*b,p+E*b),t.stroke()}}if(o){var L=v._transformCorners(this.getInternalBounds());t.beginPath();for(var C=0;C<8;C++)t[C?"lineTo":"moveTo"](L[C],L[++C]);t.closePath(),t.stroke();for(var C=0;C<8;C++)t.fillRect(L[C]-g,L[++C]-g,i,i)}}},_canComposite:function(){return!1}},R.each(["down","drag","up","move"],function(t){this["removeOn"+R.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,r=this._project,s=r._removeSets=r._removeSets||{};s[i]=s[i]||{},s[i][this._id]=this}return this}}),{tween:function(t,e,i){i||(i=e,e=t,t=null,i||(i=e,e=null));var r=i&&i.easing,s=i&&i.start,a=i!=null&&(typeof i=="number"?i:i.duration),h=new ti(this,t,e,a,r,s);function o(l){h._handleFrame(l.time*1e3),h.running||this.off("frame",o)}return a&&this.on("frame",o),h},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),qt=A.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function t(e){t.base.call(this,e),e&2050&&(this._clipItem=K)},_getClipItem:function(){var t=this._clipItem;if(t===K){t=null;for(var e=this._children,i=0,r=e.length;i<r;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),R.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,r){var s=this._getClipItem();return(!s||s.contains(e))&&t.base.call(this,e,i,r,s)},_draw:function(t,e){var i=e.clip,r=!i&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var s=this._children,a=0,h=s.length;a<h;a++){var o=s[a];o!==r&&o.draw(t,e)}}}),Me=qt.extend({_class:"Layer",initialize:function(){qt.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Qt=A.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,i){this._initialize(e,i)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&R.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new At(t.width,t.height,this,"setSize")},setSize:function(){var t=ht.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var e=this._type,i=t.width,r=t.height;e==="rectangle"?this._radius.set(ht.min(this._radius,t.divide(2).abs())):e==="circle"?(i=r=(i+r)/2,this._radius=i/2):e==="ellipse"&&this._radius._set(i/2,r/2),this._size._set(i,r),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new At(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if(e==="circle"){if(t===this._radius)return;var i=t*2;this._radius=t,this._size._set(i,i)}else if(t=ht.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),e==="rectangle"){var i=ht.max(this._size,t.multiply(2));this._size.set(i)}else e==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new Pt[R.capitalize(this._type)]({center:new D,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),lt.settings.applyMatrix&&e.setApplyMatrix(!0),(t===K||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,r){var s=this._style,a=s.hasFill(),h=s.hasStroke(),o=e.dontFinish||e.clip,l=!r;if(a||h||o){var f=this._type,_=this._radius,v=f==="circle";if(e.dontStart||t.beginPath(),l&&v)t.arc(0,0,_,0,Math.PI*2,!0);else{var g=v?_:_.width,d=v?_:_.height,w=this._size,m=w.width,k=w.height;if(l&&f==="rectangle"&&g===0&&d===0)t.rect(-m/2,-k/2,m,k);else{var p=m/2,y=k/2,c=1-.5522847498307936,b=g*c,C=d*c,I=[-p,-y+d,-p,-y+C,-p+b,-y,-p+g,-y,p-g,-y,p-b,-y,p,-y+C,p,-y+d,p,y-d,p,y-C,p-b,y,p-g,y,-p+g,y,-p+b,y,-p,y-C,-p,y-d];r&&r.transform(I,I,32),t.moveTo(I[0],I[1]),t.bezierCurveTo(I[2],I[3],I[4],I[5],I[6],I[7]),p!==g&&t.lineTo(I[8],I[9]),t.bezierCurveTo(I[10],I[11],I[12],I[13],I[14],I[15]),y!==d&&t.lineTo(I[16],I[17]),t.bezierCurveTo(I[18],I[19],I[20],I[21],I[22],I[23]),p!==g&&t.lineTo(I[24],I[25]),t.bezierCurveTo(I[26],I[27],I[28],I[29],I[30],I[31])}}t.closePath()}!o&&(a||h)&&(this._setStyles(t,e,i),a&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),h&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new ft(this._size).setCenter(0,0),r=this._style,s=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(i=t._transformBounds(i)),s?i.expand(Pt._getStrokePadding(s,this._getStrokeMatrix(t,e))):i}},new function(){function t(i,r,s){var a=i._radius;if(!a.isZero())for(var h=i._size.divide(2),o=1;o<=4;o++){var l=new D(o>1&&o<4?-1:1,o>2?-1:1),f=l.multiply(h),_=f.subtract(l.multiply(a)),v=new ft(s?f.add(l.multiply(s)):f,_);if(v.contains(r))return{point:_,quadrant:o}}}function e(i,r,s,a){var h=i.divide(r);return(!a||h.isInQuadrant(a))&&h.subtract(h.normalize()).multiply(r).divide(s).length<=1}return{_contains:function i(r){if(this._type==="rectangle"){var s=t(this,r);return s?r.subtract(s.point).divide(this._radius).getLength()<=1:i.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function i(r,s,a,h){var o=!1,l=this._style,f=s.stroke&&l.hasStroke(),_=s.fill&&l.hasFill();if(f||_){var v=this._type,g=this._radius,d=f?l.getStrokeWidth()/2:0,w=s._tolerancePadding.add(Pt._getStrokePadding(d,!l.getStrokeScaling()&&h));if(v==="rectangle"){var m=w.multiply(2),k=t(this,r,m);if(k)o=e(r.subtract(k.point),g,w,k.quadrant);else{var p=new ft(this._size).setCenter(0,0),y=p.expand(m),c=p.expand(m.negate());o=y._containsPoint(r)&&!c._containsPoint(r)}}else o=e(r,g,w)}return o?new we(f?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(e,i,r,s,a){var h=R.create(Qt.prototype);return h._type=e,h._size=r,h._radius=s,h._initialize(R.getNamed(a),i),h}return{Circle:function(){var e=arguments,i=D.readNamed(e,"center"),r=R.readNamed(e,"radius");return t("circle",i,new ht(r*2),r,e)},Rectangle:function(){var e=arguments,i=ft.readNamed(e,"rectangle"),r=ht.min(ht.readNamed(e,"radius"),i.getSize(!0).divide(2));return t("rectangle",i.getCenter(!0),i.getSize(!0),r,e)},Ellipse:function(){var e=arguments,i=Qt._readEllipse(e),r=i.radius;return t("ellipse",i.center,r.multiply(2),r,e)},_readEllipse:function(e){var i,r;if(R.hasNamed(e,"radius"))i=D.readNamed(e,"center"),r=ht.readNamed(e,"radius");else{var s=ft.readNamed(e,"rectangle");i=s.getCenter(!0),r=s.getSize(!0).divide(2)}return{center:i,radius:r}}}}}),Re=A.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,i){if(!this._initialize(e,i!==K&&D.read(arguments))){var r,s=typeof e,a=s==="string"?_t.getElementById(e):s==="object"?e:null;if(a&&a!==A.NO_INSERT){if(a.getContext||a.naturalHeight!=null)r=a;else if(a){var h=ht.read(arguments);h.isZero()||(r=Rt.getCanvas(h))}}r?this.setImage(r):this.setSource(e)}this._size||(this._size=new ht,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var r=Rt.getCanvas(t._size);r.getContext("2d").drawImage(i,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new At(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var i=ht.read(arguments);if(i.equals(this._size))e&&this.clear();else if(i.width>0&&i.height>0){var r=!e&&this.getElement();this._setImage(Rt.getCanvas(i)),r&&this.getContext(!0).drawImage(r,0,0,i.width,i.height)}else this._canvas&&Rt.release(this._canvas),this._size=i.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,e=new D(0,0).transform(t),i=new D(1,0).transform(t).subtract(e),r=new D(0,1).transform(t).subtract(e);return new ht(72/i.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function i(r){var s=e.getView(),a=r&&r.type||"load";s&&e.responds(a)&&(lt=s._scope,e.emit(a,new He(r)))}this._setImage(t),this._loaded?setTimeout(i,0):t&&Ut.add(t,{load:function(r){e._setImage(t),i(r)},error:i})},_setImage:function(t){this._canvas&&Rt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new ht(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=Rt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{Rt.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new Lt.Image,i=this._crossOrigin;i&&(e.crossOrigin=i),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=ft.read(arguments),e=Rt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=ft.read(arguments),e=new Re(A.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=D.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof ce?(i=t,e=t.getBounds()):typeof t=="object"&&("width"in t?e=new ft(t):"x"in t&&(e=new ft(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=32,s=Math.min(e.width,r),a=Math.min(e.height,r),h=Re._sampleContext;h?h.clearRect(0,0,r+1,r+1):h=Re._sampleContext=Rt.getContext(new ht(r)),h.save();var o=new It().scale(s/e.width,a/e.height).translate(-e.x,-e.y);o.applyToContext(h),i&&i.draw(h,new R({clip:!0,matrices:[o]})),this._matrix.applyToContext(h);var l=this.getElement(),f=this._size;l&&h.drawImage(l,-f.width/2,-f.height/2),h.restore();for(var _=h.getImageData(.5,.5,Math.ceil(s),Math.ceil(a)).data,v=[0,0,0],g=0,d=0,w=_.length;d<w;d+=4){var m=_[d+3];g+=m,m/=255,v[0]+=_[d]*m,v[1]+=_[d+1]*m,v[2]+=_[d+2]*m}for(var d=0;d<3;d++)v[d]/=g;return g?jt.read(v):null},getPixel:function(){var t=D.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new jt("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=D.read(t),i=jt.read(t),r=i._convert("rgb"),s=i._alpha,a=this.getContext(!0),h=a.createImageData(1,1),o=h.data;o[0]=r[0]*255,o[1]=r[1]*255,o[2]=r[2]*255,o[3]=s!=null?s*255:255,a.putImageData(h,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=ht.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=ft.read(arguments);return t.isEmpty()&&(t=new ft(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var e=D.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,e){var i=new ft(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new we("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,i){var r=this.getElement();if(r&&r.width>0&&r.height>0){t.globalAlpha=kt.clamp(this._opacity,0,1),this._setStyles(t,e,i);var s=this._smoothing,a=s==="off";Vt.setPrefixed(t,a?"imageSmoothingEnabled":"imageSmoothingQuality",a?!1:s),t.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),qe=A.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,i){this._initialize(e,i!==K&&D.read(arguments,1))||this.setDefinition(e instanceof Xt?e:new Xt(e))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var r=e.extend({all:!1}),s=this._definition._item._hitTest(t,r,i);return s&&(s.item=this),s},_draw:function(t,e){this._definition._item.draw(t,e)}}),Xt=R.extend({_class:"SymbolDefinition",initialize:function(e,i){this._id=Ye.get(),this.project=lt.project,e&&this.setItem(e,i)},_serialize:function(t,e){return e.add(this,function(){return R.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){t&8&&A._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new D),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new qe(this,t)},clone:function(){return new Xt(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),we=R.extend({_class:"HitResult",initialize:function(e,i,r){this.type=e,this.item=i,r&&this.inject(r)},statics:{getOptions:function(t){var e=t&&R.read(t);return new R({type:null,tolerance:lt.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),gt=R.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,i,r,s,a,h){var o=arguments.length,l,f,_,v;o>0&&(e==null||typeof e=="object"?o===1&&e&&"point"in e?(l=e.point,f=e.handleIn,_=e.handleOut,v=e.selection):(l=e,f=i,_=r,v=s):(l=[e,i],f=r!==K?[r,s]:null,_=a!==K?[a,h]:null)),new ai(l,this,"_point"),new ai(f,this,"_handleIn"),new ai(_,this,"_handleOut"),v&&this.setSelection(v)},_serialize:function(t,e){var i=this._point,r=this._selection,s=r||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return r&&s.push(r),R.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i=e._curves,r=this._index,s;i&&((!t||t===this._point||t===this._handleIn)&&(s=r>0?i[r-1]:e._closed?i[i.length-1]:null)&&s._changed(),(!t||t===this._point||t===this._handleOut)&&(s=i[r])&&s._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(D.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(D.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(D.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(257))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==K?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new be(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var r=t||{},s=r.type,a=r.factor,h=this.getPrevious(),o=this.getNext(),l=(h||this)._point,f=this._point,_=(o||this)._point,v=l.getDistance(f),g=f.getDistance(_);if(!s||s==="catmull-rom"){var d=a===K?.5:a,w=Math.pow(v,d),m=w*w,k=Math.pow(g,d),p=k*k;if(!e&&h){var y=2*p+3*k*w+m,c=3*k*(k+w);this.setHandleIn(c!==0?new D((p*l._x+y*f._x-m*_._x)/c-f._x,(p*l._y+y*f._y-m*_._y)/c-f._y):new D)}if(!i&&o){var y=2*m+3*w*k+p,c=3*w*(w+k);this.setHandleOut(c!==0?new D((m*_._x+y*f._x-p*l._x)/c-f._x,(m*_._y+y*f._y-p*l._y)/c-f._y):new D)}}else if(s==="geometric"){if(h&&o){var b=l.subtract(_),C=a===K?.4:a,I=C*v/(v+g);e||this.setHandleIn(b.multiply(I)),i||this.setHandleOut(b.multiply(I-C))}}else throw new Error("Smoothing method '"+s+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new gt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new gt(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var r=1-i,s=i,a=t._point,h=e._point,o=t._handleIn,l=e._handleIn,f=e._handleOut,_=t._handleOut;this._point._set(r*a._x+s*h._x,r*a._y+s*h._y,!0),this._handleIn._set(r*o._x+s*l._x,r*o._y+s*l._y,!0),this._handleOut._set(r*_._x+s*f._x,r*_._y+s*f._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var r=this._point,s=!i||!this._handleIn.isZero()?this._handleIn:null,a=!i||!this._handleOut.isZero()?this._handleOut:null,h=r._x,o=r._y,l=2;return e[0]=h,e[1]=o,s&&(e[l++]=s._x+h,e[l++]=s._y+o),a&&(e[l++]=a._x+h,e[l++]=a._y+o),t&&(t._transformCoordinates(e,e,l/2),h=e[0],o=e[1],i?(r._x=h,r._y=o,l=2,s&&(s._x=e[l++]-h,s._y=e[l++]-o),a&&(a._x=e[l++]-h,a._y=e[l++]-o)):(s||(e[l++]=h,e[l++]=o),a||(e[l++]=h,e[l++]=o))),e}}),ai=D.extend({initialize:function(e,i,r){var s,a,h;if(!e)s=a=0;else if((s=e[0])!==K)a=e[1];else{var o=e;(s=o.x)===K&&(o=D.read(arguments),s=o.x),a=o.y,h=o.selected}this._x=s,this._y=a,this._owner=i,i[r]=this,h&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=kt.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),rt=R.extend({_class:"Curve",beans:!0,initialize:function(e,i,r,s,a,h,o,l){var f=arguments.length,_,v,g,d,w,m;f===3?(this._path=e,_=i,v=r):f?f===1?"segment1"in e?(_=new gt(e.segment1),v=new gt(e.segment2)):"point1"in e?(g=e.point1,w=e.handle1,m=e.handle2,d=e.point2):Array.isArray(e)&&(g=[e[0],e[1]],d=[e[6],e[7]],w=[e[2]-e[0],e[3]-e[1]],m=[e[4]-e[6],e[5]-e[7]]):f===2?(_=new gt(e),v=new gt(i)):f===4?(g=e,w=i,m=r,d=s):f===8&&(g=[e,i],d=[o,l],w=[r-e,s-i],m=[a-o,h-l]):(_=new gt,v=new gt),this._segment1=_||new gt(g,null,w),this._segment2=v||new gt(d,m,null)},_serialize:function(t,e){return R.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=K},clone:function(){return new rt(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return rt.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(D.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(D.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(D.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(D.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return rt.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new D(t[i],t[i+1]));return e}},{getLength:function(){return this._length==null&&(this._length=rt.getLength(this.getValues(),0,1)),this._length},getArea:function(){return rt.getArea(this.getValues())},getLine:function(){return new Kt(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new rt(rt.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return rt.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=1e-8,r=1-i,s=null;if(t>=i&&t<=r){var a=rt.subdivide(this.getValues(),t),h=a[0],o=a[1],l=e||this.hasHandles(),f=this._segment1,_=this._segment2,v=this._path;l&&(f._handleOut._set(h[2]-h[0],h[3]-h[1]),_._handleIn._set(o[4]-o[6],o[5]-o[7]));var g=h[6],d=h[7],w=new gt(new D(g,d),l&&new D(h[4]-g,h[5]-d),l&&new D(o[2]-g,o[3]-d));v?(v.insert(f._index+1,w),s=this.getNext()):(this._segment2=w,this._changed(),s=new rt(w,_))}return s},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===K?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===K?.5:e?t:this.getTimeAt(t))},reversed:function(){return new rt(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,r){var s=t._point,a=t._handleOut,h=e._handleIn,o=e._point,l=s.x,f=s.y,_=o.x,v=o.y,g=r?[l,f,l,f,_,v,_,v]:[l,f,l+a._x,f+a._y,_+h._x,v+h._y,_,v];return i&&i._transformCoordinates(g,g,4),g},subdivide:function(t,e){var i=t[0],r=t[1],s=t[2],a=t[3],h=t[4],o=t[5],l=t[6],f=t[7];e===K&&(e=.5);var _=1-e,v=_*i+e*s,g=_*r+e*a,d=_*s+e*h,w=_*a+e*o,m=_*h+e*l,k=_*o+e*f,p=_*v+e*d,y=_*g+e*w,c=_*d+e*m,b=_*w+e*k,C=_*p+e*c,I=_*y+e*b;return[[i,r,v,g,p,y,C,I],[C,I,c,b,m,k,l,f]]},getMonoCurves:function(t,e){var i=[],r=e?0:1,s=t[r+0],a=t[r+2],h=t[r+4],o=t[r+6];if(s>=a==a>=h&&a>=h==h>=o||rt.isStraight(t))i.push(t);else{var l=3*(a-h)-s+o,f=2*(s+h)-4*a,_=a-s,v=1e-8,g=1-v,d=[],w=kt.solveQuadratic(l,f,_,d,v,g);if(!w)i.push(t);else{d.sort();var m=d[0],k=rt.subdivide(t,m);i.push(k[0]),w>1&&(m=(d[1]-m)/(1-m),k=rt.subdivide(k[1],m),i.push(k[0])),i.push(k[1])}}return i},solveCubic:function(t,e,i,r,s,a){var h=t[e],o=t[e+2],l=t[e+4],f=t[e+6],_=0;if(!(h<i&&f<i&&o<i&&l<i||h>i&&f>i&&o>i&&l>i)){var v=3*(o-h),g=3*(l-o)-v,d=f-h-v-g;_=kt.solveCubic(d,g,v,h-i,r,s,a)}return _},getTimeOf:function(t,e){var i=new D(t[0],t[1]),r=new D(t[6],t[7]),s=1e-12,a=1e-7,h=e.isClose(i,s)?0:e.isClose(r,s)?1:null;if(h===null)for(var o=[e.x,e.y],l=[],f=0;f<2;f++)for(var _=rt.solveCubic(t,f,o[f],l,0,1),v=0;v<_;v++){var g=l[v];if(e.isClose(rt.getPoint(t,g),a))return g}return e.isClose(i,a)?0:e.isClose(r,a)?1:null},getNearestTime:function(t,e){if(rt.isStraight(t)){var i=t[0],r=t[1],s=t[6],a=t[7],h=s-i,o=a-r,l=h*h+o*o;if(l===0)return 0;var f=((e.x-i)*h+(e.y-r)*o)/l;return f<1e-12?0:f>.999999999999?1:rt.getTimeOf(t,new D(i+f*h,r+f*o))}var _=100,v=1/0,g=0;function d(k){if(k>=0&&k<=1){var p=e.getDistance(rt.getPoint(t,k),!0);if(p<v)return v=p,g=k,!0}}for(var w=0;w<=_;w++)d(w/_);for(var m=1/(_*2);m>1e-8;)!d(g-m)&&!d(g+m)&&(m/=2);return g},getPart:function(t,e,i){var r=e>i;if(r){var s=e;e=i,i=s}return e>0&&(t=rt.subdivide(t,e)[1]),i<1&&(t=rt.subdivide(t,(i-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],r=t[1],s=t[2],a=t[3],h=t[4],o=t[5],l=t[6],f=t[7],_=3*s-2*i-l,v=3*a-2*r-f,g=3*h-2*l-i,d=3*o-2*f-r;return Math.max(_*_,g*g)+Math.max(v*v,d*d)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],h=t[5],o=t[6],l=t[7];return 3*((l-i)*(r+a)-(o-e)*(s+h)+s*(e-a)-r*(i-h)+l*(a+e/3)-o*(h+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),r=[0,0],s=0;s<2;s++)rt._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,r);return new ft(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,r,s,a,h,o,l){function f(C,I){var S=C-I,E=C+I;S<h[s]&&(h[s]=S),E>o[s]&&(o[s]=E)}a/=2;var _=h[s]+a,v=o[s]-a;if(t<_||e<_||i<_||r<_||t>v||e>v||i>v||r>v)if(e<t!=e<r&&i<t!=i<r)f(t,0),f(r,0);else{var g=3*(e-i)-t+r,d=2*(t+i)-4*e,w=e-t,m=kt.solveQuadratic(g,d,w,l),k=1e-8,p=1-k;f(r,0);for(var y=0;y<m;y++){var c=l[y],b=1-c;k<=c&&c<=p&&f(b*b*b*t+3*b*b*c*e+3*b*c*c*i+c*c*c*r,a)}}}}},R.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=Pt[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),R.each({isStraight:function(t,e,i,r){if(e.isZero()&&i.isZero())return!0;var s=r.subtract(t);if(s.isZero())return!1;if(s.isCollinear(e)&&s.isCollinear(i)){var a=new Kt(t,r),h=1e-7;if(a.getDistance(t.add(e))<h&&a.getDistance(r.add(i))<h){var o=s.dot(s),l=s.dot(e)/o,f=s.dot(i)/o;return l>=0&&l<=1&&f<=0&&f>=-1}}return!1},isLinear:function(t,e,i,r){var s=r.subtract(t).divide(3);return e.equals(s)&&i.negate().equals(s)}},function(t,e){this[e]=function(i){var r=this._segment1,s=this._segment2;return t(r._point,r._handleOut,s._handleIn,s._point,i)},this.statics[e]=function(i,r){var s=i[0],a=i[1],h=i[6],o=i[7];return t(new D(s,a),new D(i[2]-s,i[3]-a),new D(i[4]-h,i[5]-o),new D(h,o),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new be(this,t):null},getTimeAt:function(t,e){return rt.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=D.read(arguments);return t.isZero()?[]:rt.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(D.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return rt.getTimeOf(this.getValues(),D.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=D.read(arguments),e=this.getValues(),i=rt.getNearestTime(e,t),r=rt.getPoint(e,i);return new be(this,i,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return R.each(t,function(e){this[e+"At"]=function(i,r){var s=this.getValues();return rt[e](s,r?i:rt.getTimeAt(s,i))},this[e+"AtTime"]=function(i){return rt[e](this.getValues(),i)}},{statics:{_evaluateMethods:t}})},new function(){function t(r){var s=r[0],a=r[1],h=r[2],o=r[3],l=r[4],f=r[5],_=r[6],v=r[7],g=9*(h-l)+3*(_-s),d=6*(s+l)-12*h,w=3*(h-s),m=9*(o-f)+3*(v-a),k=6*(a+f)-12*o,p=3*(o-a);return function(y){var c=(g*y+d)*y+w,b=(m*y+k)*y+p;return Math.sqrt(c*c+b*b)}}function e(r,s){return Math.max(2,Math.min(16,Math.ceil(Math.abs(s-r)*32)))}function i(r,s,a,h){if(s==null||s<0||s>1)return null;var o=r[0],l=r[1],f=r[2],_=r[3],v=r[4],g=r[5],d=r[6],w=r[7],m=kt.isZero;m(f-o)&&m(_-l)&&(f=o,_=l),m(v-d)&&m(g-w)&&(v=d,g=w);var k=3*(f-o),p=3*(v-f)-k,y=d-o-k-p,c=3*(_-l),b=3*(g-_)-c,C=w-l-c-b,I,S;if(a===0)I=s===0?o:s===1?d:((y*s+p)*s+k)*s+o,S=s===0?l:s===1?w:((C*s+b)*s+c)*s+l;else{var E=1e-8,L=1-E;if(s<E?(I=k,S=c):s>L?(I=3*(d-v),S=3*(w-g)):(I=(3*y*s+2*p)*s+k,S=(3*C*s+2*b)*s+c),h){I===0&&S===0&&(s<E||s>L)&&(I=v-f,S=g-_);var N=Math.sqrt(I*I+S*S);N&&(I/=N,S/=N)}if(a===3){var v=6*y*s+2*p,g=6*C*s+2*b,F=Math.pow(I*I+S*S,3/2);I=F!==0?(I*g-S*v)/F:0,S=0}}return a===2?new D(S,-I):new D(I,S)}return{statics:{classify:function(r){var s=r[0],a=r[1],h=r[2],o=r[3],l=r[4],f=r[5],_=r[6],v=r[7],g=s*(v-f)+a*(l-_)+_*f-v*l,d=h*(a-v)+o*(_-s)+s*v-a*_,w=l*(o-a)+f*(s-h)+h*a-o*s,m=3*w,k=m-d,p=k-d+g,y=Math.sqrt(p*p+k*k+m*m),c=y!==0?1/y:0,b=kt.isZero,C="serpentine";p*=c,k*=c,m*=c;function I(N,F,T){var V=F!==K,B=V&&F>0&&F<1,q=V&&T>0&&T<1;return V&&(!(B||q)||N==="loop"&&!(B&&q))&&(N="arch",B=q=!1),{type:N,roots:B||q?B&&q?F<T?[F,T]:[T,F]:[B?F:T]:null}}if(b(p))return b(k)?I(b(m)?"line":"quadratic"):I(C,m/(3*k));var S=3*k*k-4*p*m;if(b(S))return I("cusp",k/(2*p));var E=S>0?Math.sqrt(S/3):Math.sqrt(-S),L=2*p;return I(S>0?C:"loop",(k+E)/L,(k-E)/L)},getLength:function(r,s,a,h){if(s===K&&(s=0),a===K&&(a=1),rt.isStraight(r)){var o=r;a<1&&(o=rt.subdivide(o,a)[0],s/=a),s>0&&(o=rt.subdivide(o,s)[1]);var l=o[6]-o[0],f=o[7]-o[1];return Math.sqrt(l*l+f*f)}return kt.integrate(h||t(r),s,a,e(s,a))},getTimeAt:function(r,s,a){if(a===K&&(a=s<0?1:0),s===0)return a;var h=Math.abs,o=1e-12,l=s>0,f=l?a:0,_=l?1:a,v=t(r),g=rt.getLength(r,f,_,v),d=h(s)-g;if(h(d)<o)return l?_:f;if(d>o)return null;var w=s/g,m=0;function k(p){return m+=kt.integrate(v,a,p,e(a,p)),a=p,m-s}return kt.findRoot(k,v,a+w,f,_,32,1e-12)},getPoint:function(r,s){return i(r,s,0,!1)},getTangent:function(r,s){return i(r,s,1,!0)},getWeightedTangent:function(r,s){return i(r,s,1,!1)},getNormal:function(r,s){return i(r,s,2,!0)},getWeightedNormal:function(r,s){return i(r,s,2,!1)},getCurvature:function(r,s){return i(r,s,3,!1).x},getPeaks:function(r){var s=r[0],a=r[1],h=r[2],o=r[3],l=r[4],f=r[5],_=r[6],v=r[7],g=-s+3*h-3*l+_,d=3*s-6*h+3*l,w=-3*s+3*h,m=-a+3*o-3*f+v,k=3*a-6*o+3*f,p=-3*a+3*o,y=1e-8,c=1-y,b=[];return kt.solveCubic(9*(g*g+m*m),9*(g*d+k*m),2*(d*d+k*k)+3*(w*g+p*m),w*d+k*p,b,y,c),b.sort()}}}},new function(){function t(d,w,m,k,p,y,c){var b=!c&&m.getPrevious()===p,C=!c&&m!==p&&m.getNext()===p,I=1e-8,S=1-I;if(k!==null&&k>=(b?I:0)&&k<=(C?S:1)&&y!==null&&y>=(C?I:0)&&y<=(b?S:1)){var E=new be(m,k,null,c),L=new be(p,y,null,c);E._intersection=L,L._intersection=E,(!w||w(E))&&be.insert(d,E,!0)}}function e(d,w,m,k,p,y,c,b,C,I,S,E,L){if(++C>=4096||++b>=40)return C;var N=1e-9,F=w[0],T=w[1],V=w[6],B=w[7],q=Kt.getSignedDistance,U=q(F,T,V,B,w[2],w[3]),W=q(F,T,V,B,w[4],w[5]),J=U*W>0?3/4:4/9,et=J*Math.min(0,U,W),it=J*Math.max(0,U,W),at=q(F,T,V,B,d[0],d[1]),Z=q(F,T,V,B,d[2],d[3]),Q=q(F,T,V,B,d[4],d[5]),st=q(F,T,V,B,d[6],d[7]),ut=i(at,Z,Q,st),ot=ut[0],pt=ut[1],dt,xt;if(U===0&&W===0&&at===0&&Z===0&&Q===0&&st===0||(dt=r(ot,pt,et,it))==null||(xt=r(ot.reverse(),pt.reverse(),et,it))==null)return C;var tt=I+(S-I)*dt,ct=I+(S-I)*xt;if(Math.max(L-E,ct-tt)<N){var Zt=(tt+ct)/2,Yt=(E+L)/2;t(p,y,c?k:m,c?Yt:Zt,c?m:k,c?Zt:Yt)}else{d=rt.getPart(d,dt,xt);var ee=L-E;if(xt-dt>.8)if(ct-tt>ee){var zt=rt.subdivide(d,.5),Zt=(tt+ct)/2;C=e(w,zt[0],k,m,p,y,!c,b,C,E,L,tt,Zt),C=e(w,zt[1],k,m,p,y,!c,b,C,E,L,Zt,ct)}else{var zt=rt.subdivide(w,.5),Yt=(E+L)/2;C=e(zt[0],d,k,m,p,y,!c,b,C,E,Yt,tt,ct),C=e(zt[1],d,k,m,p,y,!c,b,C,Yt,L,tt,ct)}else ee===0||ee>=N?C=e(w,d,k,m,p,y,!c,b,C,E,L,tt,ct):C=e(d,w,m,k,p,y,c,b,C,tt,ct,E,L)}return C}function i(d,w,m,k){var p=[0,d],y=[1/3,w],c=[2/3,m],b=[1,k],C=w-(2*d+k)/3,I=m-(d+2*k)/3,S;if(C*I<0)S=[[p,y,b],[p,c,b]];else{var E=C/I;S=[E>=2?[p,y,b]:E<=.5?[p,c,b]:[p,y,c,b],[p,b]]}return(C||I)<0?S.reverse():S}function r(d,w,m,k){return d[0][1]<m?s(d,!0,m):w[0][1]>k?s(w,!1,k):d[0][0]}function s(d,w,m){for(var k=d[0][0],p=d[0][1],y=1,c=d.length;y<c;y++){var b=d[y][0],C=d[y][1];if(w?C>=m:C<=m)return C===m?b:k+(m-p)*(b-k)/(C-p);k=b,p=C}return null}function a(d,w,m,k,p){var y=kt.isZero;if(y(k)&&y(p)){var c=rt.getTimeOf(d,new D(w,m));return c===null?[]:[c]}for(var b=Math.atan2(-p,k),C=Math.sin(b),I=Math.cos(b),S=[],E=[],L=0;L<8;L+=2){var N=d[L]-w,F=d[L+1]-m;S.push(N*I-F*C,N*C+F*I)}return rt.solveCubic(S,1,0,E,0,1),E}function h(d,w,m,k,p,y,c){for(var b=w[0],C=w[1],I=w[6],S=w[7],E=a(d,b,C,I-b,S-C),L=0,N=E.length;L<N;L++){var F=E[L],T=rt.getPoint(d,F),V=rt.getTimeOf(w,T);V!==null&&t(p,y,c?k:m,c?V:F,c?m:k,c?F:V)}}function o(d,w,m,k,p,y){var c=Kt.intersect(d[0],d[1],d[6],d[7],w[0],w[1],w[6],w[7]);c&&t(p,y,m,rt.getTimeOf(d,c),k,rt.getTimeOf(w,c))}function l(d,w,m,k,p,y){var c=1e-12,b=Math.min,C=Math.max;if(C(d[0],d[2],d[4],d[6])+c>b(w[0],w[2],w[4],w[6])&&b(d[0],d[2],d[4],d[6])-c<C(w[0],w[2],w[4],w[6])&&C(d[1],d[3],d[5],d[7])+c>b(w[1],w[3],w[5],w[7])&&b(d[1],d[3],d[5],d[7])-c<C(w[1],w[3],w[5],w[7])){var I=v(d,w);if(I)for(var S=0;S<2;S++){var E=I[S];t(p,y,m,E[0],k,E[1],!0)}else{var L=rt.isStraight(d),N=rt.isStraight(w),F=L&&N,T=L&&!N,V=p.length;if((F?o:L||N?h:e)(T?w:d,T?d:w,T?k:m,T?m:k,p,y,T,0,0,0,1,0,1),!F||p.length===V)for(var S=0;S<4;S++){var B=S>>1,q=S&1,U=B*6,W=q*6,J=new D(d[U],d[U+1]),et=new D(w[W],w[W+1]);J.isClose(et,c)&&t(p,y,m,B,k,q)}}}return p}function f(d,w,m,k){var p=rt.classify(d);if(p.type==="loop"){var y=p.roots;t(m,k,w,y[0],w,y[1])}return m}function _(d,w,m,k,p,y){var c=1e-7,b=!w;b&&(w=d);for(var C=d.length,I=w.length,S=new Array(C),E=b?S:new Array(I),L=[],N=0;N<C;N++)S[N]=d[N].getValues(k);if(!b)for(var N=0;N<I;N++)E[N]=w[N].getValues(p);for(var F=ye.findCurveBoundsCollisions(S,E,c),T=0;T<C;T++){var V=d[T],B=S[T];b&&f(B,V,L,m);var q=F[T];if(q)for(var U=0;U<q.length;U++){if(y&&L.length)return L;var W=q[U];if(!b||W>T){var J=w[W],et=E[W];l(B,et,V,J,L,m)}}}return L}function v(d,w){function m(st){var ut=st[6]-st[0],ot=st[7]-st[1];return ut*ut+ot*ot}var k=Math.abs,p=Kt.getDistance,y=1e-8,c=1e-7,b=rt.isStraight(d),C=rt.isStraight(w),I=b&&C,S=m(d)<m(w),E=S?w:d,L=S?d:w,N=E[0],F=E[1],T=E[6]-N,V=E[7]-F;if(p(N,F,T,V,L[0],L[1],!0)<c&&p(N,F,T,V,L[6],L[7],!0)<c)!I&&p(N,F,T,V,E[2],E[3],!0)<c&&p(N,F,T,V,E[4],E[5],!0)<c&&p(N,F,T,V,L[2],L[3],!0)<c&&p(N,F,T,V,L[4],L[5],!0)<c&&(b=C=I=!0);else if(I)return null;if(b^C)return null;for(var B=[d,w],q=[],U=0;U<4&&q.length<2;U++){var W=U&1,J=W^1,et=U>>1,it=rt.getTimeOf(B[W],new D(B[J][et?6:0],B[J][et?7:1]));if(it!=null){var at=W?[et,it]:[it,et];(!q.length||k(at[0]-q[0][0])>y&&k(at[1]-q[0][1])>y)&&q.push(at)}if(U>2&&!q.length)break}if(q.length!==2)q=null;else if(!I){var Z=rt.getPart(d,q[0][0],q[1][0]),Q=rt.getPart(w,q[0][1],q[1][1]);(k(Q[2]-Z[2])>c||k(Q[3]-Z[3])>c||k(Q[4]-Z[4])>c||k(Q[5]-Z[5])>c)&&(q=null)}return q}function g(d,w){var m=d[0],k=d[1],p=d[2],y=d[3],c=d[4],b=d[5],C=d[6],I=d[7],S=w.normalize(),E=S.x,L=S.y,N=3*C-9*c+9*p-3*m,F=3*I-9*b+9*y-3*k,T=6*c-12*p+6*m,V=6*b-12*y+6*k,B=3*p-3*m,q=3*y-3*k,U=2*N*L-2*F*E,W=[];if(Math.abs(U)<kt.CURVETIME_EPSILON){var J=N*q-F*B,U=N*V-F*T;if(U!=0){var et=-J/U;et>=0&&et<=1&&W.push(et)}}else{var it=(T*T-4*N*B)*L*L+(-2*T*V+4*F*B+4*N*q)*E*L+(V*V-4*F*q)*E*E,at=T*L-V*E;if(it>=0&&U!=0){var Z=Math.sqrt(it),Q=-(at+Z)/U,st=(-at+Z)/U;Q>=0&&Q<=1&&W.push(Q),st>=0&&st<=1&&W.push(st)}}return W}return{getIntersections:function(d){var w=this.getValues(),m=d&&d!==this&&d.getValues();return m?l(w,m,this,d,[]):f(w,this,[])},statics:{getOverlaps:v,getIntersections:_,getCurveLineIntersections:a,getTimesWithTangent:g}}}),be=R.extend({_class:"CurveLocation",initialize:function(e,i,r,s,a){if(i>=.99999999){var h=e.getNext();h&&(i=0,e=h)}this._setCurve(e),this._time=i,this._point=r||e.getPointAtTime(i),this._overlap=s,this._distance=a,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();i===0?t=e._segment1:i===1?t=e._segment2:i!=null&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function i(r){var s=r&&r.getCurve();if(s&&(e._time=s.getTimeOf(e._point))!=null)return e._setCurve(s),s}return this._curve||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&e==null?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var e=this.getPath(),i=this.getIndex();if(e&&i!=null)for(var r=e.getCurves(),s=0;s<i;s++)t+=r[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=i!=null&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof be){var r=this.getCurve(),s=t.getCurve(),a=r._path,h=s._path;if(a===h){var o=Math.abs,l=1e-7,f=o(this.getOffset()-t.getOffset()),_=!e&&this._intersection,v=!e&&t._intersection;i=(f<l||a&&o(a.getLength()-f)<l)&&(!_&&!v||_&&v&&_.equals(v,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=oe.instance;e&&t.push("point: "+e);var r=this.getIndex();r!=null&&t.push("index: "+r);var s=this.getTime();return s!=null&&t.push("time: "+i.number(s)),this._distance!=null&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),i=t.getTime(),r=1e-8,s=1-r,a=e>=r&&e<=s,h=i>=r&&i<=s;if(a&&h)return!this.isTouching();var o=this.getCurve(),l=o&&e<r?o.getPrevious():o,f=t.getCurve(),_=f&&i<r?f.getPrevious():f;if(e>s&&(o=o.getNext()),i>s&&(f=f.getNext()),!l||!o||!_||!f)return!1;var v=[];function g(E,L){var N=E.getValues(),F=rt.classify(N).roots||rt.getPeaks(N),T=F.length,V=rt.getLength(N,L&&T?F[T-1]:0,!L&&T?F[0]:1);v.push(T?V:V/32)}function d(E,L,N){return L<N?E>L&&E<N:E>L||E<N}a||(g(l,!0),g(o,!1)),h||(g(_,!0),g(f,!1));var w=this.getPoint(),m=Math.min.apply(Math,v),k=a?o.getTangentAtTime(e):o.getPointAt(m).subtract(w),p=a?k.negate():l.getPointAt(-m).subtract(w),y=h?f.getTangentAtTime(i):f.getPointAt(m).subtract(w),c=h?y.negate():_.getPointAt(-m).subtract(w),b=p.getAngle(),C=k.getAngle(),I=c.getAngle(),S=y.getAngle();return!!(a?d(b,I,S)^d(C,I,S)&&d(b,S,I)^d(C,S,I):d(I,b,C)^d(S,b,C)&&d(I,C,b)^d(S,C,b))},hasOverlap:function(){return!!this._overlap}},R.each(rt._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var i=this.getCurve(),r=this.getTime();return r!=null&&i&&i[e](r,!0)}},{preserve:!0}),new function(){function t(e,i,r){var s=e.length,a=0,h=s-1;function o(w,m){for(var k=w+m;k>=-1&&k<=s;k+=m){var p=e[(k%s+s)%s];if(!i.getPoint().isClose(p.getPoint(),1e-7))break;if(i.equals(p))return p}return null}for(;a<=h;){var l=a+h>>>1,f=e[l],_;if(r&&(_=i.equals(f)?f:o(l,-1)||o(l,1)))return i._overlap&&(_._overlap=_._intersection._overlap=!0),_;var v=i.getPath(),g=f.getPath(),d=v!==g?v._id-g._id:i.getIndex()+i.getTime()-(f.getIndex()+f.getTime());d<0?h=l-1:a=l+1}return e.splice(a,0,i),i}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),r=e.length-1;r>=0;r--)t(i,e[r]._intersection,!1);return i}}}}),ce=A.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,r;if(R.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:typeof t=="string"&&(e=t),i){var s=i[0];r=s&&Array.isArray(s[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var a=r?Se:Pt;return new a(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),i,r=!1,s,a,h=new D,o=new D;function l(c,b){var C=+i[c];return r&&(C+=h[b]),C}function f(c){return new D(l(c,"x"),l(c+1,"y"))}this.clear();for(var _=0,v=e&&e.length;_<v;_++){var g=e[_],d=g[0],w=d.toLowerCase();i=g.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var m=i&&i.length;switch(r=d===w,s==="z"&&!/[mz]/.test(w)&&this.moveTo(h),w){case"m":case"l":for(var k=w==="m",p=0;p<m;p+=2)this[k?"moveTo":"lineTo"](h=f(p)),k&&(o=h,k=!1);a=h;break;case"h":case"v":var y=w==="h"?"x":"y";h=h.clone();for(var p=0;p<m;p++)h[y]=l(p,y),this.lineTo(h);a=h;break;case"c":for(var p=0;p<m;p+=6)this.cubicCurveTo(f(p),a=f(p+2),h=f(p+4));break;case"s":for(var p=0;p<m;p+=4)this.cubicCurveTo(/[cs]/.test(s)?h.multiply(2).subtract(a):h,a=f(p),h=f(p+2)),s=w;break;case"q":for(var p=0;p<m;p+=4)this.quadraticCurveTo(a=f(p),h=f(p+2));break;case"t":for(var p=0;p<m;p+=2)this.quadraticCurveTo(a=/[qt]/.test(s)?h.multiply(2).subtract(a):h,h=f(p)),s=w;break;case"a":for(var p=0;p<m;p+=7)this.arcTo(h=f(p+5),new ht(+i[p],+i[p+1]),+i[p+2],+i[p+4],+i[p+3]);break;case"z":this.closePath(1e-12),h=o;break}s=w}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!(this.getFillRule()==="evenodd"?e.windingL&1||e.windingR&1:e.winding)},getIntersections:function(t,e,i,r){var s=this===t||!t,a=this._matrix._orNullIfIdentity(),h=s?a:(i||t._matrix)._orNullIfIdentity();return s||this.getBounds(a).intersects(t.getBounds(h),1e-12)?rt.getIntersections(this.getCurves(),!s&&t.getCurves(),e,a,h,r):[]},getCrossings:function(t){return this.getIntersections(t,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var t=D.read(arguments),e=this.getCurves(),i=1/0,r=null,s=0,a=e.length;s<a;s++){var h=e[s].getNearestLocation(t);h._distance<i&&(i=h._distance,r=h)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,e,i){var r=!this._children,s=r?"_segments":"_children",a=t[s],h=e[s],o=this[s];if(!a||!h||a.length!==h.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=o.length,f=h.length;if(l<f)for(var _=r?gt:Pt,v=l;v<f;v++)this.add(new _);else l>f&&this[r?"removeSegments":"removeChildren"](f,l);for(var v=0;v<f;v++)o[v].interpolate(a[v],h[v],i);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],r=t._children?t._children.slice():[t],s=i.length,a=r.length,h=[],o=0;e=!0;for(var l=ye.findItemBoundsCollisions(i,r,kt.GEOMETRIC_EPSILON),f=s-1;f>=0&&e;f--){var _=i[f];e=!1;var v=l[f];if(v)for(var g=v.length-1;g>=0&&!e;g--)_.compare(r[v[g]])&&(h[v[g]]||(h[v[g]]=!0,o++),e=!0)}e=e&&o===a}return e}}),Pt=ce.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var i=arguments,r=Array.isArray(e)?typeof e[0]=="object"?e:i:e&&e.size===K&&(e.x!==K||e.point!==K)?i:null;r&&r.length>0?this.setSegments(r):(this._curves=K,this._segmentSelection=0,!r&&typeof e=="string"&&(this.setPathData(e),e=null)),this._initialize(!r&&e)},_equals:function(t){return this._closed===t._closed&&R.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),e&8){if(this._length=this._area=K,e&32)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else e&64&&(this._bounds=K)},getStyle:function(){var t=this._parent;return(t instanceof Se?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=K,i){var r=t[i-1];typeof r=="boolean"&&(this.setClosed(r),i--),this._add(gt.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var r=0;r<i;r++)t[r]=new rt(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new rt(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var i=this._segments,r=i.length,s=new oe(e),a=new Array(6),h=!0,o,l,f,_,v,g,d,w,m=[];function k(y,c){if(y._transformCoordinates(t,a),o=a[0],l=a[1],h)m.push("M"+s.pair(o,l)),h=!1;else if(v=a[2],g=a[3],v===o&&g===l&&d===f&&w===_){if(!c){var b=o-f,C=l-_;m.push(b===0?"v"+s.number(C):C===0?"h"+s.number(b):"l"+s.pair(b,C))}}else m.push("c"+s.pair(d-f,w-_)+" "+s.pair(v-f,g-_)+" "+s.pair(o-f,l-_));f=o,_=l,d=a[4],w=a[5]}if(!r)return"";for(var p=0;p<r;p++)k(i[p]);return this._closed&&r>0&&(k(i[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),r=0,s=e.length;r<s;r++)e[r]._transformCoordinates(t,i,!0);return!0},_add:function(t,h){for(var i=this._segments,r=this._curves,s=t.length,a=h==null,h=a?i.length:h,o=0;o<s;o++){var l=t[o];l._path&&(l=t[o]=l.clone()),l._path=this,l._index=h+o,l._selection&&this._updateSelection(l,0,l._selection)}if(a)R.push(i,t);else{i.splice.apply(i,[h,0].concat(t));for(var o=h+s,f=i.length;o<f;o++)i[o]._index=o}if(r){var _=this._countCurves(),v=h>0&&h+s-1===_?h-1:h,g=v,d=Math.min(v+s,_);t._curves&&(r.splice.apply(r,[v,0].concat(t._curves)),g+=t._curves.length);for(var o=g;o<d;o++)r.splice(o,0,new rt(this,null,null));this._adjustCurves(v,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var i=this._segments,r=this._curves,s,a=t;a<e;a++)s=r[a],s._path=this,s._segment1=i[a],s._segment2=i[a+1]||i[0],s._changed();(s=r[this._closed&&!t?i.length-1:t-1])&&(s._segment2=i[t]||i[0],s._changed()),(s=r[e])&&(s._segment1=i[e],s._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&typeof t!="number"?this._add(gt.readList(e)):this._add([gt.read(e)])[0]},insert:function(t,e){var i=arguments;return i.length>2&&typeof e!="number"?this._add(gt.readList(i,1),t):this._add([gt.read(i,1)],t)[0]},addSegment:function(){return this._add([gt.read(arguments)])[0]},insertSegment:function(t){return this._add([gt.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(gt.readList(t))},insertSegments:function(t,e){return this._add(gt.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=R.pick(e,this._segments.length);var r=this._segments,s=this._curves,a=r.length,h=r.splice(t,e-t),o=h.length;if(!o)return h;for(var l=0;l<o;l++){var f=h[l];f._selection&&this._updateSelection(f,f._selection,0),f._index=f._path=null}for(var l=t,_=r.length;l<_;l++)r[l]._index=l;if(s){for(var v=t>0&&e===a+(this._closed?1:0)?t-1:t,s=s.splice(v,o),l=s.length-1;l>=0;l--)s[l]._path=null;i&&(h._curves=s.slice(1)),this._adjustCurves(v,v)}return this._changed(41),h},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),e=0,i=0,r=t.length;i<r;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(t==null){var e=this._segments,i=this._closed;t=0;for(var r=0,s=e.length;r<s;r++){var a=r+1===s;t+=rt.getArea(rt.getValues(e[r],e[a?0:r+1],null,a&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){e&1||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,r=t?7:0;this._segmentSelection=r*i;for(var s=0;s<i;s++)e[s]._selection=r},_updateSelection:function(t,e,i){t._selection=i;var r=this._segmentSelection+=i-e;r>0&&this.setSelected(!0)},divideAt:function(t){var e=this.getLocationAt(t),i;return e&&(i=e.getCurve().divideAt(e.getCurveOffset()))?i._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,r=e&&e.time,s=1e-8,a=1-s;r>a&&(i++,r=0);var h=this.getCurves();if(i>=0&&i<h.length){r>=s&&h[i++].divideAtTime(r);var o=this.removeSegments(i,this._segments.length,!0),l;return this._closed?(this.setClosed(!1),l=this):(l=new Pt(A.NO_INSERT),l.insertAbove(this),l.copyAttributes(this)),l._add(o,0),this.addSegment(o[0]),l}return null},split:function(t,e){var i,r=e===K?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return r!=null?this.splitAt(r):null},join:function(t,e){var i=e||0;if(t&&t!==this){var r=t._segments,s=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;s&&s._point.isClose(a._point,i)&&t.reverse();var h=t.getFirstSegment();if(s&&s._point.isClose(h._point,i))s.setHandleOut(h._handleOut),this._add(r.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(h._point,i)&&t.reverse(),a=t.getLastSegment(),o&&o._point.isClose(a._point,i)?(o.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var l=this.getFirstSegment(),f=this.getLastSegment();return l!==f&&l._point.isClose(f._point,i)&&(l.setHandleIn(f._handleIn),f.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,r=i?1e-7:0,s=e.length-1;s>=0;s--){var a=e[s];!a.hasHandles()&&(!a.hasLength(r)||i&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],r=i._handleIn;i._handleIn=i._handleOut,i._handleOut=r,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new Te(this,t||.25,256,!0),i=e.parts,r=i.length,s=[],a=0;a<r;a++)s.push(new gt(i[a].curve.slice(0,2)));!this._closed&&r>0&&s.push(new gt(i[r-1].curve.slice(6))),this.setSegments(s)},simplify:function(t){var e=new Ue(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,i=t||{},r=i.type||"asymmetric",s=this._segments,a=s.length,h=this._closed;function o(ot,pt){var dt=ot&&ot.index;if(dt!=null){var xt=ot.path;if(xt&&xt!==e)throw new Error(ot._class+" "+dt+" of "+xt+" is not part of "+e);pt&&ot instanceof rt&&dt++}else dt=typeof ot=="number"?ot:pt;return Math.min(dt<0&&h?dt%a:dt<0?dt+a:dt,a-1)}var l=h&&i.from===K&&i.to===K,f=o(i.from,0),_=o(i.to,a-1);if(f>_)if(h)f-=a;else{var v=f;f=_,_=v}if(/^(?:asymmetric|continuous)$/.test(r)){var g=r==="asymmetric",d=Math.min,w=_-f+1,m=w-1,k=l?d(w,4):1,p=k,y=k,c=[];if(h||(p=d(1,f),y=d(1,a-_-1)),m+=p+y,m<=1)return;for(var b=0,C=f-p;b<=m;b++,C++)c[b]=s[(C<0?C+a:C)%a]._point;for(var I=c[0]._x+2*c[1]._x,S=c[0]._y+2*c[1]._y,E=2,L=m-1,N=[I],F=[S],T=[E],V=[],B=[],b=1;b<m;b++){var q=b<L,U=q||g?1:2,W=q?4:g?2:7,J=q?4:g?3:8,et=q?2:g?0:1,it=U/E;E=T[b]=W-it,I=N[b]=J*c[b]._x+et*c[b+1]._x-it*I,S=F[b]=J*c[b]._y+et*c[b+1]._y-it*S}V[L]=N[L]/T[L],B[L]=F[L]/T[L];for(var b=m-2;b>=0;b--)V[b]=(N[b]-V[b+1])/T[b],B[b]=(F[b]-B[b+1])/T[b];V[m]=(3*c[m]._x-V[L])/2,B[m]=(3*c[m]._y-B[L])/2;for(var b=p,at=m-y,C=f;b<=at;b++,C++){var Z=s[C<0?C+a:C],Q=Z._point,st=V[b]-Q._x,ut=B[b]-Q._y;(l||b<at)&&Z.setHandleOut(st,ut),(l||b>p)&&Z.setHandleIn(-st,-ut)}}else for(var b=f;b<=_;b++)s[b<0?b+a:b].smooth(i,!l&&b===f,!l&&b===_)},toShape:function(t){if(!this._closed)return null;var e=this._segments,i,r,s,a;function h(g,d){var w=e[g],m=w.getNext(),k=e[d],p=k.getNext();return w._handleOut.isZero()&&m._handleIn.isZero()&&k._handleOut.isZero()&&p._handleIn.isZero()&&m._point.subtract(w._point).isCollinear(p._point.subtract(k._point))}function o(g){var d=e[g],w=d.getPrevious(),m=d.getNext();return w._handleOut.isZero()&&d._handleIn.isZero()&&d._handleOut.isZero()&&m._handleIn.isZero()&&d._point.subtract(w._point).isOrthogonal(m._point.subtract(d._point))}function l(g){var d=e[g],w=d.getNext(),m=d._handleOut,k=w._handleIn,p=.5522847498307936;if(m.isOrthogonal(k)){var y=d._point,c=w._point,b=new Kt(y,m,!0).intersect(new Kt(c,k,!0),!0);return b&&kt.isZero(m.getLength()/b.subtract(y).getLength()-p)&&kt.isZero(k.getLength()/b.subtract(c).getLength()-p)}return!1}function f(g,d){return e[g]._point.getDistance(e[d]._point)}if(!this.hasHandles()&&e.length===4&&h(0,2)&&h(1,3)&&o(1)?(i=Qt.Rectangle,r=new ht(f(0,3),f(0,1)),a=e[1]._point.add(e[2]._point).divide(2)):e.length===8&&l(0)&&l(2)&&l(4)&&l(6)&&h(1,5)&&h(3,7)?(i=Qt.Rectangle,r=new ht(f(1,6),f(0,3)),s=r.subtract(new ht(f(0,7),f(1,2))).divide(2),a=e[3]._point.add(e[4]._point).divide(2)):e.length===4&&l(0)&&l(1)&&l(2)&&l(3)&&(kt.isZero(f(0,2)-f(1,3))?(i=Qt.Circle,s=f(0,2)/2):(i=Qt.Ellipse,s=new ht(f(2,0)/2,f(3,1)/2)),a=e[1]._point),i){var _=this.getPosition(!0),v=new i({center:_,size:r,radius:s,insert:!1});return v.copyAttributes(this,!0),v._matrix.prepend(this._matrix),v.rotate(a.subtract(_).getAngle()+90),(t===K||t)&&v.insertAbove(this),v}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof Se)return t.base.call(this,e);var i=this.getCurves(),r=e.getCurves(),s=i.length,a=r.length;if(!s||!a)return s==a;for(var h=i[0].getValues(),o=[],l=0,f,_=0,v,g=0;g<a;g++){var k=r[g].getValues();o.push(k);var d=rt.getOverlaps(h,k);if(d){f=!g&&d[0][0]>0?a-1:g,v=d[0][1];break}}for(var w=Math.abs,m=1e-8,k=o[f],p;h&&k;){var d=rt.getOverlaps(h,k);if(d){var y=d[0][0];if(w(y-_)<m){_=d[1][0],_===1&&(h=++l<s?i[l].getValues():null,_=0);var c=d[0][1];if(w(c-v)<m){if(p||(p=[f,c]),v=d[1][1],v===1&&(++f>=a&&(f=0),k=o[f]||r[f].getValues(),v=0),!h)return p[0]===f&&p[1]===v;continue}}}break}return!1},_hitTestSelf:function(t,e,i,r){var s=this,a=this.getStyle(),h=this._segments,o=h.length,l=this._closed,f=e._tolerancePadding,_=f,v,g,d,w,m,k,p=e.stroke&&a.hasStroke(),y=e.fill&&a.hasFill(),c=e.curves,b=p?a.getStrokeWidth()/2:y&&e.tolerance>0||c?0:null;b!==null&&(b>0?(v=a.getStrokeJoin(),g=a.getStrokeCap(),d=a.getMiterLimit(),_=_.add(Pt._getStrokePadding(b,r))):v=g="round");function C(V,B){return t.subtract(V).divide(B).length<=1}function I(V,B,q){if(!e.selected||B.isSelected()){var U=V._point;if(B!==U&&(B=B.add(U)),C(B,_))return new we(q,s,{segment:V,point:B})}}function S(V,B){return(B||e.segments)&&I(V,V._point,"segment")||!B&&e.handles&&(I(V,V._handleIn,"handle-in")||I(V,V._handleOut,"handle-out"))}function E(V){w.add(V)}function L(V){var B=l||V._index>0&&V._index<o-1;if((B?v:g)==="round")return C(V._point,_);if(w=new Pt({internal:!0,closed:!0}),B?V.isSmooth()||Pt._addBevelJoin(V,v,b,d,null,r,E,!0):g==="square"&&Pt._addSquareCap(V,g,b,null,r,E,!0),!w.isEmpty()){var q;return w.contains(t)||(q=w.getNearestLocation(t))&&C(q.getPoint(),f)}}if(e.ends&&!e.segments&&!l){if(k=S(h[0],!0)||S(h[o-1],!0))return k}else if(e.segments||e.handles){for(var N=0;N<o;N++)if(k=S(h[N]))return k}if(b!==null){if(m=this.getNearestLocation(t),m){var F=m.getTime();F===0||F===1&&o>1?L(m.getSegment())||(m=null):C(m.getPoint(),_)||(m=null)}if(!m&&v==="miter"&&o>1)for(var N=0;N<o;N++){var T=h[N];if(t.getDistance(T._point)<=d*b&&L(T)){m=T.getLocation();break}}}return!m&&y&&this._contains(t)||m&&!p&&!c?new we("fill",this):m?new we(p?"stroke":"curve",this,{location:m,point:m.getPoint()}):null}},R.each(rt._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=D.read(arguments),e=this.getCurves(),i=0,r=e.length;i<r;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var e=this.getCurves(),i=0,r=0,s=e.length;r<s;r++){var a=i,h=e[r];if(i+=h.getLength(),i>t)return h.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new be(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=D.read(arguments);if(t.isZero())return[];for(var e=[],i=0,r=this.getCurves(),s=0,a=r.length;s<a;s++){for(var h=r[s],o=h.getTimesWithTangent(t),l=0,f=o.length;l<f;l++){var _=i+h.getOffsetAtTime(o[l]);e.indexOf(_)<0&&e.push(_)}i+=h.length}return e}}),new function(){function t(i,r,s,a){if(a<=0)return;var h=a/2,o=a-2,l=h-1,f=new Array(6),_,v;function g(y){var c=f[y],b=f[y+1];(_!=c||v!=b)&&(i.beginPath(),i.moveTo(_,v),i.lineTo(c,b),i.stroke(),i.beginPath(),i.arc(c,b,h,0,Math.PI*2,!0),i.fill())}for(var d=0,w=r.length;d<w;d++){var m=r[d],k=m._selection;if(m._transformCoordinates(s,f),_=f[0],v=f[1],k&2&&g(2),k&4&&g(4),i.fillRect(_-h,v-h,a,a),o>0&&!(k&1)){var p=i.fillStyle;i.fillStyle="#ffffff",i.fillRect(_-l,v-l,o,o),i.fillStyle=p}}}function e(i,r,s){var a=r._segments,h=a.length,o=new Array(6),l=!0,f,_,v,g,d,w,m,k;function p(c){if(s)c._transformCoordinates(s,o),f=o[0],_=o[1];else{var b=c._point;f=b._x,_=b._y}if(l)i.moveTo(f,_),l=!1;else{if(s)d=o[2],w=o[3];else{var C=c._handleIn;d=f+C._x,w=_+C._y}d===f&&w===_&&m===v&&k===g?i.lineTo(f,_):i.bezierCurveTo(m,k,d,w,f,_)}if(v=f,g=_,s)m=o[4],k=o[5];else{var C=c._handleOut;m=v+C._x,k=g+C._y}}for(var y=0;y<h;y++)p(a[y]);r._closed&&h>0&&p(a[0])}return{_draw:function(i,r,s,a){var h=r.dontStart,o=r.dontFinish||r.clip,l=this.getStyle(),f=l.hasFill(),_=l.hasStroke(),v=l.getDashArray(),g=!lt.support.nativeDash&&_&&v&&v.length;h||i.beginPath(),(f||_&&!g||o)&&(e(i,this,a),this._closed&&i.closePath());function d(c){return v[(c%g+g)%g]}if(!o&&(f||_)&&(this._setStyles(i,r,s),f&&(i.fill(l.getFillRule()),i.shadowColor="rgba(0,0,0,0)"),_)){if(g){h||i.beginPath();for(var w=new Te(this,.25,32,!1,a),m=w.length,k=-l.getDashOffset(),p,y=0;k>0;)k-=d(y--)+d(y--);for(;k<m;)p=k+d(y++),(k>0||p>0)&&w.drawPart(i,Math.max(k,0),Math.max(p,0)),k=p+d(y++)}i.stroke()}},_drawSelected:function(i,r){i.beginPath(),e(i,this,r),i.stroke(),t(i,this._segments,r,lt.settings.handleSize)}}},new function(){function t(e){var i=e._segments;if(!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return{moveTo:function(){var e=this._segments;e.length===1&&this.removeSegment(0),e.length||this._add([new gt(D.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new gt(D.read(arguments))])},cubicCurveTo:function(){var e=arguments,i=D.read(e),r=D.read(e),s=D.read(e),a=t(this);a.setHandleOut(i.subtract(a._point)),this._add([new gt(s,r.subtract(s))])},quadraticCurveTo:function(){var e=arguments,i=D.read(e),r=D.read(e),s=t(this)._point;this.cubicCurveTo(i.add(s.subtract(i).multiply(1/3)),i.add(r.subtract(i).multiply(1/3)),r)},curveTo:function(){var e=arguments,i=D.read(e),r=D.read(e),s=R.pick(R.read(e),.5),a=1-s,h=t(this)._point,o=i.subtract(h.multiply(a*a)).subtract(r.multiply(s*s)).divide(2*s*a);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(o,r)},arcTo:function(){var e=arguments,i=Math.abs,r=Math.sqrt,s=t(this),a=s._point,h=D.read(e),o,l=R.peek(e),f=R.pick(l,!0),_,v,g,d;if(typeof f=="boolean")var w=a.add(h).divide(2),o=w.add(w.subtract(a).rotate(f?-90:90));else if(R.remain(e)<=2)o=h,h=D.read(e);else if(!a.equals(h)){var m=ht.read(e),k=kt.isZero;if(k(m.width)||k(m.height))return this.lineTo(h);var p=R.read(e),f=!!R.read(e),y=!!R.read(e),w=a.add(h).divide(2),c=a.subtract(w).rotate(-p),b=c.x,C=c.y,I=i(m.width),S=i(m.height),E=I*I,L=S*S,N=b*b,F=C*C,T=r(N/E+F/L);if(T>1&&(I*=T,S*=T,E=I*I,L=S*S),T=(E*L-E*F-L*N)/(E*F+L*N),i(T)<1e-12&&(T=0),T<0)throw new Error("Cannot create an arc with the given arguments");_=new D(I*C/S,-S*b/I).multiply((y===f?-1:1)*r(T)).rotate(p).add(w),d=new It().translate(_).rotate(p).scale(I,S),g=d._inverseTransform(a),v=g.getDirectedAngle(d._inverseTransform(h)),!f&&v>0?v-=360:f&&v<0&&(v+=360)}if(o){var V=new Kt(a.add(o).divide(2),o.subtract(a).rotate(90),!0),B=new Kt(o.add(h).divide(2),h.subtract(o).rotate(90),!0),q=new Kt(a,h),U=q.getSide(o);if(_=V.intersect(B,!0),!_){if(!U)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}g=a.subtract(_),v=g.getDirectedAngle(h.subtract(_));var W=q.getSide(_,!0);W===0?v=U*i(v):U===W&&(v+=v<0?360:-360)}if(v){for(var J=1e-5,et=i(v),it=et>=360?4:Math.ceil((et-J)/90),at=v/it,Z=at*Math.PI/360,Q=4/3*Math.sin(Z)/(1+Math.cos(Z)),st=[],ut=0;ut<=it;ut++){var c=h,ot=null;if(ut<it&&(ot=g.rotate(90).multiply(Q),d?(c=d._transformPoint(g),ot=d._transformPoint(g.add(ot)).subtract(c)):c=_.add(g)),!ut)s.setHandleOut(ot);else{var pt=g.rotate(-90).multiply(Q);d&&(pt=d._transformPoint(g.add(pt)).subtract(c)),st.push(new gt(c,pt,ot))}g=g.rotate(at)}this._add(st)}},lineBy:function(){var e=D.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=arguments,i=D.read(e),r=D.read(e),s=R.read(e),a=t(this)._point;this.curveTo(a.add(i),a.add(r),s)},cubicCurveBy:function(){var e=arguments,i=D.read(e),r=D.read(e),s=D.read(e),a=t(this)._point;this.cubicCurveTo(a.add(i),a.add(r),a.add(s))},quadraticCurveBy:function(){var e=arguments,i=D.read(e),r=D.read(e),s=t(this)._point;this.quadraticCurveTo(s.add(i),s.add(r))},arcBy:function(){var e=arguments,i=t(this)._point,r=i.add(D.read(e)),s=R.pick(R.peek(e),!0);typeof s=="boolean"?this.arcTo(r,s):this.arcTo(r,i.add(D.read(e)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return Pt[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,r,s,a){var h=t[0];if(!h)return new ft;var o=new Array(6),l=h._transformCoordinates(r,new Array(6)),f=l.slice(0,2),_=f.slice(),v=new Array(2);function g(m){m._transformCoordinates(r,o);for(var k=0;k<2;k++)rt._addBounds(l[k],l[k+4],o[k+2],o[k],k,a?a[k]:0,f,_,v);var p=l;l=o,o=p}for(var d=1,w=t.length;d<w;d++)g(t[d]);return e&&g(h),new ft(f[0],f[1],_[0]-f[0],_[1]-f[1])},getStrokeBounds:function(t,e,i,r,s){var a=i.getStyle(),h=a.hasStroke(),o=a.getStrokeWidth(),l=h&&i._getStrokeMatrix(r,s),f=h&&Pt._getStrokePadding(o,l),_=Pt.getBounds(t,e,i,r,s,f);if(!h)return _;var v=o/2,g=a.getStrokeJoin(),d=a.getStrokeCap(),w=a.getMiterLimit(),m=new ft(new ht(f));function k(I){_=_.include(I)}function p(I){_=_.unite(m.setCenter(I._point.transform(r)))}function y(I,S){S==="round"||I.isSmooth()?p(I):Pt._addBevelJoin(I,S,v,w,r,l,k)}function c(I,S){S==="round"?p(I):Pt._addSquareCap(I,S,v,r,l,k)}var b=t.length-(e?0:1);if(b>0){for(var C=1;C<b;C++)y(t[C],g);e?y(t[0],g):(c(t[0],d),c(t[t.length-1],d))}return _},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new D(t,0).transform(e),r=new D(0,t).transform(e),s=i.getAngleInRadians(),a=i.getLength(),h=r.getLength(),o=Math.sin(s),l=Math.cos(s),f=Math.tan(s),_=Math.atan2(h*f,a),v=Math.atan2(h,f*a);return[Math.abs(a*Math.cos(_)*l+h*Math.sin(_)*o),Math.abs(h*Math.sin(v)*l+a*Math.cos(v)*o)]},_addBevelJoin:function(t,e,i,r,s,a,h,o){var l=t.getCurve(),f=l.getPrevious(),_=l.getPoint1().transform(s),v=f.getNormalAtTime(1).multiply(i).transform(a),g=l.getNormalAtTime(0).multiply(i).transform(a),d=v.getDirectedAngle(g);if((d<0||d>=180)&&(v=v.negate(),g=g.negate()),o&&h(_),h(_.add(v)),e==="miter"){var w=new Kt(_.add(v),new D(-v.y,v.x),!0).intersect(new Kt(_.add(g),new D(-g.y,g.x),!0),!0);w&&_.getDistance(w)<=r*i&&h(w)}h(_.add(g))},_addSquareCap:function(t,e,i,r,s,a,h){var o=t._point.transform(r),l=t.getLocation(),f=l.getNormal().multiply(l.getTime()===0?i:-i).transform(s);e==="square"&&(h&&(a(o.subtract(f)),a(o.add(f))),o=o.add(f.rotate(-90))),a(o.add(f)),a(o.subtract(f))},getHandleBounds:function(t,e,i,r,s){var a=i.getStyle(),h=s.stroke&&a.hasStroke(),o,l;if(h){var f=i._getStrokeMatrix(r,s),_=a.getStrokeWidth()/2,v=_;a.getStrokeJoin()==="miter"&&(v=_*a.getMiterLimit()),a.getStrokeCap()==="square"&&(v=Math.max(v,_*Math.SQRT2)),o=Pt._getStrokePadding(_,f),l=Pt._getStrokePadding(v,f)}for(var g=new Array(6),d=1/0,w=-d,m=d,k=w,p=0,y=t.length;p<y;p++){var c=t[p];c._transformCoordinates(r,g);for(var b=0;b<6;b+=2){var C=b?o:l,I=C?C[0]:0,S=C?C[1]:0,E=g[b],L=g[b+1],N=E-I,F=E+I,T=L-S,V=L+S;N<d&&(d=N),F>w&&(w=F),T<m&&(m=T),V>k&&(k=V)}}return new ft(d,m,w-d,k-m)}}});Pt.inject({statics:new function(){var t=.5522847498307936,e=[new gt([-1,0],[0,t],[0,-t]),new gt([0,-1],[-t,0],[t,0]),new gt([1,0],[0,-t],[0,t]),new gt([0,1],[t,0],[-t,0])];function i(s,a,h){var o=R.getNamed(h),l=new Pt(o&&(o.insert==!0?A.INSERT:o.insert==!1?A.NO_INSERT:null));return l._add(s),l._closed=a,l.set(o,A.INSERT)}function r(s,a,h){for(var o=new Array(4),l=0;l<4;l++){var f=e[l];o[l]=new gt(f._point.multiply(a).add(s),f._handleIn.multiply(a),f._handleOut.multiply(a))}return i(o,!0,h)}return{Line:function(){var s=arguments;return i([new gt(D.readNamed(s,"from")),new gt(D.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,a=D.readNamed(s,"center"),h=R.readNamed(s,"radius");return r(a,new ht(h),s)},Rectangle:function(){var s=arguments,a=ft.readNamed(s,"rectangle"),h=ht.readNamed(s,"radius",0,{readNull:!0}),o=a.getBottomLeft(!0),l=a.getTopLeft(!0),f=a.getTopRight(!0),_=a.getBottomRight(!0),v;if(!h||h.isZero())v=[new gt(o),new gt(l),new gt(f),new gt(_)];else{h=ht.min(h,a.getSize(!0).divide(2));var g=h.width,d=h.height,w=g*t,m=d*t;v=[new gt(o.add(g,0),null,[-w,0]),new gt(o.subtract(0,d),[0,m]),new gt(l.add(0,d),null,[0,-m]),new gt(l.add(g,0),[-w,0],null),new gt(f.subtract(g,0),null,[w,0]),new gt(f.add(0,d),[0,-m],null),new gt(_.subtract(0,d),null,[0,m]),new gt(_.subtract(g,0),[w,0])]}return i(v,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,a=Qt._readEllipse(s);return r(a.center,a.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,a=D.readNamed(s,"from"),h=D.readNamed(s,"through"),o=D.readNamed(s,"to"),l=R.getNamed(s),f=new Pt(l&&l.insert==!1&&A.NO_INSERT);return f.moveTo(a),f.arcTo(h,o),f.set(l)},RegularPolygon:function(){for(var s=arguments,a=D.readNamed(s,"center"),h=R.readNamed(s,"sides"),o=R.readNamed(s,"radius"),l=360/h,f=h%3===0,_=new D(0,f?-o:o),v=f?-1:.5,g=new Array(h),d=0;d<h;d++)g[d]=new gt(a.add(_.rotate((d+v)*l)));return i(g,!0,s)},Star:function(){for(var s=arguments,a=D.readNamed(s,"center"),h=R.readNamed(s,"points")*2,o=R.readNamed(s,"radius1"),l=R.readNamed(s,"radius2"),f=360/h,_=new D(0,-1),v=new Array(h),g=0;g<h;g++)v[g]=new gt(a.add(_.rotate(f*g).multiply(g%2?l:o)));return i(v,!0,s)}}}});var Se=ce.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||(typeof e=="string"?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function t(e,i){var r=i,s=r[0];s&&typeof s[0]=="number"&&(r=[r]);for(var a=i.length-1;a>=0;a--){var h=r[a];r===i&&!(h instanceof Pt)&&(r=R.slice(r)),Array.isArray(h)?r[a]=new Pt({segments:h,insert:!1}):h instanceof Se&&(r.splice.apply(r,[a,1].concat(h.removeChildren())),h.remove())}return t.base.call(this,e,r)},reduce:function t(e){for(var i=this._children,r=i.length-1;r>=0;r--){var s=i[r].reduce(e);s.isEmpty()&&s.remove()}if(!i.length){var s=new Pt(A.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,r=e.length;i<r;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,r=t.length;i<r;i++)R.push(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,r=t.length;i<r;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,r=t.length;i<r;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,r=[],s=0,a=i.length;s<a;s++){var h=i[s],o=h._matrix;r.push(h.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return r.join("")},_hitTestChildren:function t(e,i,r){return t.base.call(this,e,i.class===Pt||i.type==="path"?i:R.set({},i,{fill:!1}),r)},_draw:function(t,e,i,r){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,h=s.length;a<h;a++)s[a].draw(t,e,r);if(!e.clip){this._setStyles(t,e,i);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var r=this._children,s=0,a=r.length;s<a;s++){var h=r[s],o=h._matrix;i[h._id]||h._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(e,i){var r=e._children;if(i&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return R.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new Pt(A.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),r=D.read(arguments);this.moveTo(i?r.add(i._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},R.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i=this._children,r,s=0,a=i.length;s<a;s++)r=i[s][t](e)||r;return r}},{}));ce.inject(new function(){var t=Math.min,e=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(p){return p._children||[p]}function a(p,y){var c=p.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(y){for(var b=s(c),C=0,I=b.length;C<I;C++){var p=b[C];!p._closed&&!p.isEmpty()&&(p.closePath(1e-12),p.getFirstSegment().setHandleIn(0,0),p.getLastSegment().setHandleOut(0,0))}c=c.resolveCrossings().reorient(c.getFillRule()==="nonzero",!0)}return c}function h(p,y,c,b,C){var I=new Se(A.NO_INSERT);return I.addChildren(p,!0),I=I.reduce({simplify:y}),C&&C.insert==!1||I.insertAbove(b&&c.isSibling(b)&&c.getIndex()<b.getIndex()?b:c),I.copyAttributes(c,!0),I}function o(p){return p.hasOverlap()||p.isCrossing()}function l(p,y,c,b){if(b&&(b.trace==!1||b.stroke)&&/^(subtract|intersect)$/.test(c))return f(p,y,c);var C=a(p,!0),I=y&&p!==y&&a(y,!0),S=r[c];S[c]=!0,I&&(S.subtract||S.exclude)^(I.isClockwise()^C.isClockwise())&&I.reverse();var E=d(be.expand(C.getIntersections(I,o))),L=s(C),N=I&&s(I),F=[],T=[],V;function B(ot){for(var pt=0,dt=ot.length;pt<dt;pt++){var xt=ot[pt];R.push(F,xt._segments),R.push(T,xt.getCurves()),xt._overlapsOnly=!0}}function q(ot){for(var pt=[],dt=0,xt=ot&&ot.length;dt<xt;dt++)pt.push(T[ot[dt]]);return pt}if(E.length){B(L),N&&B(N);for(var U=new Array(T.length),W=0,J=T.length;W<J;W++)U[W]=T[W].getValues();for(var et=ye.findCurveBoundsCollisions(U,U,0,!0),it={},W=0;W<T.length;W++){var at=T[W],Z=at._path._id,Q=it[Z]=it[Z]||{};Q[at.getIndex()]={hor:q(et[W].hor),ver:q(et[W].ver)}}for(var W=0,J=E.length;W<J;W++)m(E[W]._segment,C,I,it,S);for(var W=0,J=F.length;W<J;W++){var st=F[W],ut=st._intersection;st._winding||m(st,C,I,it,S),ut&&ut._overlap||(st._path._overlapsOnly=!1)}V=k(F,S)}else V=g(N?L.concat(N):L.slice(),function(ot){return!!S[ot]});return h(V,!0,p,y,b)}function f(p,y,c){var b=a(p),C=a(y),I=b.getIntersections(C,o),S=c==="subtract",E=c==="divide",L={},N=[];function F(B){if(!L[B._id]&&(E||C.contains(B.getPointAt(B.getLength()/2))^S))return N.unshift(B),L[B._id]=!0}for(var T=I.length-1;T>=0;T--){var V=I[T].split();V&&(F(V)&&V.getFirstSegment().setHandleIn(0,0),b.getLastSegment().setHandleOut(0,0))}return F(b),h(N,!1,p,y)}function _(p,y){for(var c=p;c;){if(c===y)return;c=c._previous}for(;p._next&&p._next!==y;)p=p._next;if(!p._next){for(;y._previous;)y=y._previous;p._next=y,y._previous=p}}function v(p){for(var y=p.length-1;y>=0;y--)p[y].clearHandles()}function g(p,y,c){var b=p&&p.length;if(b){var C=R.each(p,function(et,it){this[et._id]={container:null,winding:et.isClockwise()?1:-1,index:it}},{}),I=p.slice().sort(function(et,it){return i(it.getArea())-i(et.getArea())}),S=I[0],E=ye.findItemBoundsCollisions(I,null,kt.GEOMETRIC_EPSILON);c==null&&(c=S.isClockwise());for(var L=0;L<b;L++){var N=I[L],F=C[N._id],T=0,V=E[L];if(V){for(var B=null,q=V.length-1;q>=0;q--)if(V[q]<L){B=B||N.getInteriorPoint();var U=I[V[q]];if(U.contains(B)){var W=C[U._id];T=W.winding,F.winding+=T,F.container=W.exclude?W.container:U;break}}}if(y(F.winding)===y(T))F.exclude=!0,p[F.index]=null;else{var J=F.container;N.setClockwise(J?!J.isClockwise():c)}}}return p}function d(p,y,c){var b=y&&[],C=1e-8,I=1-C,S=!1,E=c||[],L=c&&{},N,F,T;function V(pt){return pt._path._id+"."+pt._segment1._index}for(var B=(c&&c.length)-1;B>=0;B--){var q=c[B];q._path&&(L[V(q)]=!0)}for(var B=p.length-1;B>=0;B--){var U=p[B],W=U._time,J=W,et=y&&!y(U),q=U._curve,it;if(q&&(q!==F?(S=!q.hasHandles()||L&&L[V(q)],N=[],T=null,F=q):T>=C&&(W/=T)),et){N&&N.push(U);continue}else y&&b.unshift(U);if(T=J,W<C)it=q._segment1;else if(W>I)it=q._segment2;else{var at=q.divideAtTime(W,!0);S&&E.push(q,at),it=at._segment1;for(var Z=N.length-1;Z>=0;Z--){var Q=N[Z];Q._time=(Q._time-W)/(1-W)}}U._setSegment(it);var st=it._intersection,ut=U._intersection;if(st){_(st,ut);for(var ot=st;ot;)_(ot._intersection,st),ot=ot._next}else it._intersection=ut}return c||v(E),b||p}function w(p,y,c,b,C){var I=Array.isArray(y)?y:y[c?"hor":"ver"],S=c?1:0,E=S^1,L=[p.x,p.y],N=L[S],F=L[E],T=1e-9,V=1e-6,B=N-T,q=N+T,U=0,W=0,J=0,et=0,it=!1,at=!1,Z=1,Q=[],st,ut;function ot(Ot){var Ht=Ot[E+0],se=Ot[E+6];if(!(F<t(Ht,se)||F>e(Ht,se))){var Jt=Ot[S+0],ae=Ot[S+2],Ce=Ot[S+4],de=Ot[S+6];if(Ht===se){(Jt<q&&de>B||de<q&&Jt>B)&&(it=!0);return}var pe=F===Ht?0:F===se||B>e(Jt,ae,Ce,de)||q<t(Jt,ae,Ce,de)?1:rt.solveCubic(Ot,E,F,Q,0,1)>0?Q[0]:1,ie=pe===0?Jt:pe===1?de:rt.getPoint(Ot,pe)[c?"y":"x"],mt=Ht>se?1:-1,Ae=st[E]>st[E+6]?1:-1,ge=st[S+6];return F!==Ht?(ie<B?J+=mt:ie>q?et+=mt:it=!0,ie>N-V&&ie<N+V&&(Z/=2)):(mt!==Ae?Jt<B?J+=mt:Jt>q&&(et+=mt):Jt!=ge&&(ge<q&&ie>q?(et+=mt,it=!0):ge>B&&ie<B&&(J+=mt,it=!0)),Z/=4),st=Ot,!C&&ie>B&&ie<q&&rt.getTangent(Ot,pe)[c?"x":"y"]===0&&w(p,y,!c,b,!0)}}function pt(Ot){var Ht=Ot[E+0],se=Ot[E+2],Jt=Ot[E+4],ae=Ot[E+6];if(F<=e(Ht,se,Jt,ae)&&F>=t(Ht,se,Jt,ae)){for(var Ce=Ot[S+0],de=Ot[S+2],pe=Ot[S+4],ie=Ot[S+6],mt=B>e(Ce,de,pe,ie)||q<t(Ce,de,pe,ie)?[Ot]:rt.getMonoCurves(Ot,c),Ae,ge=0,Ge=mt.length;ge<Ge;ge++)if(Ae=ot(mt[ge]))return Ae}}for(var dt=0,xt=I.length;dt<xt;dt++){var tt=I[dt],ct=tt._path,Zt=tt.getValues(),Yt;if((!dt||I[dt-1]._path!==ct)&&(st=null,ct._closed||(ut=rt.getValues(ct.getLastCurve().getSegment2(),tt.getSegment1(),null,!b),ut[E]!==ut[E+6]&&(st=ut)),!st)){st=Zt;for(var ee=ct.getLastCurve();ee&&ee!==tt;){var zt=ee.getValues();if(zt[E]!==zt[E+6]){st=zt;break}ee=ee.getPrevious()}}if(Yt=pt(Zt))return Yt;if(dt+1===xt||I[dt+1]._path!==ct){if(ut&&(Yt=pt(ut)))return Yt;it&&!J&&!et&&(J=et=ct.isClockwise(b)^c?1:-1),U+=J,W+=et,J=et=0,it&&(at=!0,it=!1),ut=null}}return U=i(U),W=i(W),{winding:e(U,W),windingL:U,windingR:W,quality:Z,onPath:at}}function m(p,y,c,b,C){var I=[],S=p,E=0,T;do{var L=p.getCurve();if(L){var N=L.getLength();I.push({segment:p,curve:L,length:N}),E+=N}p=p.getNext()}while(p&&!p._intersection&&p!==S);for(var F=[.5,.25,.75],T={winding:0,quality:-1},V=.001,B=1-V,q=0;q<F.length&&T.quality<.5;q++)for(var N=E*F[q],U=0,W=I.length;U<W;U++){var J=I[U],et=J.length;if(N<=et){var L=J.curve,it=L._path,at=it._parent,Z=at instanceof Se?at:it,Q=kt.clamp(L.getTimeAt(N),V,B),st=L.getPointAtTime(Q),ut=i(L.getTangentAtTime(Q).y)<Math.SQRT1_2,ot=null;if(C.subtract&&c){var pt=Z===y?c:y,dt=pt._getWinding(st,ut,!0);if(Z===y&&dt.winding||Z===c&&!dt.winding){if(dt.quality<1)continue;ot={winding:0,quality:1}}}ot=ot||w(st,b[it._id][L.getIndex()],ut,!0),ot.quality>T.quality&&(T=ot);break}N-=et}for(var U=I.length-1;U>=0;U--)I[U].segment._winding=T}function k(p,y){var c=[],b;function C(xt){var tt;return!!(xt&&!xt._visited&&(!y||y[(tt=xt._winding||{}).winding]&&!(y.unite&&tt.winding===2&&tt.windingL&&tt.windingR)))}function I(xt){if(xt){for(var tt=0,ct=b.length;tt<ct;tt++)if(xt===b[tt])return!0}return!1}function S(xt){for(var tt=xt._segments,ct=0,Zt=tt.length;ct<Zt;ct++)tt[ct]._visited=!0}function E(xt,tt){var ct=xt._intersection,Zt=ct,Yt=[];tt&&(b=[xt]);function ee(zt,Ot){for(;zt&&zt!==Ot;){var Ht=zt._segment,se=Ht&&Ht._path;if(se){var Jt=Ht.getNext()||se.getFirstSegment(),ae=Jt._intersection;Ht!==xt&&(I(Ht)||I(Jt)||Jt&&C(Ht)&&(C(Jt)||ae&&C(ae._segment)))&&Yt.push(Ht),tt&&b.push(Ht)}zt=zt._next}}if(ct){for(ee(ct);ct&&ct._previous;)ct=ct._previous;ee(ct,Zt)}return Yt}p.sort(function(xt,tt){var ct=xt._intersection,Zt=tt._intersection,Yt=!!(ct&&ct._overlap),ee=!!(Zt&&Zt._overlap),zt=xt._path,Ot=tt._path;return Yt^ee?Yt?1:-1:!ct^!Zt?ct?1:-1:zt!==Ot?zt._id-Ot._id:xt._index-tt._index});for(var L=0,N=p.length;L<N;L++){var F=p[L],T=C(F),V=null,B=!1,q=!0,U=[],W,J,et;if(T&&F._path._overlapsOnly){var it=F._path,at=F._intersection._segment._path;it.compare(at)&&(it.getArea()&&c.push(it.clone(!1)),S(it),S(at),T=!1)}for(;T;){var Z=!V,Q=E(F,Z),st=Q.shift(),B=!Z&&(I(F)||I(st)),ut=!B&&st;if(Z&&(V=new Pt(A.NO_INSERT),W=null),B){(F.isFirst()||F.isLast())&&(q=F._path._closed),F._visited=!0;break}if(ut&&W&&(U.push(W),W=null),W||(ut&&Q.push(F),W={start:V._segments.length,crossings:Q,visited:J=[],handleIn:et}),ut&&(F=st),!C(F)){V.removeSegments(W.start);for(var ot=0,pt=J.length;ot<pt;ot++)J[ot]._visited=!1;J.length=0;do F=W&&W.crossings.shift(),(!F||!F._path)&&(F=null,W=U.pop(),W&&(J=W.visited,et=W.handleIn));while(W&&!C(F));if(!F)break}var dt=F.getNext();V.add(new gt(F._point,et,dt&&F._handleOut)),F._visited=!0,J.push(F),F=dt||F._path.getFirstSegment(),et=dt&&dt._handleIn}B&&(q&&(V.getFirstSegment().setHandleIn(et),V.setClosed(q)),V.getArea()!==0&&c.push(V))}return c}return{_getWinding:function(p,y,c){return w(p,this.getCurves(),y,c)},unite:function(p,y){return l(this,p,"unite",y)},intersect:function(p,y){return l(this,p,"intersect",y)},subtract:function(p,y){return l(this,p,"subtract",y)},exclude:function(p,y){return l(this,p,"exclude",y)},divide:function(p,y){return y&&(y.trace==!1||y.stroke)?f(this,p,"divide"):h([this.subtract(p,y),this.intersect(p,y)],!0,this,p,y)},resolveCrossings:function(){var p=this._children,y=p||[this];function c(W,J){var et=W&&W._intersection;return et&&et._overlap&&et._path===J}var b=!1,C=!1,I=this.getIntersections(null,function(W){return W.hasOverlap()&&(b=!0)||W.isCrossing()&&(C=!0)}),S=b&&C&&[];if(I=be.expand(I),b)for(var E=d(I,function(W){return W.hasOverlap()},S),L=E.length-1;L>=0;L--){var N=E[L],F=N._path,T=N._segment,V=T.getPrevious(),B=T.getNext();c(V,F)&&c(B,F)&&(T.remove(),V._handleOut._set(0,0),B._handleIn._set(0,0),V!==T&&!V.getCurve().hasLength()&&(B._handleIn.set(V._handleIn),V.remove()))}C&&(d(I,b&&function(W){var J=W.getCurve(),et=W.getSegment(),it=W._intersection,at=it._curve,Z=it._segment;if(J&&at&&J._path&&at._path)return!0;et&&(et._intersection=null),Z&&(Z._intersection=null)},S),S&&v(S),y=k(R.each(y,function(W){R.push(this,W._segments)},[])));var q=y.length,U;return q>1&&p?(y!==p&&this.setChildren(y),U=this):q===1&&!p&&(y[0]!==this&&this.setSegments(y[0].removeSegments()),U=this),U||(U=new Se(A.NO_INSERT),U.addChildren(y),U=U.reduce(),U.copyAttributes(this),this.replaceWith(U)),U},reorient:function(p,y){var c=this._children;return c&&c.length?this.setChildren(g(this.removeChildren(),function(b){return!!(p?b:b&1)},y)):y!==K&&this.setClockwise(y),this},getInteriorPoint:function(){var p=this.getBounds(),y=p.getCenter(!0);if(!this.contains(y)){for(var c=this.getCurves(),b=y.y,C=[],I=[],S=0,E=c.length;S<E;S++){var L=c[S].getValues(),N=L[1],F=L[3],T=L[5],V=L[7];if(b>=t(N,F,T,V)&&b<=e(N,F,T,V))for(var B=rt.getMonoCurves(L),q=0,U=B.length;q<U;q++){var W=B[q],J=W[1],et=W[7];if(J!==et&&(b>=J&&b<=et||b>=et&&b<=J)){var it=b===J?W[0]:b===et?W[6]:rt.solveCubic(W,1,b,I,0,1)===1?rt.getPoint(W,I[0]).x:(W[0]+W[6])/2;C.push(it)}}}C.length>1&&(C.sort(function(at,Z){return at-Z}),y.x=(C[0]+C[1])/2)}return y}}});var Te=R.extend({_class:"PathFlattener",initialize:function(t,e,i,r,s){var a=[],h=[],o=0,l=1/(i||32),f=t._segments,_=f[0],v;function g(k,p){var y=rt.getValues(k,p,s);a.push(y),d(y,k._index,0,1)}function d(k,p,y,c){if(c-y>l&&!(r&&rt.isStraight(k))&&!rt.isFlatEnough(k,e||.25)){var b=rt.subdivide(k,.5),C=(y+c)/2;d(b[0],p,y,C),d(b[1],p,C,c)}else{var I=k[6]-k[0],S=k[7]-k[1],E=Math.sqrt(I*I+S*S);E>0&&(o+=E,h.push({offset:o,curve:k,index:p,time:c}))}}for(var w=1,m=f.length;w<m;w++)v=f[w],g(_,v),_=v;t._closed&&g(v||_,f[0]),this.curves=a,this.parts=h,this.length=o,this.index=0},_get:function(t){for(var e=this.parts,i=e.length,r,s=this.index;r=s,!(!s||e[--s].offset<t););for(;r<i;r++){var a=e[r];if(a.offset>=t){this.index=r;var h=e[r-1],o=h&&h.index===a.index?h.time:0,l=h?h.offset:0;return{index:a.index,time:o+(a.time-o)*(t-l)/(a.offset-l)}}}return{index:e[i-1].index,time:1}},drawPart:function(t,e,i){for(var r=this._get(e),s=this._get(i),a=r.index,h=s.index;a<=h;a++){var o=rt.getPart(this.curves[a],a===r.index?r.time:0,a===s.index?s.time:1);a===r.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},R.each(rt._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return rt[t](this.curves[i.index],i.time)}},{})),Ue=R.extend({initialize:function(t){for(var e=this.points=[],i=t._segments,r=t._closed,s=0,a,h=i.length;s<h;s++){var o=i[s].point;(!a||!a.equals(o))&&e.push(a=o.clone())}r&&(e.unshift(e[e.length-1]),e.push(e[1])),this.closed=r},fit:function(t){var e=this.points,i=e.length,r=null;return i>0&&(r=[new gt(e[0])],i>1&&(this.fitCubic(r,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,i,r,s,a){var h=this.points;if(r-i===1){var o=h[i],l=h[r],f=o.getDistance(l)/3;this.addCurve(t,[o,o.add(s.normalize(f)),l.add(a.normalize(f)),l]);return}for(var _=this.chordLengthParameterize(i,r),v=Math.max(e,e*e),g,d=!0,w=0;w<=4;w++){var m=this.generateBezier(i,r,_,s,a),k=this.findMaxError(i,r,m,_);if(k.error<e&&d){this.addCurve(t,m);return}if(g=k.index,k.error>=v)break;d=this.reparameterize(i,r,_,m),v=k.error}var p=h[g-1].subtract(h[g+1]);this.fitCubic(t,e,i,g,s,p),this.fitCubic(t,e,g,r,p.negate(),a)},addCurve:function(t,e){var i=t[t.length-1];i.setHandleOut(e[1].subtract(e[0])),t.push(new gt(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,r,s){for(var a=1e-12,h=Math.abs,o=this.points,l=o[t],f=o[e],_=[[0,0],[0,0]],v=[0,0],g=0,d=e-t+1;g<d;g++){var w=i[g],m=1-w,k=3*w*m,p=m*m*m,y=k*m,c=k*w,b=w*w*w,C=r.normalize(y),I=s.normalize(c),S=o[t+g].subtract(l.multiply(p+y)).subtract(f.multiply(c+b));_[0][0]+=C.dot(C),_[0][1]+=C.dot(I),_[1][0]=_[0][1],_[1][1]+=I.dot(I),v[0]+=C.dot(S),v[1]+=I.dot(S)}var E=_[0][0]*_[1][1]-_[1][0]*_[0][1],L,N;if(h(E)>a){var F=_[0][0]*v[1]-_[1][0]*v[0],T=v[0]*_[1][1]-v[1]*_[0][1];L=T/E,N=F/E}else{var V=_[0][0]+_[0][1],B=_[1][0]+_[1][1];L=N=h(V)>a?v[0]/V:h(B)>a?v[1]/B:0}var q=f.getDistance(l),U=a*q,W,J;if(L<U||N<U)L=N=q/3;else{var et=f.subtract(l);W=r.normalize(L),J=s.normalize(N),W.dot(et)-J.dot(et)>q*q&&(L=N=q/3,W=J=null)}return[l,l.add(W||r.normalize(L)),f.add(J||s.normalize(N)),f]},reparameterize:function(t,e,i,r){for(var s=t;s<=e;s++)i[s-t]=this.findRoot(r,this.points[s],i[s-t]);for(var s=1,a=i.length;s<a;s++)if(i[s]<=i[s-1])return!1;return!0},findRoot:function(t,e,i){for(var r=[],s=[],a=0;a<=2;a++)r[a]=t[a+1].subtract(t[a]).multiply(3);for(var a=0;a<=1;a++)s[a]=r[a+1].subtract(r[a]).multiply(2);var h=this.evaluate(3,t,i),o=this.evaluate(2,r,i),l=this.evaluate(1,s,i),f=h.subtract(e),_=o.dot(o)+f.dot(l);return kt.isMachineZero(_)?i:i-f.dot(o)/_},evaluate:function(t,e,i){for(var r=e.slice(),s=1;s<=t;s++)for(var a=0;a<=t-s;a++)r[a]=r[a].multiply(1-i).add(r[a+1].multiply(i));return r[0]},chordLengthParameterize:function(t,e){for(var i=[0],r=t+1;r<=e;r++)i[r-t]=i[r-t-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,s=e-t;r<=s;r++)i[r]/=i[s];return i},findMaxError:function(t,e,i,r){for(var s=Math.floor((e-t+1)/2),a=0,h=t+1;h<e;h++){var o=this.evaluate(3,i,r[h-t]),l=o.subtract(this.points[h]),f=l.x*l.x+l.y*l.y;f>=a&&(a=f,s=h)}return{error:a,index:s}}}),Ve=A.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var i=e&&R.isPlainObject(e)&&e.x===K&&e.y===K;this._initialize(i&&e,!i&&D.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Je=Ve.extend({_class:"PointText",initialize:function(){Ve.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new te(t.x,t.y,this,"setPoint")},setPoint:function(){var t=D.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var r=this._lines,s=this._style,a=s.hasFill(),h=s.hasStroke(),o=s.getLeading(),l=t.shadowColor;t.font=s.getFontStyle(),t.textAlign=s.getJustification();for(var f=0,_=r.length;f<_;f++){t.shadowColor=l;var v=r[f];a&&(t.fillText(v,0,0),t.shadowColor="rgba(0,0,0,0)"),h&&t.strokeText(v,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var i=this._style,r=this._lines,s=r.length,a=i.getJustification(),h=i.getLeading(),o=this.getView().getTextWidth(i.getFontStyle(),r),l=0;a!=="left"&&(l-=o/(a==="center"?2:1));var f=new ft(l,s?-.75*h:0,o,s*h);return t?t._transformBounds(f,f):f}}),jt=R.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},e={},i={transparent:[0,0,0,0]},r;function s(o){var l=o.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||o.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),f="rgb",_;if(l){var v=l[4]?4:3;_=new Array(v);for(var g=0;g<v;g++){var d=l[g+1];_[g]=parseInt(d.length==1?d+d:d,16)/255}}else if(l=o.match(/^(rgb|hsl)a?\((.*)\)$/)){f=l[1],_=l[2].trim().split(/[,\s]+/g);for(var w=f==="hsl",g=0,m=Math.min(_.length,4);g<m;g++){var k=_[g],d=parseFloat(k);if(w)if(g===0){var p=k.match(/([a-z]*)$/)[1];d*={turn:360,rad:180/Math.PI,grad:.9}[p]||1}else g<3&&(d/=100);else g<3&&(d/=/%$/.test(k)?100:255);_[g]=d}}else{var y=i[o];if(!y)if(Ct){r||(r=Rt.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=o,r.fillRect(0,0,1,1);var c=r.getImageData(0,0,1,1).data;y=i[o]=[c[0]/255,c[1]/255,c[2]/255]}else y=[0,0,0];_=y.slice()}return[f,_]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(o,l,f){var _=Math.max(o,l,f),v=Math.min(o,l,f),g=_-v,d=g===0?0:(_==o?(l-f)/g+(l<f?6:0):_==l?(f-o)/g+2:(o-l)/g+4)*60;return[d,_===0?0:g/_,_]},"hsb-rgb":function(o,l,f){o=(o/60%6+6)%6;var v=Math.floor(o),_=o-v,v=a[v],g=[f,f*(1-l),f*(1-l*_),f*(1-l*(1-_))];return[g[v[0]],g[v[1]],g[v[2]]]},"rgb-hsl":function(o,l,f){var _=Math.max(o,l,f),v=Math.min(o,l,f),g=_-v,d=g===0,w=d?0:(_==o?(l-f)/g+(l<f?6:0):_==l?(f-o)/g+2:(o-l)/g+4)*60,m=(_+v)/2,k=d?0:m<.5?g/(_+v):g/(2-_-v);return[w,k,m]},"hsl-rgb":function(o,l,f){if(o=(o/360%1+1)%1,l===0)return[f,f,f];for(var _=[o+1/3,o,o-1/3],v=f<.5?f*(1+l):f+l-f*l,g=2*f-v,d=[],w=0;w<3;w++){var m=_[w];m<0&&(m+=1),m>1&&(m-=1),d[w]=6*m<1?g+(v-g)*6*m:2*m<1?v:3*m<2?g+(v-g)*(2/3-m)*6:g}return d},"rgb-gray":function(o,l,f){return[o*.2989+l*.587+f*.114]},"gray-rgb":function(o){return[o,o,o]},"gray-hsb":function(o){return[0,0,o]},"gray-hsl":function(o){return[0,0,o]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return R.each(t,function(o,l){e[l]=[],R.each(o,function(f,_){var v=R.capitalize(f),g=/^(hue|saturation)$/.test(f),d=e[l][_]=l==="gradient"?f==="gradient"?function(w){var m=this._components[0];return w=$e.read(Array.isArray(w)?w:arguments,0,{readNull:!0}),m!==w&&(m&&m._removeOwner(this),w&&w._addOwner(this)),w}:function(){return D.read(arguments,0,{readNull:f==="highlight",clone:!0})}:function(w){return w==null||isNaN(w)?0:+w};this["get"+v]=function(){return this._type===l||g&&/^hs[bl]$/.test(this._type)?this._components[_]:this._convert(l)[_]},this["set"+v]=function(w){this._type!==l&&!(g&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(l),this._properties=t[l],this._type=l),this._components[_]=d.call(this,w),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function o(l){var f=arguments,_=this.__read,v=0,g,d,w,m;Array.isArray(l)&&(f=l,l=f[0]);var k=l!=null&&typeof l;if(k==="string"&&l in t&&(g=l,l=f[1],Array.isArray(l)?(d=l,w=f[2]):(_&&(v=1),f=R.slice(f,1),k=typeof l)),!d){if(m=k==="number"?f:k==="object"&&l.length!=null?l:null,m){g||(g=m.length>=3?"rgb":"gray");var p=t[g].length;w=m[p],_&&(v+=m===arguments?p+(w!=null?1:0):1),m.length>p&&(m=R.slice(m,0,p))}else if(k==="string"){var y=s(l);g=y[0],d=y[1],d.length===4&&(w=d[3],d.length--)}else if(k==="object")if(l.constructor===o){if(g=l._type,d=l._components.slice(),w=l._alpha,g==="gradient")for(var c=1,b=d.length;c<b;c++){var C=d[c];C&&(d[c]=C.clone())}}else if(l.constructor===$e)g="gradient",m=f;else{g="hue"in l?"lightness"in l?"hsl":"hsb":"gradient"in l||"stops"in l||"radial"in l?"gradient":"gray"in l?"gray":"rgb";var I=t[g],S=e[g];this._components=d=[];for(var c=0,b=I.length;c<b;c++){var E=l[I[c]];E==null&&!c&&g==="gradient"&&"stops"in l&&(E={stops:l.stops,radial:l.radial}),E=S[c].call(this,E),E!=null&&(d[c]=E)}w=l.alpha}_&&g&&(v=1)}if(this._type=g||"rgb",!d){this._components=d=[];for(var S=e[this._type],c=0,b=S.length;c<b;c++){var E=S[c].call(this,m&&m[c]);E!=null&&(d[c]=E)}}return this._components=d,this._properties=t[this._type],this._alpha=w,_&&(this.__read=v),this},set:"#initialize",_serialize:function(o,l){var f=this.getComponents();return R.serialize(/^(gray|rgb)$/.test(this._type)?f:[this._type].concat(f),o,!0,l)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(o){var l;return this._type===o?this._components.slice():(l=h[this._type+"-"+o])?l.apply(this,this._components):h["rgb-"+o].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(o){return new jt(o,this._convert(o),this._alpha)},getType:function(){return this._type},setType:function(o){this._components=this._convert(o),this._properties=t[o],this._type=o},getComponents:function(){var o=this._components.slice();return this._alpha!=null&&o.push(this._alpha),o},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(o){this._alpha=o==null?null:Math.min(Math.max(o,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(o){var l=R.isPlainValue(o,!0)?jt.read(arguments):o;return l===this||l&&this._class===l._class&&this._type===l._type&&this.getAlpha()===l.getAlpha()&&R.equals(this._components,l._components)||!1},toString:function(){for(var o=this._properties,l=[],f=this._type==="gradient",_=oe.instance,v=0,g=o.length;v<g;v++){var d=this._components[v];d!=null&&l.push(o[v]+": "+(f?d:_.number(d)))}return this._alpha!=null&&l.push("alpha: "+_.number(this._alpha)),"{ "+l.join(", ")+" }"},toCSS:function(o){var l=this._convert("rgb"),f=o||this._alpha==null?1:this._alpha;function _(v){return Math.round((v<0?0:v>1?1:v)*255)}return l=[_(l[0]),_(l[1]),_(l[2])],f<1&&l.push(f<0?0:f),o?"#"+((1<<24)+(l[0]<<16)+(l[1]<<8)+l[2]).toString(16).slice(1):(l.length==4?"rgba(":"rgb(")+l.join(",")+")"},toCanvasStyle:function(o,l){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var f=this._components,_=f[0],v=_._stops,g=f[1],d=f[2],w=f[3],m=l&&l.inverted(),k;if(m&&(g=m._transformPoint(g),d=m._transformPoint(d),w&&(w=m._transformPoint(w))),_._radial){var p=d.getDistance(g);if(w){var y=w.subtract(g);y.getLength()>p&&(w=g.add(y.normalize(p-.1)))}var c=w||g;k=o.createRadialGradient(c.x,c.y,0,g.x,g.y,p)}else k=o.createLinearGradient(g.x,g.y,d.x,d.y);for(var b=0,C=v.length;b<C;b++){var I=v[b],S=I._offset;k.addColorStop(S??b/(C-1),I._color.toCanvasStyle())}return this._canvasStyle=k},transform:function(o){if(this._type==="gradient"){for(var l=this._components,f=1,_=l.length;f<_;f++){var v=l[f];o._transformPoint(v,v,!0)}this._changed()}},statics:{_types:t,random:function(){var o=Math.random;return new jt(o(),o(),o())},_setOwner:function(o,l,f){return o&&(o._owner&&l&&o._owner!==l&&(o=o.clone()),!o._owner^!l&&(o._owner=l||null,o._setter=f||null)),o}}})},new function(){var t={add:function(e,i){return e+i},subtract:function(e,i){return e-i},multiply:function(e,i){return e*i},divide:function(e,i){return e/i}};return R.each(t,function(e,i){this[i]=function(r){r=jt.read(arguments);for(var s=this._type,a=this._components,h=r._convert(s),o=0,l=a.length;o<l;o++)h[o]=e(a[o],h[o]);return new jt(s,h,this._alpha!=null?e(this._alpha,r.getAlpha()):null)}},{})}),$e=R.extend({_class:"Gradient",initialize:function(e,i){this._id=Ye.get(),e&&R.isPlainObject(e)&&(this.set(e),e=i=null),this._stops==null&&this.setStops(e||["white","black"]),this._radial==null&&this.setRadial(typeof i=="string"&&i==="radial"||i||!1)},_serialize:function(t,e){return e.add(this,function(){return R.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=K))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new $e(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,r=e.length;i<r;i++)e[i]._owner=K;e=this._stops=ui.readList(t,0,{clone:!0});for(var i=0,r=e.length;i<r;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,r=e.length;if(r===i.length){for(var s=0;s<r;s++)if(!e[s].equals(i[s]))return!1;return!0}}return!1}}),ui=R.extend({_class:"GradientStop",initialize:function(e,i){var r=e,s=i;typeof e=="object"&&i===K&&(Array.isArray(e)&&typeof e[0]!="number"?(r=e[0],s=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(r=e.color,s=e.offset||e.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new ui(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,r=this._offset;return R.serialize(r==null?[i]:[i,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){jt._setOwner(this._color,null),this._color=jt._setOwner(jt.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Le=R.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new D,selectedColor:null},e=R.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=R.set({},e,{fillColor:new jt}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},a={_class:"Style",beans:!0,initialize:function(o,l,f){this._values={},this._owner=l,this._project=l&&l._project||f||lt.project,this._defaults=!l||l instanceof qt?e:l instanceof Ve?i:t,o&&this.set(o)}};return R.each(e,function(h,o){var l=/Color$/.test(o),f=o==="shadowOffset",_=R.capitalize(o),v=r[o],g="set"+_,d="get"+_;a[g]=function(w){var m=this._owner,k=m&&m._children,p=k&&k.length>0&&!(m instanceof Se);if(p)for(var y=0,c=k.length;y<c;y++)k[y]._style[g](w);if((o==="selectedColor"||!p)&&o in this._defaults){var b=this._values[o];b!==w&&(l&&(b&&(jt._setOwner(b,null),b._canvasStyle=null),w&&w.constructor===jt&&(w=jt._setOwner(w,m,p&&g))),this._values[o]=w,m&&m._changed(v||129))}},a[d]=function(w){var m=this._owner,k=m&&m._children,p=k&&k.length>0&&!(m instanceof Se),y;if(p&&!w)for(var c=0,b=k.length;c<b;c++){var C=k[c]._style[d]();if(!c)y=C;else if(!R.equals(y,C))return K}else if(o in this._defaults){var y=this._values[o];if(y===K)y=this._defaults[o],y&&y.clone&&(y=y.clone());else{var I=l?jt:f?D:null;I&&!(y&&y.constructor===I)&&(this._values[o]=y=I.read([y],0,{readNull:!0,clone:!0}))}}return y&&l&&(y=jt._setOwner(y,m,p&&g)),y},s[d]=function(w){return this._style[d](w)},s[g]=function(w){this._style[g](w)}}),R.each({Font:"FontFamily",WindingRule:"FillRule"},function(h,o){var l="get"+o,f="set"+o;a[l]=s[l]="#get"+h,a[f]=s[f]="#set"+h}),A.inject(s),a},{set:function(t){var e=t instanceof Le,i=e?t._values:t;if(i){for(var r in i)if(r in this._defaults){var s=i[r];this[r]=s&&e&&s.clone?s.clone():s}}},equals:function(t){function e(i,r,s){var a=i._values,h=r._values,o=r._defaults;for(var l in a){var f=a[l],_=h[l];if(!(s&&l in h)&&!R.equals(f,_===K?o[l]:_))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),e??i*1.2}}),Vt=new function(){function t(e,i,r,s){for(var a=["","webkit","moz","Moz","ms","o"],h=i[0].toUpperCase()+i.substring(1),o=0;o<6;o++){var l=a[o],f=l?l+h:i;if(f in e){if(r)e[f]=s;else return e[f];break}}}return{getStyles:function(e){var i=e&&e.nodeType!==9?e.ownerDocument:e,r=i&&i.defaultView;return r&&r.getComputedStyle(e,"")},getBounds:function(e,i){var r=e.ownerDocument,s=r.body,a=r.documentElement,h;try{h=e.getBoundingClientRect()}catch{h={left:0,top:0,width:0,height:0}}var o=h.left-(a.clientLeft||s.clientLeft||0),l=h.top-(a.clientTop||s.clientTop||0);if(!i){var f=r.defaultView;o+=f.pageXOffset||a.scrollLeft||s.scrollLeft,l+=f.pageYOffset||a.scrollTop||s.scrollTop}return new ft(o,l,h.width,h.height)},getViewportBounds:function(e){var i=e.ownerDocument,r=i.defaultView,s=i.documentElement;return new ft(0,0,r.innerWidth||s.clientWidth,r.innerHeight||s.clientHeight)},getOffset:function(e,i){return Vt.getBounds(e,i).getPoint()},getSize:function(e){return Vt.getBounds(e,!0).getSize()},isInvisible:function(e){return Vt.getSize(e).equals(new ht(0,0))},isInView:function(e){return!Vt.isInvisible(e)&&Vt.getViewportBounds(e).intersects(Vt.getBounds(e,!0))},isInserted:function(e){return _t.body.contains(e)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,r){if(typeof i=="object")for(var s in i)t(e,s,!0,i[s]);else t(e,i,!0,r)}}},Ut={add:function(t,e){if(t)for(var i in e)for(var r=e[i],s=i.split(/[\s,]+/g),a=0,h=s.length;a<h;a++){var o=s[a],l=t===_t&&(o==="touchstart"||o==="touchmove")?{passive:!1}:!1;t.addEventListener(o,r,l)}},remove:function(t,e){if(t)for(var i in e)for(var r=e[i],s=i.split(/[\s,]+/g),a=0,h=s.length;a<h;a++)t.removeEventListener(s[a],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new D(e.pageX||e.clientX+_t.documentElement.scrollLeft,e.pageY||e.clientY+_t.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Ut.getPoint(t).subtract(Vt.getOffset(e||Ut.getTarget(t)))}};Ut.requestAnimationFrame=new function(){var t=Vt.getPrefixed(Ct,"requestAnimationFrame"),e=!1,i=[],r;function s(){var a=i;i=[];for(var h=0,o=a.length;h<o;h++)a[h]();e=t&&i.length,e&&t(s)}return function(a){i.push(a),t?e||(t(s),e=!0):r||(r=setInterval(s,1e3/60))}};var Ft=R.extend(le,{_class:"View",initialize:function t(e,i){function r(v){return i[v]||parseInt(i.getAttribute(v),10)}function s(){var v=Vt.getSize(i);return v.isNaN()||v.isZero()?new ht(r("width"),r("height")):v}var a;if(Ct&&i){this._id=i.getAttribute("id"),this._id==null&&i.setAttribute("id",this._id="paper-view-"+t._id++),Ut.add(i,this._viewEvents);var h="none";if(Vt.setPrefixed(i.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),Dt.hasAttribute(i,"resize")){var o=this;Ut.add(Ct,this._windowEvents={resize:function(){o.setViewSize(s())}})}if(a=s(),Dt.hasAttribute(i,"stats")&&typeof Stats<"u"){this._stats=new Stats;var l=this._stats.domElement,f=l.style,_=Vt.getOffset(i);f.position="absolute",f.left=_.x+"px",f.top=_.y+"px",_t.body.appendChild(l)}}else a=new ht(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=Ct&&Ct.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new It)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!lt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ft._focused===this&&(Ft._focused=null),Ft._views.splice(Ft._views.indexOf(this),1),delete Ft._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Ut.remove(this._element,this._viewEvents),Ut.remove(Ct,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:R.each(A._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Ut.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;(!Vt.getPrefixed(_t,"hidden")||Dt.getAttribute(e,"keepalive")==="true")&&Vt.isInView(e)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){lt=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new R({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete i[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new R(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=K},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new At(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=ht.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new ft(new D,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Vt.isInView(this._element)},isInserted:function(){return Vt.isInserted(this._element)},getPixelSize:function(t){var e=this._element,i;if(e){var r=e.parentNode,s=_t.createElement("div");s.style.fontSize=t,r.appendChild(s),i=parseFloat(Vt.getStyles(s).fontSize),r.removeChild(s)}else i=parseFloat(i);return i},getTextWidth:function(t,e){return 0}},R.each(["rotate","scale","shear","skew"],function(t){var e=t==="rotate";this[t]=function(){var i=arguments,r=(e?R:D).read(i),s=D.read(i,0,{readNull:!0});return this.transform(new It()[t](r,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new It;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=D.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new It().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();e!=null&&t!=null&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new te(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=D.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(D.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(D.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(D.read(arguments))},getEventPoint:function(t){return this.viewToProject(Ut.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){_t&&typeof e=="string"&&(e=_t.getElementById(e));var i=Ct?xi:Ft;return new i(t,e)}}},new function(){if(!Ct)return;var t,e,i=!1,r=!1;function s(T){var V=Ut.getTarget(T);return V.getAttribute&&Ft._viewsById[V.getAttribute("id")]}function a(){var T=Ft._focused;if(!T||!T.isVisible()){for(var V=0,B=Ft._views.length;V<B;V++)if((T=Ft._views[V]).isVisible()){Ft._focused=e=T;break}}}function h(T,V,B){T._handleMouseEvent("mousemove",V,B)}var o=Ct.navigator,l,f,_;o.pointerEnabled||o.msPointerEnabled?(l="pointerdown MSPointerDown",f="pointermove MSPointerMove",_="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",f="touchmove",_="touchend touchcancel","ontouchstart"in Ct&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",f+=" mousemove",_+=" mouseup"));var v={},g={mouseout:function(T){var V=Ft._focused,B=Ut.getRelatedTarget(T);if(V&&(!B||B.nodeName==="HTML")){var q=Ut.getOffset(T,V._element),U=q.x,W=Math.abs,J=W(U),et=1<<25,it=J-et;q.x=W(it)<J?it*(U<0?-1:1):U,h(V,T,V.viewToProject(q))}},scroll:a};v[l]=function(T){var V=Ft._focused=s(T);i||(i=!0,V._handleMouseEvent("mousedown",T))},g[f]=function(T){var V=Ft._focused;if(!r){var B=s(T);B?V!==B&&(V&&h(V,T),t||(t=V),V=Ft._focused=e=B):e&&e===V&&(t&&!t.isInserted()&&(t=null),V=Ft._focused=t,t=null,a())}V&&h(V,T)},g[l]=function(){r=!0},g[_]=function(T){var V=Ft._focused;V&&i&&V._handleMouseEvent("mouseup",T),r=i=!1},Ut.add(_t,g),Ut.add(Ct,{load:a});var d=!1,w=!1,m={doubleclick:"click",mousedrag:"mousemove"},k=!1,p,y,c,b,C,I,S,E;function L(T,V,B,q,U,W,J){var et=!1,it;function at(Z,Q){if(Z.responds(Q)){if(it||(it=new We(Q,q,U,V||Z,W?U.subtract(W):null)),Z.emit(Q,it)&&(d=!0,it.prevented&&(w=!0),it.stopped))return et=!0}else{var st=m[Q];if(st)return at(Z,st)}}for(;T&&T!==J&&!at(T,B);)T=T._parent;return et}function N(T,V,B,q,U,W){return T._project.removeOn(B),w=d=!1,C&&L(C,null,B,q,U,W)||V&&V!==C&&!V.isDescendant(C)&&L(V,null,B==="mousedrag"?"mousemove":B,q,U,W,C)||L(T,C||V||T,B,q,U,W)}var F={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(T,V,B){var q=this._itemEvents,U=q.native[T],W=T==="mousemove",J=this._scope.tool,et=this;function it(pt){return q.virtual[pt]||et.responds(pt)||J&&J.responds(pt)}W&&i&&it("mousedrag")&&(T="mousedrag"),B||(B=this.getEventPoint(V));var at=this.getBounds().contains(B),Z=U&&at&&et._project.hitTest(B,{tolerance:0,fill:!0,stroke:!0}),Q=Z&&Z.item||null,st=!1,ut={};if(ut[T.substr(5)]=!0,U&&Q!==b&&(b&&L(b,null,"mouseleave",V,B),Q&&L(Q,null,"mouseenter",V,B),b=Q),k^at&&(L(this,null,at?"mouseenter":"mouseleave",V,B),st=!0),(at||ut.drag)&&!B.equals(y)&&(N(this,Q,W?T:"mousemove",V,B,y),st=!0),k=at,ut.down&&at||ut.up&&p){if(N(this,Q,T,V,B,p),ut.down){if(E=Q===I&&Date.now()-S<300,c=I=Q,!w&&Q){for(var ot=Q;ot&&!ot.responds("mousedrag");)ot=ot._parent;ot&&(C=Q)}p=B}else ut.up&&(!w&&Q===c&&(S=Date.now(),N(this,Q,E?"doubleclick":"click",V,B,p),E=!1),c=C=null);k=!1,st=!0}y=B,st&&J&&(d=J._handleMouseEvent(T,V,B,ut)||d),V.cancelable!==!1&&(d&&!ut.move||ut.down&&it("mouseup"))&&V.preventDefault()},_handleKeyEvent:function(T,V,B,q){var U=this._scope,W=U.tool,J;function et(it){it.responds(T)&&(lt=U,it.emit(T,J=J||new oi(T,V,B,q)))}this.isVisible()&&(et(this),W&&W.responds(T)&&et(W))},_countItemEvent:function(T,V){var B=this._itemEvents,q=B.native,U=B.virtual;for(var W in F)q[W]=(q[W]||0)+(F[W][T]||0)*V;U[T]=(U[T]||0)+V},statics:{updateFocus:a,_resetState:function(){i=r=d=k=!1,t=e=p=y=c=b=C=I=S=E=null}}}}),xi=Ft.extend({_class:"CanvasView",initialize:function(e,i){if(!(i instanceof Ct.HTMLCanvasElement)){var r=ht.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+R.slice(arguments,1));i=Rt.getCanvas(r)}var s=this._context=i.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(Dt.getAttribute(i,"hidpi"))){var a=Ct.devicePixelRatio||1,h=Vt.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=a/h}Ft.call(this,e,i),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var r=this._pixelRatio;if(t.base.call(this,e*r,i*r),r!==1){var s=this._element,a=this._context;if(!Dt.hasAttribute(s,"resize")){var h=s.style;h.width=e+"px",h.height=i+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function t(e){var i=lt.agent,r;if(i&&i.firefox)r=t.base.call(this,e);else{var s=this._context,a=s.font;s.font=e+" serif",r=parseFloat(s.font),s.font=a}return r},getTextWidth:function(t,e){var i=this._context,r=i.font,s=0;i.font=t;for(var a=0,h=e.length;a<h;a++)s=Math.max(s,i.measureText(e[a]).width);return i.font=r,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),He=R.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return hi.modifiers}}),oi=He.extend({_class:"KeyEvent",initialize:function(e,i,r,s){this.type=e,this.event=i,this.key=r,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),hi=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},e={tab:"	",space:" ",enter:"\r"},i={},r={},s,a,h=new R({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var f=lt&&lt.agent;return f&&f.mac?this.meta:this.control}}});function o(f){var _=f.key||f.keyIdentifier;return _=/^U\+/.test(_)?String.fromCharCode(parseInt(_.substr(2),16)):/^Arrow[A-Z]/.test(_)?_.substr(5):_==="Unidentified"||_===K?String.fromCharCode(f.keyCode):_,t[_]||(_.length>1?R.hyphenate(_):_.toLowerCase())}function l(f,_,v,g){var d=Ft._focused,w;if(i[_]=f,f?r[_]=v:delete r[_],_.length>1&&(w=R.camelize(_))in h){h[w]=f;var m=lt&&lt.agent;if(w==="meta"&&m&&m.mac)if(f)s={};else{for(var k in s)k in r&&l(!1,k,s[k],g);s=null}}else f&&s&&(s[_]=v);d&&d._handleKeyEvent(f?"keydown":"keyup",g,_,v)}return Ut.add(_t,{keydown:function(f){var _=o(f),v=lt&&lt.agent;_.length>1||v&&v.chrome&&(f.altKey||v.mac&&f.metaKey||!v.mac&&f.ctrlKey)?l(!0,_,e[_]||(_.length>1?"":_),f):a=_},keypress:function(f){if(a){var _=o(f),v=f.charCode,g=v>=32?String.fromCharCode(v):_.length>1?"":_;_!==a&&(_=g.toLowerCase()),l(!0,_,g,f),a=null}},keyup:function(f){var _=o(f);_ in r&&l(!1,_,r[_],f)}}),Ut.add(Ct,{blur:function(f){for(var _ in r)l(!1,_,r[_],f)}}),{modifiers:h,isDown:function(f){return!!i[f]}}},We=He.extend({_class:"MouseEvent",initialize:function(e,i,r,s,a){this.type=e,this.event=i,this.point=r,this.target=s,this.delta=a},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),li=He.extend({_class:"ToolEvent",_item:null,initialize:function(e,i,r){this.tool=e,this.type=i,this.event=r},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),fi=xe.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){xe.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,r){lt=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var s=r.move||r.drag,a=this.responds(t),h=this.minDistance,o=this.maxDistance,l=!1,f=this;function _(g,d){var w=i,m=s?f._point:f._downPoint||w;if(s){if(f._moveCount>=0&&w.equals(m))return!1;if(m&&(g!=null||d!=null)){var k=w.subtract(m),p=k.getLength();if(p<(g||0))return!1;d&&(w=m.add(k.normalize(Math.min(p,d))))}f._moveCount++}return f._point=w,f._lastPoint=m||w,r.down&&(f._moveCount=-1,f._downPoint=w,f._downCount++),!0}function v(){a&&(l=f.emit(t,new li(f,t,e))||l)}if(r.down)_(),v();else if(r.up)_(null,o),v();else if(a)for(;_(h,o);)v();return l}}),ti=R.extend(le,{_class:"Tween",statics:{easings:new R({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,i,r,s,a,h){this.object=e;var o=typeof a,l=o==="function";this.type=l?o:o==="string"?a:"linear",this.easing=l?a:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var f=i||r;this._keys=f?Object.keys(f):[],this._parsedKeys=this._parseKeys(this._keys),this._from=f&&this._getState(i),this._to=f&&this._getState(r),h!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),i=this._keys,r=function(_){return typeof _=="function"?_(e,t):_},s=0,a=i&&i.length;s<a;s++){var h=i[s],o=r(this._from[h]),l=r(this._to[h]),f=o&&l&&o.__add&&l.__add?l.__subtract(o).__multiply(e).__add(o):(l-o)*e+o;this._setProperty(this._parsedKeys[h],f)}this.responds("update")&&this.emit("update",new R({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,i=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(i)},_getState:function(t){for(var e=this._keys,i={},r=0,s=e.length;r<s;r++){var a=e[r],h=this._parsedKeys[a],o=this._getProperty(h),l;if(t){var f=this._resolveValue(o,t[a]);this._setProperty(h,f),l=this._getProperty(h),l=l&&l.clone?l.clone():l,this._setProperty(h,o)}else l=o&&o.clone?o.clone():o;i[a]=l}return i},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&e.length===2){var i=e[0];return i&&i.match&&i.match(/^[+\-\*\/]=/)?this._calculate(t,i[0],e[1]):e}else if(typeof e=="string"){var r=e.match(/^[+\-*/]=(.*)/);if(r){var s=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],s)}}}return e},_calculate:function(t,e,i){return lt.PaperScript.calculateBinary(t,e,i)},_parseKeys:function(t){for(var e={},i=0,r=t.length;i<r;i++){var s=t[i],a=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[s]=a.split("/")}return e},_getProperty:function(t,e){for(var i=this.object,r=0,s=t.length-(e||0);r<s&&i;r++)i=i[t[r]];return i},_setProperty:function(t,e){var i=this._getProperty(t,1);i&&(i[t[t.length-1]]=e)}}),ei={request:function(t){var e=new Lt.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,R.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var i=e.status;i===0||i===200?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var i=e.status,r='Could not load "'+t.url+'" (Status: '+i+")";if(t.onError)t.onError(r,i);else throw new Error(r)},e.send(null)}},Rt=R.exports.CanvasProvider={canvases:[],getCanvas:function(t,e,i){if(!Ct)return null;var r,s=!0;typeof t=="object"&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=_t.createElement("canvas"),s=!1);var a=r.getContext("2d",i||{});if(!a)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?s&&a.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),a.save(),r},getContext:function(t,e,i){var r=this.getCanvas(t,e,i);return r?r.getContext("2d",i||{}):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ii=new function(){var t=Math.min,e=Math.max,i=Math.abs,r,s,a,h,o,l,f,_,v,g,d;function w(C,I,S){return .2989*C+.587*I+.114*S}function m(C,I,S,N){var L=N-w(C,I,S);v=C+L,g=I+L,d=S+L;var N=w(v,g,d),F=t(v,g,d),T=e(v,g,d);if(F<0){var V=N-F;v=N+(v-N)*N/V,g=N+(g-N)*N/V,d=N+(d-N)*N/V}if(T>255){var B=255-N,q=T-N;v=N+(v-N)*B/q,g=N+(g-N)*B/q,d=N+(d-N)*B/q}}function k(C,I,S){return e(C,I,S)-t(C,I,S)}function p(C,I,S,E){var L=[C,I,S],N=e(C,I,S),F=t(C,I,S),T;F=F===C?0:F===I?1:2,N=N===C?0:N===I?1:2,T=t(F,N)===0?e(F,N)===1?2:1:0,L[N]>L[F]?(L[T]=(L[T]-L[F])*E/(L[N]-L[F]),L[N]=E):L[T]=L[N]=0,L[F]=0,v=L[0],g=L[1],d=L[2]}var y={multiply:function(){v=o*r/255,g=l*s/255,d=f*a/255},screen:function(){v=o+r-o*r/255,g=l+s-l*s/255,d=f+a-f*a/255},overlay:function(){v=o<128?2*o*r/255:255-2*(255-o)*(255-r)/255,g=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255,d=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255},"soft-light":function(){var C=r*o/255;v=C+o*(255-(255-o)*(255-r)/255-C)/255,C=s*l/255,g=C+l*(255-(255-l)*(255-s)/255-C)/255,C=a*f/255,d=C+f*(255-(255-f)*(255-a)/255-C)/255},"hard-light":function(){v=r<128?2*r*o/255:255-2*(255-r)*(255-o)/255,g=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255,d=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255},"color-dodge":function(){v=o===0?0:r===255?255:t(255,255*o/(255-r)),g=l===0?0:s===255?255:t(255,255*l/(255-s)),d=f===0?0:a===255?255:t(255,255*f/(255-a))},"color-burn":function(){v=o===255?255:r===0?0:e(0,255-(255-o)*255/r),g=l===255?255:s===0?0:e(0,255-(255-l)*255/s),d=f===255?255:a===0?0:e(0,255-(255-f)*255/a)},darken:function(){v=o<r?o:r,g=l<s?l:s,d=f<a?f:a},lighten:function(){v=o>r?o:r,g=l>s?l:s,d=f>a?f:a},difference:function(){v=o-r,v<0&&(v=-v),g=l-s,g<0&&(g=-g),d=f-a,d<0&&(d=-d)},exclusion:function(){v=o+r*(255-o-o)/255,g=l+s*(255-l-l)/255,d=f+a*(255-f-f)/255},hue:function(){p(r,s,a,k(o,l,f)),m(v,g,d,w(o,l,f))},saturation:function(){p(o,l,f,k(r,s,a)),m(v,g,d,w(o,l,f))},luminosity:function(){m(o,l,f,w(r,s,a))},color:function(){m(r,s,a,w(o,l,f))},add:function(){v=t(o+r,255),g=t(l+s,255),d=t(f+a,255)},subtract:function(){v=e(o-r,0),g=e(l-s,0),d=e(f-a,0)},average:function(){v=(o+r)/2,g=(l+s)/2,d=(f+a)/2},negation:function(){v=255-i(255-r-o),g=255-i(255-s-l),d=255-i(255-a-f)}},c=this.nativeModes=R.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(C){this[C]=!0},{}),b=Rt.getContext(1,1,{willReadFrequently:!0});b&&(R.each(y,function(C,I){var S=I==="darken",E=!1;b.save();try{b.fillStyle=S?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=I,b.globalCompositeOperation===I&&(b.fillStyle=S?"#a00":"#300",b.fillRect(0,0,1,1),E=b.getImageData(0,0,1,1).data[0]!==S?170:51)}catch{}b.restore(),c[I]=E}),Rt.release(b)),this.process=function(C,I,S,E,L){var N=I.canvas,F=C==="normal";if(F||c[C])S.save(),S.setTransform(1,0,0,1,0,0),S.globalAlpha=E,F||(S.globalCompositeOperation=C),S.drawImage(N,L.x,L.y),S.restore();else{var T=y[C];if(!T)return;for(var V=S.getImageData(L.x,L.y,N.width,N.height),B=V.data,q=I.getImageData(0,0,N.width,N.height).data,U=0,W=B.length;U<W;U+=4){r=q[U],o=B[U],s=q[U+1],l=B[U+1],a=q[U+2],f=B[U+2],h=q[U+3],_=B[U+3],T();var J=h*E/255,et=1-J;B[U]=J*v+et*o,B[U+1]=J*g+et*l,B[U+2]=J*d+et*f,B[U+3]=h*E+et*_}S.putImageData(V,L.x,L.y)}}},Bt=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",r={href:i,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function s(o,l,f){return h(_t.createElementNS(t,o),l,f)}function a(o,l){var f=r[l],_=f?o.getAttributeNS(f,l):o.getAttribute(l);return _==="null"?null:_}function h(o,l,f){for(var _ in l){var v=l[_],g=r[_];typeof v=="number"&&f&&(v=f.number(v)),g?o.setAttributeNS(g,_,v):o.setAttribute(_,v)}return o}return{svg:t,xmlns:e,xlink:i,create:s,get:a,set:h}},ci=R.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof ce||t instanceof Qt||t instanceof Ve)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=R.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&R.each(r,function(s,a){this[s]=a},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});new function(){var t;function e(y,c,b){var C=new R,I=y.getTranslation();if(c){var S;y.isInvertible()?(y=y._shiftless(),S=y._inverseTransform(I),I=null):S=new D,C[b?"cx":"x"]=S.x,C[b?"cy":"y"]=S.y}if(!y.isIdentity()){var E=y.decompose();if(E){var L=[],N=E.rotation,F=E.scaling,T=E.skewing;I&&!I.isZero()&&L.push("translate("+t.point(I)+")"),N&&L.push("rotate("+t.number(N)+")"),(!kt.isZero(F.x-1)||!kt.isZero(F.y-1))&&L.push("scale("+t.point(F)+")"),T.x&&L.push("skewX("+t.number(T.x)+")"),T.y&&L.push("skewY("+t.number(T.y)+")"),C.transform=L.join(" ")}else C.transform="matrix("+y.getValues().join(",")+")"}return C}function i(y,c){for(var b=e(y._matrix),C=y._children,I=Bt.create("g",b,t),S=0,E=C.length;S<E;S++){var L=C[S],N=k(L,c);if(N)if(L.isClipMask()){var F=Bt.create("clipPath");F.appendChild(N),w(L,F,"clip"),Bt.set(I,{"clip-path":"url(#"+F.id+")"})}else I.appendChild(N)}return I}function r(y,c){var b=e(y._matrix,!0),C=y.getSize(),I=y.getImage();return b.x-=C.width/2,b.y-=C.height/2,b.width=C.width,b.height=C.height,b.href=c.embedImages==!1&&I&&I.src||y.toDataURL(),Bt.create("image",b,t)}function s(y,c){var b=c.matchShapes;if(b){var C=y.toShape(!1);if(C)return a(C)}var I=y._segments,S=I.length,E,L=e(y._matrix);if(b&&S>=2&&!y.hasHandles())if(S>2){E=y._closed?"polygon":"polyline";for(var N=[],F=0;F<S;F++)N.push(t.point(I[F]._point));L.points=N.join(" ")}else{E="line";var T=I[0]._point,V=I[1]._point;L.set({x1:T.x,y1:T.y,x2:V.x,y2:V.y})}else E="path",L.d=y.getPathData(null,c.precision);return Bt.create(E,L,t)}function a(y){var c=y._type,b=y._radius,C=e(y._matrix,!0,c!=="rectangle");if(c==="rectangle"){c="rect";var I=y._size,S=I.width,E=I.height;C.x-=S/2,C.y-=E/2,C.width=S,C.height=E,b.isZero()&&(b=null)}return b&&(c==="circle"?C.r=b:(C.rx=b.width,C.ry=b.height)),Bt.create(c,C,t)}function h(y,c){var b=e(y._matrix),C=y.getPathData(null,c.precision);return C&&(b.d=C),Bt.create("path",b,t)}function o(y,c){var b=e(y._matrix,!0),C=y._definition,I=d(C,"symbol"),S=C._item,E=S.getStrokeBounds();return I||(I=Bt.create("symbol",{viewBox:t.rectangle(E)}),I.appendChild(k(S,c)),w(C,I,"symbol")),b.href="#"+I.id,b.x+=E.x,b.y+=E.y,b.width=E.width,b.height=E.height,b.overflow="visible",Bt.create("use",b,t)}function l(y){var c=d(y,"color");if(!c){var b=y.getGradient(),C=b._radial,I=y.getOrigin(),S=y.getDestination(),E;if(C){E={cx:I.x,cy:I.y,r:I.getDistance(S)};var L=y.getHighlight();L&&(E.fx=L.x,E.fy=L.y)}else E={x1:I.x,y1:I.y,x2:S.x,y2:S.y};E.gradientUnits="userSpaceOnUse",c=Bt.create((C?"radial":"linear")+"Gradient",E,t);for(var N=b._stops,F=0,T=N.length;F<T;F++){var V=N[F],B=V._color,q=B.getAlpha(),U=V._offset;E={offset:U??F/(T-1)},B&&(E["stop-color"]=B.toCSS(!0)),q<1&&(E["stop-opacity"]=q),c.appendChild(Bt.create("stop",E,t))}w(y,c,"color")}return"url(#"+c.id+")"}function f(y){var c=Bt.create("text",e(y._matrix,!0),t);return c.textContent=y._content,c}var _={Group:i,Layer:i,Raster:r,Path:s,Shape:a,CompoundPath:h,SymbolItem:o,PointText:f};function v(y,c,b){var C={},I=!b&&y.getParent(),S=[];return y._name!=null&&(C.id=y._name),R.each(ci,function(E){var L=E.get,N=E.type,F=y[L]();if(E.exportFilter?E.exportFilter(y,F):!I||!R.equals(I[L](),F)){if(N==="color"&&F!=null){var T=F.getAlpha();T<1&&(C[E.attribute+"-opacity"]=T)}N==="style"?S.push(E.attribute+": "+F):C[E.attribute]=F==null?"none":N==="color"?F.gradient?l(F):F.toCSS(!0):N==="array"?F.join(","):N==="lookup"?E.toSVG[F]:F}}),S.length&&(C.style=S.join(";")),C.opacity===1&&delete C.opacity,y._visible||(C.visibility="hidden"),Bt.set(c,C,t)}var g;function d(y,c){return g||(g={ids:{},svgs:{}}),y&&g.svgs[c+"-"+(y._id||y.__id||(y.__id=Ye.get("svg")))]}function w(y,c,b){g||d();var C=g.ids[b]=(g.ids[b]||0)+1;c.id=b+"-"+C,g.svgs[b+"-"+(y._id||y.__id)]=c}function m(y,c){var b=y,C=null;if(g){b=y.nodeName.toLowerCase()==="svg"&&y;for(var I in g.svgs)C||(b||(b=Bt.create("svg"),b.appendChild(y)),C=b.insertBefore(Bt.create("defs"),b.firstChild)),C.appendChild(g.svgs[I]);g=null}return c.asString?new Lt.XMLSerializer().serializeToString(b):b}function k(y,c,b){var C=_[y._class],I=C&&C(y,c);if(I){var S=c.onExport;S&&(I=S(y,I,c)||I);var E=JSON.stringify(y._data);E&&E!=="{}"&&E!=="null"&&I.setAttribute("data-paper-data",E)}return I&&v(y,I,b)}function p(y){return y||(y={}),t=new oe(y.precision),y}A.inject({exportSVG:function(y){return y=p(y),m(k(this,y,!0),y)}}),Et.inject({exportSVG:function(y){y=p(y);var c=this._children,b=this.getView(),C=R.pick(y.bounds,"view"),I=y.matrix||C==="view"&&b._matrix,S=I&&It.read([I]),E=C==="view"?new ft([0,0],b.getViewSize()):C==="content"?A._getBounds(c,S,{stroke:!0}).rect:ft.read([C],0,{readNull:!0}),L={version:"1.1",xmlns:Bt.svg,"xmlns:xlink":Bt.xlink};E&&(L.width=E.width,L.height=E.height,(E.x||E.x===0||E.y||E.y===0)&&(L.viewBox=t.rectangle(E)));var N=Bt.create("svg",L,t),F=N;S&&!S.isIdentity()&&(F=N.appendChild(Bt.create("g",e(S),t)));for(var T=0,V=c.length;T<V;T++)F.appendChild(k(c[T],y,!0));return m(N,y)}})},new function(){var t={},e;function i(c,b,C,I,S,E){var L=Bt.get(c,b)||E,N=L==null?I?null:C?"":0:C?L:parseFloat(L);return/%\s*$/.test(L)?N/100*(S?1:e[/x|^width/.test(b)?"width":"height"]):N}function r(c,b,C,I,S,E,L){return b=i(c,b||"x",!1,I,S,E),C=i(c,C||"y",!1,I,S,L),I&&(b==null||C==null)?null:new D(b,C)}function s(c,b,C,I,S){return b=i(c,b||"width",!1,I,S),C=i(c,C||"height",!1,I,S),I&&(b==null||C==null)?null:new ht(b,C)}function a(c,b,C){return c==="none"?null:b==="number"?parseFloat(c):b==="array"?c?c.split(/[\s,]+/g).map(parseFloat):[]:b==="color"?k(c)||c:b==="lookup"?C[c]:c}function h(c,b,C,I){var S=c.childNodes,E=b==="clippath",L=b==="defs",N=new qt,F=N._project,T=F._currentStyle,V=[];if(!E&&!L&&(N=m(N,c,I),F._currentStyle=N._style.clone()),I)for(var B=c.querySelectorAll("defs"),q=0,U=B.length;q<U;q++)p(B[q],C,!1);for(var q=0,U=S.length;q<U;q++){var W=S[q],J;W.nodeType===1&&!/^defs$/i.test(W.nodeName)&&(J=p(W,C,!1))&&!(J instanceof Xt)&&V.push(J)}return N.addChildren(V),E&&(N=m(N.reduce(),c,I)),F._currentStyle=T,(E||L)&&(N.remove(),N=null),N}function o(c,b){for(var C=c.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),I=[],S=0,E=C.length;S<E;S+=2)I.push(new D(parseFloat(C[S]),parseFloat(C[S+1])));var L=new Pt(I);return b==="polygon"&&L.closePath(),L}function l(c){return ce.create(c.getAttribute("d"))}function f(c,b){var C=(i(c,"href",!0)||"").substring(1),I=b==="radialgradient",S;if(C)S=t[C].getGradient(),S._radial^I&&(S=S.clone(),S._radial=I);else{for(var E=c.childNodes,L=[],N=0,F=E.length;N<F;N++){var T=E[N];T.nodeType===1&&L.push(m(new ui,T))}S=new $e(L,I)}var V,B,q,U=i(c,"gradientUnits",!0)!=="userSpaceOnUse";I?(V=r(c,"cx","cy",!1,U,"50%","50%"),B=V.add(i(c,"r",!1,!1,U,"50%"),0),q=r(c,"fx","fy",!0,U)):(V=r(c,"x1","y1",!1,U,"0%","0%"),B=r(c,"x2","y2",!1,U,"100%","0%"));var W=m(new jt(S,V,B,q),c);return W._scaleToBounds=U,null}var _={"#document":function(c,b,C,I){for(var S=c.childNodes,E=0,L=S.length;E<L;E++){var N=S[E];if(N.nodeType===1)return p(N,C,I)}},g:h,svg:h,clippath:h,polygon:o,polyline:o,path:l,lineargradient:f,radialgradient:f,image:function(c){var b=new Re(i(c,"href",!0));return b.on("load",function(){var C=s(c);this.setSize(C);var I=r(c).add(C.divide(2));this._matrix.append(new It().translate(I))}),b},symbol:function(c,b,C,I){return new Xt(h(c,b,C,I),!0)},defs:h,use:function(c){var b=(i(c,"href",!0)||"").substring(1),C=t[b],I=r(c);return C?C instanceof Xt?C.place(I):C.clone().translate(I):null},circle:function(c){return new Qt.Circle(r(c,"cx","cy"),i(c,"r"))},ellipse:function(c){return new Qt.Ellipse({center:r(c,"cx","cy"),radius:s(c,"rx","ry")})},rect:function(c){return new Qt.Rectangle(new ft(r(c),s(c)),s(c,"rx","ry"))},line:function(c){return new Pt.Line(r(c,"x1","y1"),r(c,"x2","y2"))},text:function(c){var b=new Je(r(c).add(r(c,"dx","dy")));return b.setContent(c.textContent.trim()||""),b},switch:h};function v(c,b,C,I){if(c.transform){for(var S=(I.getAttribute(C)||"").split(/\)\s*/g),E=new It,L=0,N=S.length;L<N;L++){var F=S[L];if(!F)break;for(var T=F.split(/\(\s*/),V=T[0],B=T[1].split(/[\s,]+/g),q=0,U=B.length;q<U;q++)B[q]=parseFloat(B[q]);switch(V){case"matrix":E.append(new It(B[0],B[1],B[2],B[3],B[4],B[5]));break;case"rotate":E.rotate(B[0],B[1]||0,B[2]||0);break;case"translate":E.translate(B[0],B[1]||0);break;case"scale":E.scale(B);break;case"skewX":E.skew(B[0],0);break;case"skewY":E.skew(0,B[0]);break}}c.transform(E)}}function g(c,b,C){var I=C==="fill-opacity"?"getFillColor":"getStrokeColor",S=c[I]&&c[I]();S&&S.setAlpha(parseFloat(b))}var d=R.set(R.each(ci,function(c){this[c.attribute]=function(b,C){if(b[c.set]&&(b[c.set](a(C,c.type,c.fromSVG)),c.type==="color")){var I=b[c.get]();if(I&&I._scaleToBounds){var S=b.getBounds();I.transform(new It().translate(S.getPoint()).scale(S.getSize()))}}}},{}),{id:function(c,b){t[b]=c,c.setName&&c.setName(b)},"clip-path":function(c,b){var C=k(b);if(C)if(C=C.clone(),C.setClipMask(!0),c instanceof qt)c.insertChild(0,C);else return new qt(C,c)},gradientTransform:v,transform:v,"fill-opacity":g,"stroke-opacity":g,visibility:function(c,b){c.setVisible&&c.setVisible(b==="visible")},display:function(c,b){c.setVisible&&c.setVisible(b!==null)},"stop-color":function(c,b){c.setColor&&c.setColor(b)},"stop-opacity":function(c,b){c._color&&c._color.setAlpha(parseFloat(b))},offset:function(c,b){if(c.setOffset){var C=b.match(/(.*)%$/);c.setOffset(C?C[1]/100:parseFloat(b))}},viewBox:function(c,b,C,I,S){var E=new ft(a(b,"array")),L=s(I,null,null,!0),N,F;if(c instanceof qt){var T=L?L.divide(E.getSize()):1,F=new It().scale(T).translate(E.getPoint().negate());N=c}else c instanceof Xt&&(L&&E.setSize(L),N=c._item);if(N){if(w(I,"overflow",S)!=="visible"){var V=new Qt.Rectangle(E);V.setClipMask(!0),N.addChild(V)}F&&N.transform(F)}}});function w(c,b,C){var I=c.attributes[b],S=I&&I.value;if(!S&&c.style){var E=R.camelize(b);S=c.style[E],!S&&C.node[E]!==C.parent[E]&&(S=C.node[E])}return S?S==="none"?null:S:K}function m(c,b,C){var I=b.parentNode,S={node:Vt.getStyles(b)||{},parent:!C&&!/^defs$/i.test(I.tagName)&&Vt.getStyles(I)||{}};return R.each(d,function(E,L){var N=w(b,L,S);c=N!==K&&E(c,N,L,b,S)||c}),c}function k(c){var b=c&&c.match(/\((?:["'#]*)([^"')]+)/),C=b&&b[1],I=C&&t[Ct?C.replace(Ct.location.href.split("#")[0]+"#",""):C];return I&&I._scaleToBounds&&(I=I.clone(),I._scaleToBounds=!0),I}function p(c,b,C){var I=c.nodeName.toLowerCase(),S=I!=="#document",E=_t.body,L,N,F;C&&S&&(e=lt.getView().getSize(),e=s(c,null,null,!0)||e,L=Bt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),N=c.parentNode,F=c.nextSibling,L.appendChild(c),E.appendChild(L));var T=lt.settings,V=T.applyMatrix,B=T.insertItems;T.applyMatrix=!1,T.insertItems=!1;var q=_[I],U=q&&q(c,I,b,C)||null;if(T.insertItems=B,T.applyMatrix=V,U){S&&!(U instanceof qt)&&(U=m(U,c,C));var W=b.onImport,J=S&&c.getAttribute("data-paper-data");W&&(U=W(c,U,b)||U),b.expandShapes&&U instanceof Qt&&(U.remove(),U=U.toPath()),J&&(U._data=JSON.parse(J))}return L&&(E.removeChild(L),N&&(F?N.insertBefore(c,F):N.appendChild(c))),C&&(t={},U&&R.pick(b.applyMatrix,V)&&U.matrix.apply(!0,!0)),U}function y(c,b,C){if(!c)return null;b=typeof b=="function"?{onLoad:b}:b||{};var I=lt,S=null;function E(T){try{var V=typeof T=="object"?T:new Lt.DOMParser().parseFromString(T.trim(),"image/svg+xml");if(!V.nodeName)throw V=null,new Error("Unsupported SVG source: "+c);lt=I,S=p(V,b,!0),(!b||b.insert!==!1)&&C._insertItem(K,S);var B=b.onLoad;B&&B(S,T)}catch(q){L(q)}}function L(T,V){var B=b.onError;if(B)B(T,V);else throw new Error(T)}if(typeof c=="string"&&!/^[\s\S]*</.test(c)){var N=_t.getElementById(c);N?E(N):ei.request({url:c,async:!0,onLoad:E,onError:L})}else if(typeof File<"u"&&c instanceof File){var F=new FileReader;return F.onload=function(){E(F.result)},F.onerror=function(){L(F.error)},F.readAsText(c)}else E(c);return S}A.inject({importSVG:function(c,b){return y(c,b,this)}}),Et.inject({importSVG:function(c,b){return this.activate(),y(c,b,this)}})},R.exports.PaperScript=function(){var t=this,e=t.acorn;if(!e&&typeof sr<"u")try{e=or()}catch{}if(!e){var i,r;e=i=r={},function(m,k){if(typeof i=="object"&&typeof r=="object")return k(i);if(typeof K=="function"&&K.amd)return K(["exports"],k);k(m.acorn||(m.acorn={}))}(this,function(m){m.version="0.5.0";var k,p,y,c;m.parse=function(M,z){return p=String(M),y=p.length,C(z),nn(),Gn(k.program)};var b=m.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function C(M){k=M||{};for(var z in b)Object.prototype.hasOwnProperty.call(k,z)||(k[z]=b[z]);c=k.sourceFile||null}var I=m.getLineInfo=function(M,z){for(var j=1,X=0;;){ni.lastIndex=X;var bt=ni.exec(M);if(bt&&bt.index<z)++j,X=bt.index+bt[0].length;else break}return{line:j,column:z-X}};m.tokenize=function(M,z){p=String(M),y=p.length,C(z),nn();var j={};function X(bt){return J=L,Ze(bt),j.start=E,j.end=L,j.startLoc=N,j.endLoc=F,j.type=T,j.value=V,j}return X.jumpTo=function(bt,wt){if(S=bt,k.locations){q=1,U=ni.lastIndex=0;for(var St;(St=ni.exec(p))&&St.index<bt;)++q,U=St.index+St[0].length}B=wt,ri()},X};var S,E,L,N,F,T,V,B,q,U,W,J,et,it,at,Z;function Q(M,z){var j=I(p,M);z+=" ("+j.line+":"+j.column+")";var X=new SyntaxError(z);throw X.pos=M,X.loc=j,X.raisedAt=S,X}var st=[],ut={type:"num"},ot={type:"regexp"},pt={type:"string"},dt={type:"name"},xt={type:"eof"},tt={keyword:"break"},ct={keyword:"case",beforeExpr:!0},Zt={keyword:"catch"},Yt={keyword:"continue"},ee={keyword:"debugger"},zt={keyword:"default"},Ot={keyword:"do",isLoop:!0},Ht={keyword:"else",beforeExpr:!0},se={keyword:"finally"},Jt={keyword:"for",isLoop:!0},ae={keyword:"function"},Ce={keyword:"if"},de={keyword:"return",beforeExpr:!0},pe={keyword:"switch"},ie={keyword:"throw",beforeExpr:!0},mt={keyword:"try"},Ae={keyword:"var"},ge={keyword:"while",isLoop:!0},Ge={keyword:"with"},di={keyword:"new",beforeExpr:!0},yi={keyword:"this"},wi={keyword:"null",atomValue:null},Si={keyword:"true",atomValue:!0},n={keyword:"false",atomValue:!1},u={keyword:"in",binop:7,beforeExpr:!0},x={break:tt,case:ct,catch:Zt,continue:Yt,debugger:ee,default:zt,do:Ot,else:Ht,finally:se,for:Jt,function:ae,if:Ce,return:de,switch:pe,throw:ie,try:mt,var:Ae,while:ge,with:Ge,null:wi,true:Si,false:n,new:di,in:u,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:yi,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},P={type:"[",beforeExpr:!0},O={type:"]"},H={type:"{",beforeExpr:!0},G={type:"}"},$={type:"(",beforeExpr:!0},nt={type:")"},vt={type:",",beforeExpr:!0},yt={type:";",beforeExpr:!0},Wt={type:":",beforeExpr:!0},ke={type:"."},Ne={type:"?",beforeExpr:!0},Ee={binop:10,beforeExpr:!0},Fe={isAssign:!0,beforeExpr:!0},_e={isAssign:!0,beforeExpr:!0},Be={postfix:!0,prefix:!0,isUpdate:!0},Ki={prefix:!0,beforeExpr:!0},Qi={binop:1,beforeExpr:!0},Xi={binop:2,beforeExpr:!0},bn={binop:3,beforeExpr:!0},xn={binop:4,beforeExpr:!0},yn={binop:5,beforeExpr:!0},wn={binop:6,beforeExpr:!0},Sn={binop:7,beforeExpr:!0},Cn={binop:8,beforeExpr:!0},kn={binop:9,prefix:!0,beforeExpr:!0},In={binop:10,beforeExpr:!0};m.tokTypes={bracketL:P,bracketR:O,braceL:H,braceR:G,parenL:$,parenR:nt,comma:vt,semi:yt,colon:Wt,dot:ke,question:Ne,slash:Ee,eq:Fe,name:dt,eof:xt,num:ut,regexp:ot,string:pt};for(var Yi in x)m.tokTypes["_"+Yi]=x[Yi];function pi(M){M=M.split(" ");var z="",j=[];t:for(var X=0;X<M.length;++X){for(var bt=0;bt<j.length;++bt)if(j[bt][0].length==M[X].length){j[bt].push(M[X]);continue t}j.push([M[X]])}function wt(Mt){if(Mt.length==1)return z+="return str === "+JSON.stringify(Mt[0])+";";z+="switch(str){";for(var Pe=0;Pe<Mt.length;++Pe)z+="case "+JSON.stringify(Mt[Pe])+":";z+="return true}return false;"}if(j.length>3){j.sort(function(Mt,Pe){return Pe.length-Mt.length}),z+="switch(str.length){";for(var X=0;X<j.length;++X){var St=j[X];z+="case "+St[0].length+":",wt(St)}z+="}"}else wt(M);return new Function("str",z)}var Pn=pi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),An=pi("class enum extends super const export import"),Ji=pi("implements interface let package private protected public static yield"),Ci=pi("eval arguments"),En=pi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Tn=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,$i="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ln="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",tn=new RegExp("["+$i+"]"),Nn=new RegExp("["+$i+Ln+"]"),ki=/[\n\r\u2028\u2029]/,ni=/\r\n|[\n\r\u2028\u2029]/g,Ii=m.isIdentifierStart=function(M){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M>=170&&tn.test(String.fromCharCode(M))},en=m.isIdentifierChar=function(M){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M>=170&&Nn.test(String.fromCharCode(M))};function je(){this.line=q,this.column=S-U}function nn(){q=1,S=U=0,B=!0,ri()}function ne(M,z){L=S,k.locations&&(F=new je),T=M,ri(),V=z,B=M.beforeExpr}function On(){var M=k.onComment&&k.locations&&new je,z=S,j=p.indexOf("*/",S+=2);if(j===-1&&Q(S-2,"Unterminated comment"),S=j+2,k.locations){ni.lastIndex=z;for(var X;(X=ni.exec(p))&&X.index<S;)++q,U=X.index+X[0].length}k.onComment&&k.onComment(!0,p.slice(z+2,j),z,S,M,k.locations&&new je)}function Oi(){for(var M=S,z=k.onComment&&k.locations&&new je,j=p.charCodeAt(S+=2);S<y&&j!==10&&j!==13&&j!==8232&&j!==8233;)++S,j=p.charCodeAt(S);k.onComment&&k.onComment(!1,p.slice(M+2,S),M,S,z,k.locations&&new je)}function ri(){for(;S<y;){var M=p.charCodeAt(S);if(M===32)++S;else if(M===13){++S;var z=p.charCodeAt(S);z===10&&++S,k.locations&&(++q,U=S)}else if(M===10||M===8232||M===8233)++S,k.locations&&(++q,U=S);else if(M>8&&M<14)++S;else if(M===47){var z=p.charCodeAt(S+1);if(z===42)On();else if(z===47)Oi();else break}else if(M===160)++S;else if(M>=5760&&Tn.test(String.fromCharCode(M)))++S;else break}}function Mn(){var M=p.charCodeAt(S+1);return M>=48&&M<=57?sn(!0):(++S,ne(ke))}function Rn(){var M=p.charCodeAt(S+1);return B?(++S,rn()):M===61?re(_e,2):re(Ee,1)}function Vn(){var M=p.charCodeAt(S+1);return M===61?re(_e,2):re(In,1)}function Fn(M){var z=p.charCodeAt(S+1);return z===M?re(M===124?Qi:Xi,2):z===61?re(_e,2):re(M===124?bn:yn,1)}function Bn(){var M=p.charCodeAt(S+1);return M===61?re(_e,2):re(xn,1)}function zn(M){var z=p.charCodeAt(S+1);return z===M?z==45&&p.charCodeAt(S+2)==62&&ki.test(p.slice(J,S))?(S+=3,Oi(),ri(),Ze()):re(Be,2):z===61?re(_e,2):re(kn,1)}function Dn(M){var z=p.charCodeAt(S+1),j=1;return z===M?(j=M===62&&p.charCodeAt(S+2)===62?3:2,p.charCodeAt(S+j)===61?re(_e,j+1):re(Cn,j)):z==33&&M==60&&p.charCodeAt(S+2)==45&&p.charCodeAt(S+3)==45?(S+=4,Oi(),ri(),Ze()):(z===61&&(j=p.charCodeAt(S+2)===61?3:2),re(Sn,j))}function qn(M){var z=p.charCodeAt(S+1);return z===61?re(wn,p.charCodeAt(S+2)===61?3:2):re(M===61?Fe:Ki,1)}function Un(M){switch(M){case 46:return Mn();case 40:return++S,ne($);case 41:return++S,ne(nt);case 59:return++S,ne(yt);case 44:return++S,ne(vt);case 91:return++S,ne(P);case 93:return++S,ne(O);case 123:return++S,ne(H);case 125:return++S,ne(G);case 58:return++S,ne(Wt);case 63:return++S,ne(Ne);case 48:var z=p.charCodeAt(S+1);if(z===120||z===88)return Hn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return sn(!1);case 34:case 39:return Wn(M);case 47:return Rn();case 37:case 42:return Vn();case 124:case 38:return Fn(M);case 94:return Bn();case 43:case 45:return zn(M);case 60:case 62:return Dn(M);case 61:case 33:return qn(M);case 126:return re(Ki,1)}return!1}function Ze(M){if(M?S=E+1:E=S,k.locations&&(N=new je),M)return rn();if(S>=y)return ne(xt);var z=p.charCodeAt(S);if(Ii(z)||z===92)return un();var j=Un(z);if(j===!1){var X=String.fromCharCode(z);if(X==="\\"||tn.test(X))return un();Q(S,"Unexpected character '"+X+"'")}return j}function re(M,z){var j=p.slice(S,S+z);S+=z,ne(M,j)}function rn(){for(var bt="",M,z,j=S;;){S>=y&&Q(j,"Unterminated regular expression");var X=p.charAt(S);if(ki.test(X)&&Q(j,"Unterminated regular expression"),M)M=!1;else{if(X==="[")z=!0;else if(X==="]"&&z)z=!1;else if(X==="/"&&!z)break;M=X==="\\"}++S}var bt=p.slice(j,S);++S;var wt=an();wt&&!/^[gmsiy]*$/.test(wt)&&Q(j,"Invalid regexp flag");try{var St=new RegExp(bt,wt)}catch(Mt){Mt instanceof SyntaxError&&Q(j,Mt.message),Q(Mt)}return ne(ot,St)}function gi(M,z){for(var j=S,X=0,bt=0,wt=z??1/0;bt<wt;++bt){var St=p.charCodeAt(S),Mt;if(St>=97?Mt=St-97+10:St>=65?Mt=St-65+10:St>=48&&St<=57?Mt=St-48:Mt=1/0,Mt>=M)break;++S,X=X*M+Mt}return S===j||z!=null&&S-j!==z?null:X}function Hn(){S+=2;var M=gi(16);return M==null&&Q(E+2,"Expected hexadecimal number"),Ii(p.charCodeAt(S))&&Q(S,"Identifier directly after number"),ne(ut,M)}function sn(M){var z=S,j=!1,X=p.charCodeAt(S)===48;!M&&gi(10)===null&&Q(z,"Invalid number"),p.charCodeAt(S)===46&&(++S,gi(10),j=!0);var bt=p.charCodeAt(S);(bt===69||bt===101)&&(bt=p.charCodeAt(++S),(bt===43||bt===45)&&++S,gi(10)===null&&Q(z,"Invalid number"),j=!0),Ii(p.charCodeAt(S))&&Q(S,"Identifier directly after number");var wt=p.slice(z,S),St;return j?St=parseFloat(wt):!X||wt.length===1?St=parseInt(wt,10):/[89]/.test(wt)||Z?Q(z,"Invalid number"):St=parseInt(wt,8),ne(ut,St)}function Wn(M){S++;for(var z="";;){S>=y&&Q(E,"Unterminated string constant");var j=p.charCodeAt(S);if(j===M)return++S,ne(pt,z);if(j===92){j=p.charCodeAt(++S);var X=/^[0-7]+/.exec(p.slice(S,S+3));for(X&&(X=X[0]);X&&parseInt(X,8)>255;)X=X.slice(0,-1);if(X==="0"&&(X=null),++S,X)Z&&Q(S-2,"Octal literal in strict mode"),z+=String.fromCharCode(parseInt(X,8)),S+=X.length-1;else switch(j){case 110:z+=`
`;break;case 114:z+="\r";break;case 120:z+=String.fromCharCode(Pi(2));break;case 117:z+=String.fromCharCode(Pi(4));break;case 85:z+=String.fromCharCode(Pi(8));break;case 116:z+="	";break;case 98:z+="\b";break;case 118:z+="\v";break;case 102:z+="\f";break;case 48:z+="\0";break;case 13:p.charCodeAt(S)===10&&++S;case 10:k.locations&&(U=S,++q);break;default:z+=String.fromCharCode(j);break}}else(j===13||j===10||j===8232||j===8233)&&Q(E,"Unterminated string constant"),z+=String.fromCharCode(j),++S}}function Pi(M){var z=gi(16,M);return z===null&&Q(E,"Bad character escape sequence"),z}var si;function an(){si=!1;for(var M,z=!0,j=S;;){var X=p.charCodeAt(S);if(en(X))si&&(M+=p.charAt(S)),++S;else if(X===92){si||(M=p.slice(j,S)),si=!0,p.charCodeAt(++S)!=117&&Q(S,"Expecting Unicode escape sequence \\uXXXX"),++S;var bt=Pi(4),wt=String.fromCharCode(bt);wt||Q(S-1,"Invalid Unicode escape"),(z?Ii(bt):en(bt))||Q(S-4,"Invalid Unicode escape"),M+=wt}else break;z=!1}return si?M:p.slice(j,S)}function un(){var M=an(),z=dt;return!si&&En(M)&&(z=x[M]),ne(z,M)}function Nt(){W=E,J=L,et=F,Ze()}function Mi(M){if(Z=M,S=E,k.locations)for(;S<U;)U=p.lastIndexOf(`
`,U-2)+1,--q;ri(),Ze()}function on(){this.type=null,this.start=E,this.end=null}function hn(){this.start=N,this.end=null,c!==null&&(this.source=c)}function ue(){var M=new on;return k.locations&&(M.loc=new hn),k.directSourceFile&&(M.sourceFile=k.directSourceFile),k.ranges&&(M.range=[E,0]),M}function ze(M){var z=new on;return z.start=M.start,k.locations&&(z.loc=new hn,z.loc.start=M.loc.start),k.ranges&&(z.range=[M.range[0],0]),z}function Tt(M,z){return M.type=z,M.end=J,k.locations&&(M.loc.end=et),k.ranges&&(M.range[1]=J),M}function Ri(M){return k.ecmaVersion>=5&&M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&M.expression.value==="use strict"}function Gt(M){if(T===M)return Nt(),!0}function Ai(){return!k.strictSemicolons&&(T===xt||T===G||ki.test(p.slice(J,E)))}function Ke(){!Gt(yt)&&!Ai()&&Oe()}function $t(M){T===M?Nt():Oe()}function Oe(){Q(E,"Unexpected token")}function Ei(M){M.type!=="Identifier"&&M.type!=="MemberExpression"&&Q(M.start,"Assigning to rvalue"),Z&&M.type==="Identifier"&&Ci(M.name)&&Q(M.start,"Assigning to "+M.name+" in strict mode")}function Gn(M){W=J=S,k.locations&&(et=new je),it=Z=null,at=[],Ze();var z=M||ue(),j=!0;for(M||(z.body=[]);T!==xt;){var X=Ie();z.body.push(X),j&&Ri(X)&&Mi(!0),j=!1}return Tt(z,"Program")}var Vi={kind:"loop"},jn={kind:"switch"};function Ie(){(T===Ee||T===_e&&V=="/=")&&Ze(!0);var M=T,z=ue();switch(M){case tt:case Yt:Nt();var j=M===tt;Gt(yt)||Ai()?z.label=null:T!==dt?Oe():(z.label=De(),Ke());for(var X=0;X<at.length;++X){var bt=at[X];if((z.label==null||bt.name===z.label.name)&&(bt.kind!=null&&(j||bt.kind==="loop")||z.label&&j))break}return X===at.length&&Q(z.start,"Unsyntactic "+M.keyword),Tt(z,j?"BreakStatement":"ContinueStatement");case ee:return Nt(),Ke(),Tt(z,"DebuggerStatement");case Ot:return Nt(),at.push(Vi),z.body=Ie(),at.pop(),$t(ge),z.test=_i(),Ke(),Tt(z,"DoWhileStatement");case Jt:if(Nt(),at.push(Vi),$t($),T===yt)return Fi(z,null);if(T===Ae){var wt=ue();return Nt(),fn(wt,!0),Tt(wt,"VariableDeclaration"),wt.declarations.length===1&&Gt(u)?ln(z,wt):Fi(z,wt)}var wt=he(!1,!0);return Gt(u)?(Ei(wt),ln(z,wt)):Fi(z,wt);case ae:return Nt(),Ui(z,!0);case Ce:return Nt(),z.test=_i(),z.consequent=Ie(),z.alternate=Gt(Ht)?Ie():null,Tt(z,"IfStatement");case de:return!it&&!k.allowReturnOutsideFunction&&Q(E,"'return' outside of function"),Nt(),Gt(yt)||Ai()?z.argument=null:(z.argument=he(),Ke()),Tt(z,"ReturnStatement");case pe:Nt(),z.discriminant=_i(),z.cases=[],$t(H),at.push(jn);for(var St,Mt;T!=G;)if(T===ct||T===zt){var Pe=T===ct;St&&Tt(St,"SwitchCase"),z.cases.push(St=ue()),St.consequent=[],Nt(),Pe?St.test=he():(Mt&&Q(W,"Multiple default clauses"),Mt=!0,St.test=null),$t(Wt)}else St||Oe(),St.consequent.push(Ie());return St&&Tt(St,"SwitchCase"),Nt(),at.pop(),Tt(z,"SwitchStatement");case ie:return Nt(),ki.test(p.slice(J,E))&&Q(J,"Illegal newline after throw"),z.argument=he(),Ke(),Tt(z,"ThrowStatement");case mt:if(Nt(),z.block=vi(),z.handler=null,T===Zt){var Qe=ue();Nt(),$t($),Qe.param=De(),Z&&Ci(Qe.param.name)&&Q(Qe.param.start,"Binding "+Qe.param.name+" in strict mode"),$t(nt),Qe.guard=null,Qe.body=vi(),z.handler=Tt(Qe,"CatchClause")}return z.guardedHandlers=st,z.finalizer=Gt(se)?vi():null,!z.handler&&!z.finalizer&&Q(z.start,"Missing catch or finally clause"),Tt(z,"TryStatement");case Ae:return Nt(),fn(z),Ke(),Tt(z,"VariableDeclaration");case ge:return Nt(),z.test=_i(),at.push(Vi),z.body=Ie(),at.pop(),Tt(z,"WhileStatement");case Ge:return Z&&Q(E,"'with' in strict mode"),Nt(),z.object=_i(),z.body=Ie(),Tt(z,"WithStatement");case H:return vi();case yt:return Nt(),Tt(z,"EmptyStatement");default:var Wi=V,Ti=he();if(M===dt&&Ti.type==="Identifier"&&Gt(Wt)){for(var X=0;X<at.length;++X)at[X].name===Wi&&Q(Ti.start,"Label '"+Wi+"' is already declared");var Jn=T.isLoop?"loop":T===pe?"switch":null;return at.push({name:Wi,kind:Jn}),z.body=Ie(),at.pop(),z.label=Ti,Tt(z,"LabeledStatement")}else return z.expression=Ti,Ke(),Tt(z,"ExpressionStatement")}}function _i(){$t($);var M=he();return $t(nt),M}function vi(M){var z=ue(),j=!0,X=!1,bt;for(z.body=[],$t(H);!Gt(G);){var wt=Ie();z.body.push(wt),j&&M&&Ri(wt)&&(bt=X,Mi(X=!0)),j=!1}return X&&!bt&&Mi(!1),Tt(z,"BlockStatement")}function Fi(M,z){return M.init=z,$t(yt),M.test=T===yt?null:he(),$t(yt),M.update=T===nt?null:he(),$t(nt),M.body=Ie(),at.pop(),Tt(M,"ForStatement")}function ln(M,z){return M.left=z,M.right=he(),$t(nt),M.body=Ie(),at.pop(),Tt(M,"ForInStatement")}function fn(M,z){for(M.declarations=[],M.kind="var";;){var j=ue();if(j.id=De(),Z&&Ci(j.id.name)&&Q(j.id.start,"Binding "+j.id.name+" in strict mode"),j.init=Gt(Fe)?he(!0,z):null,M.declarations.push(Tt(j,"VariableDeclarator")),!Gt(vt))break}return M}function he(M,z){var j=Bi(z);if(!M&&T===vt){var X=ze(j);for(X.expressions=[j];Gt(vt);)X.expressions.push(Bi(z));return Tt(X,"SequenceExpression")}return j}function Bi(M){var z=Zn(M);if(T.isAssign){var j=ze(z);return j.operator=V,j.left=z,Nt(),j.right=Bi(M),Ei(z),Tt(j,"AssignmentExpression")}return z}function Zn(M){var z=Kn(M);if(Gt(Ne)){var j=ze(z);return j.test=z,j.consequent=he(!0),$t(Wt),j.alternate=he(!0,M),Tt(j,"ConditionalExpression")}return z}function Kn(M){return zi(Di(),-1,M)}function zi(M,z,j){var X=T.binop;if(X!=null&&(!j||T!==u)&&X>z){var bt=ze(M);bt.left=M,bt.operator=V;var wt=T;Nt(),bt.right=zi(Di(),X,j);var St=Tt(bt,wt===Qi||wt===Xi?"LogicalExpression":"BinaryExpression");return zi(St,z,j)}return M}function Di(){if(T.prefix){var M=ue(),z=T.isUpdate;return M.operator=V,M.prefix=!0,B=!0,Nt(),M.argument=Di(),z?Ei(M.argument):Z&&M.operator==="delete"&&M.argument.type==="Identifier"&&Q(M.start,"Deleting local variable in strict mode"),Tt(M,z?"UpdateExpression":"UnaryExpression")}for(var j=Qn();T.postfix&&!Ai();){var M=ze(j);M.operator=V,M.prefix=!1,M.argument=j,Ei(j),Nt(),j=Tt(M,"UpdateExpression")}return j}function Qn(){return mi(qi())}function mi(M,z){if(Gt(ke)){var j=ze(M);return j.object=M,j.property=De(!0),j.computed=!1,mi(Tt(j,"MemberExpression"),z)}else if(Gt(P)){var j=ze(M);return j.object=M,j.property=he(),j.computed=!0,$t(O),mi(Tt(j,"MemberExpression"),z)}else if(!z&&Gt($)){var j=ze(M);return j.callee=M,j.arguments=Hi(nt,!1),mi(Tt(j,"CallExpression"),z)}else return M}function qi(){switch(T){case yi:var X=ue();return Nt(),Tt(X,"ThisExpression");case dt:return De();case ut:case pt:case ot:var X=ue();return X.value=V,X.raw=p.slice(E,L),Nt(),Tt(X,"Literal");case wi:case Si:case n:var X=ue();return X.value=T.atomValue,X.raw=T.keyword,Nt(),Tt(X,"Literal");case $:var M=N,z=E;Nt();var j=he();return j.start=z,j.end=L,k.locations&&(j.loc.start=M,j.loc.end=F),k.ranges&&(j.range=[z,L]),$t(nt),j;case P:var X=ue();return Nt(),X.elements=Hi(O,!0,!0),Tt(X,"ArrayExpression");case H:return Yn();case ae:var X=ue();return Nt(),Ui(X,!1);case di:return Xn();default:Oe()}}function Xn(){var M=ue();return Nt(),M.callee=mi(qi(),!0),Gt($)?M.arguments=Hi(nt,!1):M.arguments=st,Tt(M,"NewExpression")}function Yn(){var M=ue(),z=!0,j=!1;for(M.properties=[],Nt();!Gt(G);){if(z)z=!1;else if($t(vt),k.allowTrailingCommas&&Gt(G))break;var X={key:cn()},bt=!1,wt;if(Gt(Wt)?(X.value=he(!0),wt=X.kind="init"):k.ecmaVersion>=5&&X.key.type==="Identifier"&&(X.key.name==="get"||X.key.name==="set")?(bt=j=!0,wt=X.kind=X.key.name,X.key=cn(),T!==$&&Oe(),X.value=Ui(ue(),!1)):Oe(),X.key.type==="Identifier"&&(Z||j))for(var St=0;St<M.properties.length;++St){var Mt=M.properties[St];if(Mt.key.name===X.key.name){var Pe=wt==Mt.kind||bt&&Mt.kind==="init"||wt==="init"&&(Mt.kind==="get"||Mt.kind==="set");Pe&&!Z&&wt==="init"&&Mt.kind==="init"&&(Pe=!1),Pe&&Q(X.key.start,"Redefinition of property")}}M.properties.push(X)}return Tt(M,"ObjectExpression")}function cn(){return T===ut||T===pt?qi():De(!0)}function Ui(M,z){T===dt?M.id=De():z?Oe():M.id=null,M.params=[];var j=!0;for($t($);!Gt(nt);)j?j=!1:$t(vt),M.params.push(De());var X=it,bt=at;if(it=!0,at=[],M.body=vi(!0),it=X,at=bt,Z||M.body.body.length&&Ri(M.body.body[0]))for(var wt=M.id?-1:0;wt<M.params.length;++wt){var St=wt<0?M.id:M.params[wt];if((Ji(St.name)||Ci(St.name))&&Q(St.start,"Defining '"+St.name+"' in strict mode"),wt>=0)for(var Mt=0;Mt<wt;++Mt)St.name===M.params[Mt].name&&Q(St.start,"Argument name clash in strict mode")}return Tt(M,z?"FunctionDeclaration":"FunctionExpression")}function Hi(M,z,j){for(var X=[],bt=!0;!Gt(M);){if(bt)bt=!1;else if($t(vt),z&&k.allowTrailingCommas&&Gt(M))break;j&&T===vt?X.push(null):X.push(he(!0))}return X}function De(M){var z=ue();return M&&k.forbidReserved=="everywhere"&&(M=!1),T===dt?(!M&&(k.forbidReserved&&(k.ecmaVersion===3?Pn:An)(V)||Z&&Ji(V))&&p.slice(E,L).indexOf("\\")==-1&&Q(E,"The keyword '"+V+"' is reserved"),z.name=V):M&&T.keyword?z.name=T.keyword:Oe(),B=!1,Nt(),Tt(z,"Identifier")}}),e.version||(e=null)}function s(m,k){return(t.acorn||e).parse(m,k)}var a={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},h={"-":"__negate","+":"__self"},o=R.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(m){this["__"+m]="#"+m},{__self:function(){return this}});D.inject(o),ht.inject(o),jt.inject(o);function l(m,k,p){var y=a[k];if(m&&m[y]){var c=m[y](p);return k==="!="?!c:c}switch(k){case"+":return m+p;case"-":return m-p;case"*":return m*p;case"/":return m/p;case"%":return m%p;case"==":return m==p;case"!=":return m!=p}}function f(m,k){var p=h[m];if(k&&k[p])return k[p]();switch(m){case"+":return+k;case"-":return-k}}function _(m,k){if(!m)return"";k=k||{};var p=[];function y(Z){for(var Q=0,st=p.length;Q<st;Q++){var ut=p[Q];if(ut[0]>=Z)break;Z+=ut[1]}return Z}function c(Z){return m.substring(y(Z.range[0]),y(Z.range[1]))}function b(Z,Q){return m.substring(y(Z.range[1]),y(Q.range[0]))}function C(Z,Q){for(var st=y(Z.range[0]),ut=y(Z.range[1]),ot=0,pt=p.length-1;pt>=0;pt--)if(st>p[pt][0]){ot=pt+1;break}p.splice(ot,0,[st,Q.length-ut+st]),m=m.substring(0,st)+Q+m.substring(ut)}function I(Z,Q){switch(Z.type){case"UnaryExpression":if(Z.operator in h&&Z.argument.type!=="Literal"){var st=c(Z.argument);C(Z,'$__("'+Z.operator+'", '+st+")")}break;case"BinaryExpression":if(Z.operator in a&&Z.left.type!=="Literal"){var ut=c(Z.left),ot=c(Z.right),pt=b(Z.left,Z.right),dt=Z.operator;C(Z,"__$__("+ut+","+pt.replace(new RegExp("\\"+dt),'"'+dt+'"')+", "+ot+")")}break;case"UpdateExpression":case"AssignmentExpression":var xt=Q&&Q.type;if(!(xt==="ForStatement"||xt==="BinaryExpression"&&/^[=!<>]/.test(Q.operator)||xt==="MemberExpression"&&Q.computed)){if(Z.type==="UpdateExpression"){var st=c(Z.argument),tt="__$__("+st+', "'+Z.operator[0]+'", 1)',ct=st+" = "+tt;Z.prefix?ct="("+ct+")":(xt==="AssignmentExpression"||xt==="VariableDeclarator"||xt==="BinaryExpression")&&(c(Q.left||Q.id)===st&&(ct=tt),ct=st+"; "+ct),C(Z,ct)}else if(/^.=$/.test(Z.operator)&&Z.left.type!=="Literal"){var ut=c(Z.left),ot=c(Z.right),tt=ut+" = __$__("+ut+', "'+Z.operator[0]+'", '+ot+")";C(Z,/^\(.*\)$/.test(c(Z))?"("+tt+")":tt)}}break}}function S(Z){switch(Z.type){case"ExportDefaultDeclaration":C({range:[Z.start,Z.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Q=Z.declaration,st=Z.specifiers;if(Q){var ut=Q.declarations;ut&&(ut.forEach(function(pt){C(pt,"module.exports."+c(pt))}),C({range:[Z.start,Q.start+Q.kind.length]},""))}else if(st){var ot=st.map(function(pt){var dt=c(pt);return"module.exports."+dt+" = "+dt+"; "}).join("");ot&&C(Z,ot)}break}}function E(Z,Q,st){if(Z){for(var ut in Z)if(ut!=="range"&&ut!=="loc"){var ot=Z[ut];if(Array.isArray(ot))for(var pt=0,dt=ot.length;pt<dt;pt++)E(ot[pt],Z,st);else ot&&typeof ot=="object"&&E(ot,Z,st)}st.operatorOverloading!==!1&&I(Z,Q),st.moduleExports!==!1&&S(Z)}}function L(Z){var Q="",st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Z=(Math.abs(Z)<<1)+(Z<0?1:0);Z||!Q;){var ut=Z&31;Z>>=5,Z&&(ut|=32),Q+=st[ut]}return Q}var N=k.url||"",F=k.sourceMaps,T=k.paperFeatures||{},V=k.source||m,B=k.offset||0,q=lt.agent,U=q.versionNumber,W=!1,J=/\r\n|\n|\r/mg,et;if(F&&(q.chrome&&U>=30||q.webkit&&U>=537.76||q.firefox&&U>=23||q.node)){if(q.node)B-=2;else if(Ct&&N&&!Ct.location.href.indexOf(N)){var it=_t.getElementsByTagName("html")[0].innerHTML;B=it.substr(0,it.indexOf(m)+1).match(J).length+1}W=B>0&&!(q.chrome&&U>=36||q.safari&&U>=600||q.firefox&&U>=40||q.node);var at=["AA"+L(W?0:B)+"A"];at.length=(m.match(J)||[]).length+1+(W?B:0),et={version:3,file:N,names:[],mappings:at.join(";AACA"),sourceRoot:"",sources:[N],sourcesContent:[V]}}return(T.operatorOverloading!==!1||T.moduleExports!==!1)&&E(s(m,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,T),et&&(W&&(m=new Array(B+1).join(`
`)+m),/^(inline|both)$/.test(F)&&(m+=`
//# sourceMappingURL=data:application/json;base64,`+Lt.btoa(unescape(encodeURIComponent(JSON.stringify(et))))),m+=`
//# sourceURL=`+(N||"paperscript")),{url:N,source:V,code:m,map:et}}function v(m,k,p){lt=k;var y=k.getView(),c=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(m)&&!/\bnew\s+Tool\b/.test(m)?new fi:null,b=c?c._events:[],C=["onFrame","onResize"].concat(b),I=[],S=[],E,L=typeof m=="object"?m:_(m,p);m=L.code;function N(U,W){for(var J in U)(W||!/^_/.test(J))&&new RegExp("([\\b\\s\\W]|^)"+J.replace(/\$/g,"\\$")+"\\b").test(m)&&(I.push(J),S.push(U[J]))}N({__$__:l,$__:f,paper:k,tool:c},!0),N(k),m="var module = { exports: {} }; "+m;var B=R.each(C,function(U){new RegExp("\\s+"+U+"\\b").test(m)&&(I.push(U),this.push("module.exports."+U+" = "+U+";"))},[]).join(`
`);B&&(m+=`
`+B),m+=`
return module.exports;`;var F=lt.agent;if(_t&&(F.chrome||F.firefox&&F.versionNumber<40)){var T=_t.createElement("script"),V=_t.head||_t.getElementsByTagName("head")[0];F.firefox&&(m=`
`+m),T.appendChild(_t.createTextNode("document.__paperscript__ = function("+I+") {"+m+`
}`)),V.appendChild(T),E=_t.__paperscript__,delete _t.__paperscript__,V.removeChild(T)}else E=Function(I,m);var B=E&&E.apply(k,S),q=B||{};return R.each(b,function(U){var W=q[U];W&&(c[U]=W)}),y&&(q.onResize&&y.setOnResize(q.onResize),y.emit("resize",{size:y.size,delta:new D}),q.onFrame&&y.setOnFrame(q.onFrame),y.requestUpdate()),B}function g(m){if(/^text\/(?:x-|)paperscript$/.test(m.type)&&Dt.getAttribute(m,"ignore")!=="true"){var k=Dt.getAttribute(m,"canvas"),p=_t.getElementById(k),y=m.src||m.getAttribute("data-src"),c=Dt.hasAttribute(m,"async"),b="data-paper-scope";if(!p)throw new Error('Unable to find canvas with id "'+k+'"');var C=Dt.get(p.getAttribute(b))||new Dt().setup(p);return p.setAttribute(b,C._id),y?ei.request({url:y,async:c,mimeType:"text/plain",onLoad:function(I){v(I,C,y)}}):v(m.innerHTML,C,m.baseURI),m.setAttribute("data-paper-ignore","true"),C}}function d(){R.each(_t&&_t.getElementsByTagName("script"),g)}function w(m){return m?g(m):d()}return Ct&&(_t.readyState==="complete"?setTimeout(d):Ut.add(Ct,{load:d})),{compile:_,execute:v,load:w,parse:s,calculateBinary:l,calculateUnary:f}}.call(this);var lt=new(Dt.inject(R.exports,{Base:R,Numerical:kt,Key:hi,DomEvent:Ut,DomElement:Vt,document:_t,window:Ct,Symbol:Xt,PlacedSymbol:qe}));return lt.agent.node&&dn(lt),typeof K=="function"&&K.amd?K("paper",lt):Y&&(Y.exports=lt),lt}).call(gn,typeof self=="object"?self:null)})(vn);var hr=vn.exports;const Xe=$n(hr);function xr(Y){return{scale_x:Gi(Y.scale_x),scale_y:Gi(Y.scale_y),rotation:Gi(Y.rotation)}}function yr(Y,Lt,K=new Xe.Point(0,0)){Y.scale(Lt.scale_x,Lt.scale_y,K),Y.rotate(Lt.rotation,K)}const wr=async Y=>[new Xe.Path.Rectangle(Y)],lr=async(Y,Lt)=>{const{negative:K=!1,squaring:Ct=.56,orientation:_t=ji.NE}=Lt,R=Y.topRight;let le;K?le=Y.topRight:le=Y.bottomLeft;const Dt=Y.topLeft,xe=Dt.add(R.subtract(Dt).multiply(Ct)),ye=Y.bottomRight,oe=ye.add(R.subtract(ye).multiply(Ct)),kt=new Xe.Path;return kt.moveTo(Dt),kt.cubicCurveTo(xe,oe,ye),kt.lineTo(le),kt.closePath(),(_t=="NE"||_t=="NW")&&kt.scale(1,-1,Y.center),(_t=="NW"||_t=="SW")&&kt.scale(-1,1,Y.center),[kt]},Sr=async(Y,Lt)=>{const{squaring:K=.56,negative:Ct=!1}=Lt,_t=new Xe.Size(Y.width/2,Y.height/2),R={SE:Y.topCenter,SW:Y.topLeft,NE:Y.center,NW:Y.leftCenter},le=[];for(const Dt of er){const xe=new Xe.Rectangle(R[Dt],_t),ye=await lr(xe,{squaring:K,negative:Ct,orientation:Dt});le.push(...ye)}return le},Cr=async(Y,Lt)=>{const K=await new Promise(_t=>{Xe.project.importSVG(Lt.url,{expandShapes:!0,onLoad:R=>{_t(R)}})});K.fitBounds(Y),K.scale(1,-1,Y.center);const Ct=mn(K);if(console.log(Lt),Lt.negative){let _t=new Xe.Path.Rectangle(Y);for(const R of Ct)_t=_t.subtract(R);return[_t]}else return Ct};function mn(Y){const Lt=[];if(!Y.clipMask){if(Y.className=="Path"||Y.className=="CompoundPath")Lt.push(Y);else if(Y.className=="Group"||Y.className=="Layer")for(const K of Y.children)Lt.push(...mn(K))}return Lt}export{_n as S,me as V,mr as a,vr as b,Gi as c,br as d,Sr as e,xr as f,yr as g,rr as h,gn as i,$n as j,fr as k,cr as l,dr as m,pr as n,_r as o,Xe as p,lr as q,wr as r,Cr as s,gr as v};
