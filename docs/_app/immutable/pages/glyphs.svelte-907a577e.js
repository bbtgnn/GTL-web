import{S as ne,i as se,s as oe,e as y,t as V,k as N,c as w,a as x,h as A,d as m,m as S,b as I,g as b,L as g,n as M,o as k,p as U,q as $,K as B,E as F,l as D,w as C,x as q,y as L,j as ie,B as R,M as ae,N as X,O as ue,P as _e,Q as z,R as pe,T as me,U as he,V as de}from"../chunks/index-17fa9bae.js";import{m as ge,s as $e,a as O,g as K}from"../chunks/index-e27e342f.js";import{n as be}from"../chunks/index.browser-85ea5a5b.js";import{I as ve}from"../chunks/inputText-acec54c9.js";import{S as ke,a as ye}from"../chunks/sidebarTile-f1708fa1.js";import{B as we}from"../chunks/button-9fd88305.js";import{g as Ee,a as xe,F as Ge}from"../chunks/createFont-2d013aa9.js";import"../chunks/index-c0ca21b6.js";import"../chunks/_commonjsHelpers-bc7114ed.js";import"../chunks/shapes-08d68f77.js";function J(a,e,l){const t=a.slice();return t[10]=e[l],t[12]=l,t}function Ie(a){let e,l;return{c(){e=y("p"),l=V("No glyphs")},l(t){e=w(t,"P",{});var r=x(e);l=A(r,"No glyphs"),r.forEach(m)},m(t,r){b(t,e,r),g(e,l)},p:F,i:F,o:F,d(t){t&&m(e)}}}function Ne(a){let e,l,t,r;const s=[De,Se],o=[];function i(n,f){return n[1]?0:n[3].length&&n[2]?1:-1}return~(e=i(a))&&(l=o[e]=s[e](a)),{c(){l&&l.c(),t=D()},l(n){l&&l.l(n),t=D()},m(n,f){~e&&o[e].m(n,f),b(n,t,f),r=!0},p(n,f){let _=e;e=i(n),e===_?~e&&o[e].p(n,f):(l&&(M(),k(o[_],1,1,()=>{o[_]=null}),U()),~e?(l=o[e],l?l.p(n,f):(l=o[e]=s[e](n),l.c()),$(l,1),l.m(t.parentNode,t)):l=null)},i(n){r||($(l),r=!0)},o(n){k(l),r=!1},d(n){~e&&o[e].d(n),n&&m(t)}}}function Se(a){let e,l,t=a[3],r=[];for(let o=0;o<t.length;o+=1)r[o]=Y(J(a,t,o));const s=o=>k(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=D()},l(o){for(let i=0;i<r.length;i+=1)r[i].l(o);e=D()},m(o,i){for(let n=0;n<r.length;n+=1)r[n].m(o,i);b(o,e,i),l=!0},p(o,i){if(i&12){t=o[3];let n;for(n=0;n<t.length;n+=1){const f=J(o,t,n);r[n]?(r[n].p(f,i),$(r[n],1)):(r[n]=Y(f),r[n].c(),$(r[n],1),r[n].m(e.parentNode,e))}for(M(),n=t.length;n<r.length;n+=1)s(n);U()}},i(o){if(!l){for(let i=0;i<t.length;i+=1)$(r[i]);l=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)k(r[i]);l=!1},d(o){ae(r,o),o&&m(e)}}}function De(a){let e,l;return{c(){e=y("p"),l=V("loading")},l(t){e=w(t,"P",{});var r=x(e);l=A(r,"loading"),r.forEach(m)},m(t,r){b(t,e,r),g(e,l)},p:F,i:F,o:F,d(t){t&&m(e)}}}function Y(a){let e,l,t=a[10].names.fontSubfamily.en+"",r,s,o,i,n;return o=new Ge({props:{canvasWidth:300,font:a[10],text:a[2]}}),{c(){e=y("div"),l=y("p"),r=V(t),s=N(),C(o.$$.fragment),i=N(),this.h()},l(f){e=w(f,"DIV",{class:!0});var _=x(e);l=w(_,"P",{class:!0});var c=x(l);r=A(c,t),c.forEach(m),s=S(_),q(o.$$.fragment,_),i=S(_),_.forEach(m),this.h()},h(){I(l,"class","text-small font-mono text-slate-900 text-sm"),I(e,"class","space-y-2")},m(f,_){b(f,e,_),g(e,l),g(l,r),g(e,s),L(o,e,null),g(e,i),n=!0},p(f,_){(!n||_&8)&&t!==(t=f[10].names.fontSubfamily.en+"")&&ie(r,t);const c={};_&8&&(c.font=f[10]),_&4&&(c.text=f[2]),o.$set(c)},i(f){n||($(o.$$.fragment,f),n=!0)},o(f){k(o.$$.fragment,f),n=!1},d(f){f&&m(e),R(o)}}}function Pe(a){let e,l,t,r,s,o,i;const n=[Ne,Ie],f=[];function _(c,v){return c[0]?0:1}return s=_(a),o=f[s]=n[s](a),{c(){e=y("div"),l=y("p"),t=V("Anteprima"),r=N(),o.c(),this.h()},l(c){e=w(c,"DIV",{class:!0});var v=x(e);l=w(v,"P",{class:!0});var u=x(l);t=A(u,"Anteprima"),u.forEach(m),r=S(v),o.l(v),v.forEach(m),this.h()},h(){I(l,"class","text-small font-mono text-slate-900 text-sm"),I(e,"class","space-y-8")},m(c,v){b(c,e,v),g(e,l),g(l,t),g(e,r),f[s].m(e,null),i=!0},p(c,[v]){let u=s;s=_(c),s===u?f[s].p(c,v):(M(),k(f[u],1,1,()=>{f[u]=null}),U(),o=f[s],o?o.p(c,v):(o=f[s]=n[s](c),o.c()),$(o,1),o.m(e,null))},i(c){i||($(o),i=!0)},o(c){k(o),i=!1},d(c){c&&m(e),f[s].d()}}}function Ve(a,e,l){let t,r,s,o;B(a,ge,u=>l(6,t=u)),B(a,$e,u=>l(7,r=u)),B(a,O,u=>l(4,s=u)),B(a,K,u=>l(5,o=u));let i=!1,n,f;function _(u){try{return String.fromCharCode(Ee(u.name))}catch(p){return console.log(p),""}}let c=[];async function v(u){if(!!u){l(1,i=!0),l(3,c=[]);try{for(let p of r)if(p&&p.rules.length){const E=await xe(p,[u],t);l(3,c=[...c,E])}}catch(p){console.log(p)}l(1,i=!1)}}return a.$$.update=()=>{a.$$.dirty&48&&s&&l(0,n=o.find(u=>u.id===s)),a.$$.dirty&1&&n&&l(2,f=_(n)),a.$$.dirty&1&&n&&v(n)},[n,i,f,c,s,o]}class Ae extends ne{constructor(e){super(),se(this,e,Ve,Pe,oe,{})}}function Z(a,e,l){const t=a.slice();return t[5]=e[l],t[6]=e,t[7]=l,t}function ee(a,e,l){const t=a.slice();return t[5]=e[l],t}function Te(a){let e;return{c(){e=V("+ Aggiungi glifo")},l(l){e=A(l,"+ Aggiungi glifo")},m(l,t){b(l,e,t)},d(l){l&&m(e)}}}function Be(a){let e,l;return e=new we({props:{$$slots:{default:[Te]},$$scope:{ctx:a}}}),e.$on("click",a[2]),{c(){C(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){L(e,t,r),l=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Fe(a){let e;return{c(){e=V("Lista glifi")},l(l){e=A(l,"Lista glifi")},m(l,t){b(l,e,t)},d(l){l&&m(e)}}}function Ce(a){let e=a[5].name+"",l,t;return{c(){l=V(e),t=N()},l(r){l=A(r,e),t=S(r)},m(r,s){b(r,l,s),b(r,t,s)},p(r,s){s&2&&e!==(e=r[5].name+"")&&ie(l,e)},d(r){r&&m(l),r&&m(t)}}}function te(a,e){let l,t,r;return t=new ye({props:{selection:O,id:e[5].id,$$slots:{default:[Ce]},$$scope:{ctx:e}}}),{key:a,first:null,c(){l=D(),C(t.$$.fragment),this.h()},l(s){l=D(),q(t.$$.fragment,s),this.h()},h(){this.first=l},m(s,o){b(s,l,o),L(t,s,o),r=!0},p(s,o){e=s;const i={};o&2&&(i.id=e[5].id),o&1026&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(s){r||($(t.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),r=!1},d(s){s&&m(l),R(t,s)}}}function qe(a){let e=[],l=new Map,t,r,s=a[1];const o=i=>i[5].id;for(let i=0;i<s.length;i+=1){let n=ee(a,s,i),f=o(n);l.set(f,e[i]=te(f,n))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=D()},l(i){for(let n=0;n<e.length;n+=1)e[n].l(i);t=D()},m(i,n){for(let f=0;f<e.length;f+=1)e[f].m(i,n);b(i,t,n),r=!0},p(i,n){n&2&&(s=i[1],M(),e=pe(e,n,o,1,i,s,l,t.parentNode,me,te,t,ee),U())},i(i){if(!r){for(let n=0;n<s.length;n+=1)$(e[n]);r=!0}},o(i){for(let n=0;n<e.length;n+=1)k(e[n]);r=!1},d(i){for(let n=0;n<e.length;n+=1)e[n].d(i);i&&m(t)}}}function le(a){let e,l,t,r,s,o,i,n,f,_,c,v,u,p,E,d,P,T;function fe(h){a[3](h,a[5])}let Q={};a[5].name!==void 0&&(Q.value=a[5].name),s=new ve({props:Q}),he.push(()=>de(s,"value",fe));function ce(){a[4].call(p,a[6],a[7])}return{c(){e=y("div"),l=y("p"),t=V("Nome glifo"),r=N(),C(s.$$.fragment),i=N(),n=y("hr"),f=N(),_=y("div"),c=y("p"),v=V("Struttura glifo"),u=N(),p=y("textarea"),E=N(),this.h()},l(h){e=w(h,"DIV",{class:!0});var G=x(e);l=w(G,"P",{class:!0});var j=x(l);t=A(j,"Nome glifo"),j.forEach(m),r=S(G),q(s.$$.fragment,G),G.forEach(m),i=S(h),n=w(h,"HR",{}),f=S(h),_=w(h,"DIV",{class:!0});var H=x(_);c=w(H,"P",{class:!0});var W=x(c);v=A(W,"Struttura glifo"),W.forEach(m),u=S(H),p=w(H,"TEXTAREA",{class:!0}),x(p).forEach(m),E=S(H),H.forEach(m),this.h()},h(){I(l,"class","text-small font-mono text-slate-900 mb-2 text-sm"),I(e,"class","shrink-0"),I(c,"class","text-small font-mono text-slate-900 mb-2 text-sm"),I(p,"class","h-0 grow p-2 bg-slate-200 tracking-[0.75em] hover:bg-slate-300 font-mono focus:ring-4"),I(_,"class","grow flex flex-col items-stretch")},m(h,G){b(h,e,G),g(e,l),g(l,t),g(e,r),L(s,e,null),b(h,i,G),b(h,n,G),b(h,f,G),b(h,_,G),g(_,c),g(c,v),g(_,u),g(_,p),X(p,a[5].structure),g(_,E),d=!0,P||(T=ue(p,"input",ce),P=!0)},p(h,G){a=h;const j={};!o&&G&2&&(o=!0,j.value=a[5].name,_e(()=>o=!1)),s.$set(j),G&2&&X(p,a[5].structure)},i(h){d||($(s.$$.fragment,h),d=!0)},o(h){k(s.$$.fragment,h),d=!1},d(h){h&&m(e),R(s),h&&m(i),h&&m(n),h&&m(f),h&&m(_),P=!1,T()}}}function re(a){let e,l,t=a[5].id==a[0]&&le(a);return{c(){t&&t.c(),e=D()},l(r){t&&t.l(r),e=D()},m(r,s){t&&t.m(r,s),b(r,e,s),l=!0},p(r,s){r[5].id==r[0]?t?(t.p(r,s),s&3&&$(t,1)):(t=le(r),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(M(),k(t,1,1,()=>{t=null}),U())},i(r){l||($(t),l=!0)},o(r){k(t),l=!1},d(r){t&&t.d(r),r&&m(e)}}}function Le(a){let e,l,t,r,s,o,i,n,f;t=new ke({props:{$$slots:{items:[qe],listTitle:[Fe],topArea:[Be]},$$scope:{ctx:a}}});let _=a[1],c=[];for(let u=0;u<_.length;u+=1)c[u]=re(Z(a,_,u));const v=u=>k(c[u],1,1,()=>{c[u]=null});return n=new Ae({}),{c(){e=y("div"),l=y("div"),C(t.$$.fragment),r=N(),s=y("div");for(let u=0;u<c.length;u+=1)c[u].c();o=N(),i=y("div"),C(n.$$.fragment),this.h()},l(u){e=w(u,"DIV",{class:!0});var p=x(e);l=w(p,"DIV",{class:!0});var E=x(l);q(t.$$.fragment,E),E.forEach(m),r=S(p),s=w(p,"DIV",{class:!0});var d=x(s);for(let T=0;T<c.length;T+=1)c[T].l(d);d.forEach(m),o=S(p),i=w(p,"DIV",{class:!0});var P=x(i);q(n.$$.fragment,P),P.forEach(m),p.forEach(m),this.h()},h(){I(l,"class","shrink-0 flex items-stretch"),I(s,"class","p-8 space-y-8 grow flex flex-col items-stretch"),I(i,"class","p-8 border border-l-gray-300 overflow-y-scroll"),I(e,"class","flex flex-row flex-nowrap items-stretch overflow-hidden grow")},m(u,p){b(u,e,p),g(e,l),L(t,l,null),g(e,r),g(e,s);for(let E=0;E<c.length;E+=1)c[E].m(s,null);g(e,o),g(e,i),L(n,i,null),f=!0},p(u,[p]){const E={};if(p&1026&&(E.$$scope={dirty:p,ctx:u}),t.$set(E),p&3){_=u[1];let d;for(d=0;d<_.length;d+=1){const P=Z(u,_,d);c[d]?(c[d].p(P,p),$(c[d],1)):(c[d]=re(P),c[d].c(),$(c[d],1),c[d].m(s,null))}for(M(),d=_.length;d<c.length;d+=1)v(d);U()}},i(u){if(!f){$(t.$$.fragment,u);for(let p=0;p<_.length;p+=1)$(c[p]);$(n.$$.fragment,u),f=!0}},o(u){k(t.$$.fragment,u),c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)k(c[p]);k(n.$$.fragment,u),f=!1},d(u){u&&m(e),R(t),ae(c,u),R(n)}}}function Re(a,e,l){let t,r;B(a,O,n=>l(0,t=n)),B(a,K,n=>l(1,r=n)),r.length||s();function s(){const n={id:be(5),name:"[aggiungi nome]",structure:""};z(K,r=[...r,n],r),z(O,t=n.id,t)}function o(n,f){a.$$.not_equal(f.name,n)&&(f.name=n,K.set(r))}function i(n,f){n[f].structure=this.value,K.set(r)}return[t,r,s,o,i]}class Je extends ne{constructor(e){super(),se(this,e,Re,Le,oe,{})}}export{Je as default};
