import{S as fe,i as ce,s as ue,e as E,t as V,k as I,c as x,a as S,h as A,d as _,m as N,b as G,g as k,L as v,n as j,o as y,p as M,q as b,K as U,E as X,w as T,x as B,y as P,B as q,l as R,M as pe,j as me,N as ee,O as ge,P as $e,Q,R as be,T as ve,U as ye,V as ke}from"../chunks/index-14642c17.js";import{s as H,g as L,a as _e,n as we}from"../chunks/index.browser-89930ef9.js";import{S as Ee,_ as xe,D as Se,a as De}from"../chunks/deleteButton-b10f0627.js";import{g as Ge,F as Ie,a as Ne,B as Ve,I as Ae}from"../chunks/fontGenerator-50922cd2.js";import{c as Te}from"../chunks/shapes-f7969361.js";import"../chunks/index-f0af3546.js";function te(i,t,n){const e=i.slice();return e[6]=t[n],e}function Be(i){let t,n;return{c(){t=E("p"),n=V("No glyphs")},l(e){t=x(e,"P",{});var l=S(t);n=A(l,"No glyphs"),l.forEach(_)},m(e,l){k(e,t,l),v(t,n)},p:X,i:X,o:X,d(e){e&&_(t)}}}function Pe(i){let t,n,e=i[2],l=[];for(let s=0;s<e.length;s+=1)l[s]=ne(te(i,e,s));const r=s=>y(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=R()},l(s){for(let a=0;a<l.length;a+=1)l[a].l(s);t=R()},m(s,a){for(let o=0;o<l.length;o+=1)l[o].m(s,a);k(s,t,a),n=!0},p(s,a){if(a&519){e=s[2];let o;for(o=0;o<e.length;o+=1){const c=te(s,e,o);l[o]?(l[o].p(c,a),b(l[o],1)):(l[o]=ne(c),l[o].c(),b(l[o],1),l[o].m(t.parentNode,t))}for(j(),o=e.length;o<l.length;o+=1)r(o);M()}},i(s){if(!n){for(let a=0;a<e.length;a+=1)b(l[a]);n=!0}},o(s){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(s){pe(l,s),s&&_(t)}}}function le(i){let t,n,e=i[9].names.fontSubfamily.en+"",l,r,s,a;return s=new Ne({props:{canvasWidth:300,font:i[9],text:i[1]}}),{c(){t=E("div"),n=E("p"),l=V(e),r=I(),T(s.$$.fragment),this.h()},l(o){t=x(o,"DIV",{class:!0});var c=S(t);n=x(c,"P",{class:!0});var d=S(n);l=A(d,e),d.forEach(_),r=N(c),B(s.$$.fragment,c),c.forEach(_),this.h()},h(){G(n,"class","text-small font-mono text-slate-900 text-sm"),G(t,"class","space-y-2")},m(o,c){k(o,t,c),v(t,n),v(n,l),v(t,r),P(s,t,null),a=!0},p(o,c){(!a||c&512)&&e!==(e=o[9].names.fontSubfamily.en+"")&&me(l,e);const d={};c&512&&(d.font=o[9]),c&2&&(d.text=o[1]),s.$set(d)},i(o){a||(b(s.$$.fragment,o),a=!0)},o(o){y(s.$$.fragment,o),a=!1},d(o){o&&_(t),q(s)}}}function qe(i){let t,n,e=i[9]&&le(i);return{c(){e&&e.c(),t=I()},l(l){e&&e.l(l),t=N(l)},m(l,r){e&&e.m(l,r),k(l,t,r),n=!0},p(l,r){l[9]?e?(e.p(l,r),r&512&&b(e,1)):(e=le(l),e.c(),b(e,1),e.m(t.parentNode,t)):e&&(j(),y(e,1,1,()=>{e=null}),M())},i(l){n||(b(e),n=!0)},o(l){y(e),n=!1},d(l){e&&e.d(l),l&&_(t)}}}function ne(i){let t,n;return t=new Ie({props:{syntax:i[6],glyphs:[i[0]],$$slots:{default:[qe,({font:e})=>({9:e}),({font:e})=>e?512:0]},$$scope:{ctx:i}}}),{c(){T(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,l){P(t,e,l),n=!0},p(e,l){const r={};l&4&&(r.syntax=e[6]),l&1&&(r.glyphs=[e[0]]),l&1538&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function Re(i){let t,n,e,l,r,s,a;const o=[Pe,Be],c=[];function d(u,p){return u[0]?0:1}return r=d(i),s=c[r]=o[r](i),{c(){t=E("div"),n=E("p"),e=V("Anteprima"),l=I(),s.c(),this.h()},l(u){t=x(u,"DIV",{class:!0});var p=S(t);n=x(p,"P",{class:!0});var f=S(n);e=A(f,"Anteprima"),f.forEach(_),l=N(p),s.l(p),p.forEach(_),this.h()},h(){G(n,"class","text-small font-mono text-slate-900 text-sm"),G(t,"class","space-y-8")},m(u,p){k(u,t,p),v(t,n),v(n,e),v(t,l),c[r].m(t,null),a=!0},p(u,[p]){let f=r;r=d(u),r===f?c[r].p(u,p):(j(),y(c[f],1,1,()=>{c[f]=null}),M(),s=c[r],s?s.p(u,p):(s=c[r]=o[r](u),s.c()),b(s,1),s.m(t,null))},i(u){a||(b(s),a=!0)},o(u){y(s),a=!1},d(u){u&&_(t),c[r].d()}}}function Ce(i,t,n){let e,l,r;U(i,H,c=>n(3,e=c)),U(i,L,c=>n(4,l=c)),U(i,_e,c=>n(2,r=c));let s,a;function o(c){try{return String.fromCharCode(Ge(c.name))}catch(d){return console.log(d),""}}return i.$$.update=()=>{i.$$.dirty&24&&e&&n(0,s=l.find(c=>c.id===e)),i.$$.dirty&1&&s&&n(1,a=o(s))},[s,a,r,e,l]}class Fe extends fe{constructor(t){super(),ce(this,t,Ce,Re,ue,{})}}function re(i,t,n){const e=i.slice();return e[9]=t[n],e[10]=t,e[11]=n,e}function se(i,t,n){const e=i.slice();return e[9]=t[n],e}function Le(i){let t;return{c(){t=V("+ Aggiungi glifo")},l(n){t=A(n,"+ Aggiungi glifo")},m(n,e){k(n,t,e)},d(n){n&&_(t)}}}function Ue(i){let t,n;return t=new Ve({props:{$$slots:{default:[Le]},$$scope:{ctx:i}}}),t.$on("click",i[2]),{c(){T(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,l){P(t,e,l),n=!0},p(e,l){const r={};l&16384&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function je(i){let t;return{c(){t=V("Lista glifi")},l(n){t=A(n,"Lista glifi")},m(n,e){k(n,t,e)},d(n){n&&_(t)}}}function Me(i){let t=i[9].name+"",n,e;return{c(){n=V(t),e=I()},l(l){n=A(l,t),e=N(l)},m(l,r){k(l,n,r),k(l,e,r)},p(l,r){r&1&&t!==(t=l[9].name+"")&&me(n,t)},d(l){l&&_(n),l&&_(e)}}}function oe(i,t){let n,e,l;return e=new De({props:{selection:H,id:t[9].id,$$slots:{default:[Me]},$$scope:{ctx:t}}}),{key:i,first:null,c(){n=R(),T(e.$$.fragment),this.h()},l(r){n=R(),B(e.$$.fragment,r),this.h()},h(){this.first=n},m(r,s){k(r,n,s),P(e,r,s),l=!0},p(r,s){t=r;const a={};s&1&&(a.id=t[9].id),s&16385&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){y(e.$$.fragment,r),l=!1},d(r){r&&_(n),q(e,r)}}}function Oe(i){let t=[],n=new Map,e,l,r=i[0];const s=a=>a[9].id;for(let a=0;a<r.length;a+=1){let o=se(i,r,a),c=s(o);n.set(c,t[a]=oe(c,o))}return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=R()},l(a){for(let o=0;o<t.length;o+=1)t[o].l(a);e=R()},m(a,o){for(let c=0;c<t.length;c+=1)t[c].m(a,o);k(a,e,o),l=!0},p(a,o){o&1&&(r=a[0],j(),t=be(t,o,s,1,a,r,n,e.parentNode,ve,oe,e,se),M())},i(a){if(!l){for(let o=0;o<r.length;o+=1)b(t[o]);l=!0}},o(a){for(let o=0;o<t.length;o+=1)y(t[o]);l=!1},d(a){for(let o=0;o<t.length;o+=1)t[o].d(a);a&&_(e)}}}function ie(i){let t,n,e,l,r,s,a,o,c,d,u,p,f,m,g,$,w,C,K,W,z;function he(h){i[5](h,i[9])}let J={};i[9].name!==void 0&&(J.value=i[9].name),s=new Ae({props:J}),ye.push(()=>ke(s,"value",he)),c=new Se({}),c.$on("delete",i[3]);function de(){i[6].call(w,i[10],i[11])}return{c(){t=E("div"),n=E("div"),e=E("p"),l=V("Nome glifo"),r=I(),T(s.$$.fragment),o=I(),T(c.$$.fragment),d=I(),u=E("hr"),p=I(),f=E("div"),m=E("p"),g=V("Struttura glifo"),$=I(),w=E("textarea"),C=I(),this.h()},l(h){t=x(h,"DIV",{class:!0});var D=S(t);n=x(D,"DIV",{});var F=S(n);e=x(F,"P",{class:!0});var Y=S(e);l=A(Y,"Nome glifo"),Y.forEach(_),r=N(F),B(s.$$.fragment,F),F.forEach(_),o=N(D),B(c.$$.fragment,D),D.forEach(_),d=N(h),u=x(h,"HR",{}),p=N(h),f=x(h,"DIV",{class:!0});var O=S(f);m=x(O,"P",{class:!0});var Z=S(m);g=A(Z,"Struttura glifo"),Z.forEach(_),$=N(O),w=x(O,"TEXTAREA",{class:!0}),S(w).forEach(_),C=N(O),O.forEach(_),this.h()},h(){G(e,"class","text-small font-mono text-slate-900 mb-2 text-sm"),G(t,"class","shrink-0 flex justify-between items-end"),G(m,"class","text-small font-mono text-slate-900 mb-2 text-sm"),G(w,"class","h-0 grow p-2 bg-slate-200 tracking-[0.75em] hover:bg-slate-300 font-mono focus:ring-4"),G(f,"class","grow flex flex-col items-stretch")},m(h,D){k(h,t,D),v(t,n),v(n,e),v(e,l),v(n,r),P(s,n,null),v(t,o),P(c,t,null),k(h,d,D),k(h,u,D),k(h,p,D),k(h,f,D),v(f,m),v(m,g),v(f,$),v(f,w),ee(w,i[9].structure),v(f,C),K=!0,W||(z=ge(w,"input",de),W=!0)},p(h,D){i=h;const F={};!a&&D&1&&(a=!0,F.value=i[9].name,$e(()=>a=!1)),s.$set(F),D&1&&ee(w,i[9].structure)},i(h){K||(b(s.$$.fragment,h),b(c.$$.fragment,h),K=!0)},o(h){y(s.$$.fragment,h),y(c.$$.fragment,h),K=!1},d(h){h&&_(t),q(s),q(c),h&&_(d),h&&_(u),h&&_(p),h&&_(f),W=!1,z()}}}function ae(i){let t,n,e=i[9].id==i[1]&&ie(i);return{c(){e&&e.c(),t=R()},l(l){e&&e.l(l),t=R()},m(l,r){e&&e.m(l,r),k(l,t,r),n=!0},p(l,r){l[9].id==l[1]?e?(e.p(l,r),r&3&&b(e,1)):(e=ie(l),e.c(),b(e,1),e.m(t.parentNode,t)):e&&(j(),y(e,1,1,()=>{e=null}),M())},i(l){n||(b(e),n=!0)},o(l){y(e),n=!1},d(l){e&&e.d(l),l&&_(t)}}}function He(i){let t,n,e,l,r,s,a,o,c;e=new Ee({props:{$$slots:{items:[Oe],listTitle:[je],topArea:[Ue]},$$scope:{ctx:i}}});let d=i[0],u=[];for(let f=0;f<d.length;f+=1)u[f]=ae(re(i,d,f));const p=f=>y(u[f],1,1,()=>{u[f]=null});return o=new Fe({}),{c(){t=E("div"),n=E("div"),T(e.$$.fragment),l=I(),r=E("div");for(let f=0;f<u.length;f+=1)u[f].c();s=I(),a=E("div"),T(o.$$.fragment),this.h()},l(f){t=x(f,"DIV",{class:!0});var m=S(t);n=x(m,"DIV",{class:!0});var g=S(n);B(e.$$.fragment,g),g.forEach(_),l=N(m),r=x(m,"DIV",{class:!0});var $=S(r);for(let C=0;C<u.length;C+=1)u[C].l($);$.forEach(_),s=N(m),a=x(m,"DIV",{class:!0});var w=S(a);B(o.$$.fragment,w),w.forEach(_),m.forEach(_),this.h()},h(){G(n,"class","shrink-0 flex items-stretch"),G(r,"class","p-8 space-y-8 grow flex flex-col items-stretch"),G(a,"class","p-8 border border-l-gray-300 overflow-y-scroll"),G(t,"class","flex flex-row flex-nowrap items-stretch overflow-hidden grow")},m(f,m){k(f,t,m),v(t,n),P(e,n,null),v(t,l),v(t,r);for(let g=0;g<u.length;g+=1)u[g].m(r,null);v(t,s),v(t,a),P(o,a,null),c=!0},p(f,[m]){const g={};if(m&16385&&(g.$$scope={dirty:m,ctx:f}),e.$set(g),m&11){d=f[0];let $;for($=0;$<d.length;$+=1){const w=re(f,d,$);u[$]?(u[$].p(w,m),b(u[$],1)):(u[$]=ae(w),u[$].c(),b(u[$],1),u[$].m(r,null))}for(j(),$=d.length;$<u.length;$+=1)p($);M()}},i(f){if(!c){b(e.$$.fragment,f);for(let m=0;m<d.length;m+=1)b(u[m]);b(o.$$.fragment,f),c=!0}},o(f){y(e.$$.fragment,f),u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)y(u[m]);y(o.$$.fragment,f),c=!1},d(f){f&&_(t),q(e),pe(u,f),q(o)}}}function Ke(i,t){for(let n of i.rules)if(n.symbol==t)return n;throw new Error("missingSymbol")}function Qe(i,t,n){let e,l,r;U(i,L,p=>n(0,e=p)),U(i,H,p=>n(1,l=p)),U(i,_e,p=>n(4,r=p)),e.length||s();function s(){const p={id:we(5),name:"[aggiungi nome]",structure:""};Q(L,e=[...e,p],e),Q(H,l=p.id,l)}function a(p){const f=[];for(const m of p){const g=m.structure.replace(/(\r\n|\n|\r)/gm,"");g&&f.push(...g.split(""))}return xe.uniq(f)}function o(p,f){const m=p.rules.map(g=>g.symbol);for(let g of f)m.includes(g)||p.rules.push(Te(g));for(let g of m)if(!a(e).includes(g)){const $=Ke(p,g),w=p.rules.indexOf($);p.rules.splice(w,1)}}function c(){Q(L,e=e.filter(p=>p.id!=l),e),Q(H,l=e[0].id,l)}function d(p,f){i.$$.not_equal(f.name,p)&&(f.name=p,L.set(e))}function u(p,f){p[f].structure=this.value,L.set(e)}return i.$$.update=()=>{if(i.$$.dirty&17){const p=a(e);for(let f of r)o(f,p)}},[e,l,s,c,r,d,u]}class et extends fe{constructor(t){super(),ce(this,t,Qe,He,ue,{})}}export{et as default};
