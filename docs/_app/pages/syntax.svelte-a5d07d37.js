import{S as te,i as ne,s as le,e as B,t as U,c as P,a as Q,h as j,d as b,g as q,F as I,j as ie,b as K,_ as ze,$ as he,M as se,P as _e,V as Be,E as ve,Z as Qe,a0 as Fe,a1 as Ke,T as A,U as L,w as V,x as D,y as O,O as M,q as E,o as N,B as R,k as T,m as z,n as H,p as Z,l as ee,a2 as We,L as ae,K as Ae,Q as $e,R as Le}from"../chunks/index-4836a415.js";import{V as ue,P as fe,S as J,v as Me,r as Ce,f as Ue,q as je,_ as Je,h as He,i as Ze}from"../chunks/lodash-03e4d38b.js";import{s as re,g as Ge}from"../chunks/index-3ea4535f.js";import{n as Pe}from"../chunks/index.browser-85ea5a5b.js";import{I as pe}from"../chunks/inputNumber-5bd3a4ed.js";import{I as Te}from"../chunks/inputText-47b36108.js";import{L as G}from"../chunks/label-05302541.js";import"../chunks/index-29b3c992.js";function be(l,e,t){const n=l.slice();return n[5]=e[t],n}function ke(l,e){let t,n=e[5].label+"",s,o;return{key:l,first:null,c(){t=B("option"),s=U(n),this.h()},l(a){t=P(a,"OPTION",{});var i=Q(t);s=j(i,n),i.forEach(b),this.h()},h(){t.__value=o=e[5].value,t.value=t.__value,this.first=t},m(a,i){q(a,t,i),I(t,s)},p(a,i){e=a,i&2&&n!==(n=e[5].label+"")&&ie(s,n),i&2&&o!==(o=e[5].value)&&(t.__value=o,t.value=t.__value)},d(a){a&&b(t)}}}function Xe(l){let e,t=[],n=new Map,s,o,a=l[1];const i=r=>r[5].label;for(let r=0;r<a.length;r+=1){let u=be(l,a,r),f=i(u);n.set(f,t[r]=ke(f,u))}return{c(){e=B("select");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=P(r,"SELECT",{class:!0,name:!0,id:!0});var u=Q(e);for(let f=0;f<t.length;f+=1)t[f].l(u);u.forEach(b),this.h()},h(){K(e,"class","p-2 bg-slate-200 font-mono"),K(e,"name",l[2]),K(e,"id",l[2]),l[0]===void 0&&ze(()=>l[4].call(e))},m(r,u){q(r,e,u);for(let f=0;f<t.length;f+=1)t[f].m(e,null);he(e,l[0]),s||(o=[se(e,"change",l[4]),se(e,"change",l[3])],s=!0)},p(r,[u]){u&2&&(a=r[1],t=_e(t,u,i,1,r,a,n,e,Be,ke,null,be)),u&4&&K(e,"name",r[2]),u&4&&K(e,"id",r[2]),u&3&&he(e,r[0])},i:ve,o:ve,d(r){r&&b(e);for(let u=0;u<t.length;u+=1)t[u].d();s=!1,Qe(o)}}}function Ye(l,e,t){let{options:n}=e,{value:s}=e,{name:o=Pe(5)}=e;function a(r){Fe.call(this,l,r)}function i(){s=Ke(this),t(0,s),t(1,n)}return l.$$set=r=>{"options"in r&&t(1,n=r.options),"value"in r&&t(0,s=r.value),"name"in r&&t(2,o=r.name)},[s,n,o,a,i]}class oe extends te{constructor(e){super(),ne(this,e,Ye,Xe,le,{options:1,value:0,name:2})}}function xe(l){let e,t,n;function s(a){l[5](a)}let o={};return l[0]!==void 0&&(o.value=l[0]),e=new Te({props:o}),A.push(()=>L(e,"value",s)),{c(){V(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,i){O(e,a,i),n=!0},p(a,[i]){const r={};!t&&i&1&&(t=!0,r.value=a[0],M(()=>t=!1)),e.$set(r)},i(a){n||(E(e.$$.fragment,a),n=!0)},o(a){N(e.$$.fragment,a),n=!1},d(a){R(e,a)}}}function et(l,e,t){let{value:n=[]}=e,{parseNumbers:s=!1}=e,{parseBooleans:o=!1}=e,{separator:a=";"}=e,i="";u();function r(){const g=i.split(a).map(d=>d.trim()).filter(d=>d);!s&&!o?t(1,n=[...g]):s?t(1,n=[...g.map(d=>parseFloat(d)).filter(d=>!isNaN(d))]):o&&t(1,n=[...g.map(d=>d=="true"?!0:d=="false"?!1:null).filter(d=>d!==null)])}function u(){n.length&&t(0,i=n.join(`${a} `))}function f(g){i=g,t(0,i)}return l.$$set=g=>{"value"in g&&t(1,n=g.value),"parseNumbers"in g&&t(2,s=g.parseNumbers),"parseBooleans"in g&&t(3,o=g.parseBooleans),"separator"in g&&t(4,a=g.separator)},l.$$.update=()=>{l.$$.dirty&1&&r()},[i,n,s,o,a,f]}class tt extends te{constructor(e){super(),ne(this,e,et,xe,le,{value:1,parseNumbers:2,parseBooleans:3,separator:4})}}function ye(l){let e,t,n,s,o,a,i,r;function u(p){l[7](p)}let f={options:l[3]};l[1]!==void 0&&(f.value=l[1]),t=new oe({props:f}),A.push(()=>L(t,"value",u)),t.$on("change",l[2]);const g=[at,lt,nt],d=[];function h(p,w){return p[0].value.kind=="fixed"?0:p[0].value.kind=="range"?1:p[0].value.kind=="choice"?2:-1}return~(a=h(l))&&(i=d[a]=g[a](l)),{c(){e=B("div"),V(t.$$.fragment),s=T(),o=B("div"),i&&i.c(),this.h()},l(p){e=P(p,"DIV",{class:!0});var w=Q(e);D(t.$$.fragment,w),s=z(w),o=P(w,"DIV",{class:!0});var k=Q(o);i&&i.l(k),k.forEach(b),w.forEach(b),this.h()},h(){K(o,"class","flex flex-row gap-2"),K(e,"class","flex flex-row gap-2")},m(p,w){q(p,e,w),O(t,e,null),I(e,s),I(e,o),~a&&d[a].m(o,null),r=!0},p(p,w){const k={};!n&&w&2&&(n=!0,k.value=p[1],M(()=>n=!1)),t.$set(k);let c=a;a=h(p),a===c?~a&&d[a].p(p,w):(i&&(H(),N(d[c],1,1,()=>{d[c]=null}),Z()),~a?(i=d[a],i?i.p(p,w):(i=d[a]=g[a](p),i.c()),E(i,1),i.m(o,null)):i=null)},i(p){r||(E(t.$$.fragment,p),E(i),r=!0)},o(p){N(t.$$.fragment,p),N(i),r=!1},d(p){p&&b(e),R(t),~a&&d[a].d()}}}function nt(l){let e,t,n;function s(a){l[13](a)}let o={parseBooleans:l[0].kind=="boolean",parseNumbers:l[0].kind=="number"};return l[0].value.data.options!==void 0&&(o.value=l[0].value.data.options),e=new tt({props:o}),A.push(()=>L(e,"value",s)),{c(){V(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,i){O(e,a,i),n=!0},p(a,i){const r={};i&1&&(r.parseBooleans=a[0].kind=="boolean"),i&1&&(r.parseNumbers=a[0].kind=="number"),!t&&i&1&&(t=!0,r.value=a[0].value.data.options,M(()=>t=!1)),e.$set(r)},i(a){n||(E(e.$$.fragment,a),n=!0)},o(a){N(e.$$.fragment,a),n=!1},d(a){R(e,a)}}}function lt(l){let e,t,n,s,o,a;function i(g){l[11](g)}let r={};l[0].value.data.min!==void 0&&(r.value=l[0].value.data.min),e=new pe({props:r}),A.push(()=>L(e,"value",i));function u(g){l[12](g)}let f={};return l[0].value.data.max!==void 0&&(f.value=l[0].value.data.max),s=new pe({props:f}),A.push(()=>L(s,"value",u)),{c(){V(e.$$.fragment),n=T(),V(s.$$.fragment)},l(g){D(e.$$.fragment,g),n=z(g),D(s.$$.fragment,g)},m(g,d){O(e,g,d),q(g,n,d),O(s,g,d),a=!0},p(g,d){const h={};!t&&d&1&&(t=!0,h.value=g[0].value.data.min,M(()=>t=!1)),e.$set(h);const p={};!o&&d&1&&(o=!0,p.value=g[0].value.data.max,M(()=>o=!1)),s.$set(p)},i(g){a||(E(e.$$.fragment,g),E(s.$$.fragment,g),a=!0)},o(g){N(e.$$.fragment,g),N(s.$$.fragment,g),a=!1},d(g){R(e,g),g&&b(n),R(s,g)}}}function at(l){let e,t,n,s;const o=[it,st,rt],a=[];function i(r,u){return r[0].kind=="number"?0:r[0].kind=="orientation"?1:r[0].kind=="boolean"?2:-1}return~(e=i(l))&&(t=a[e]=o[e](l)),{c(){t&&t.c(),n=ee()},l(r){t&&t.l(r),n=ee()},m(r,u){~e&&a[e].m(r,u),q(r,n,u),s=!0},p(r,u){let f=e;e=i(r),e===f?~e&&a[e].p(r,u):(t&&(H(),N(a[f],1,1,()=>{a[f]=null}),Z()),~e?(t=a[e],t?t.p(r,u):(t=a[e]=o[e](r),t.c()),E(t,1),t.m(n.parentNode,n)):t=null)},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){~e&&a[e].d(r),r&&b(n)}}}function rt(l){let e,t,n;function s(a){l[10](a)}let o={options:l[5]};return l[0].value.data!==void 0&&(o.value=l[0].value.data),e=new oe({props:o}),A.push(()=>L(e,"value",s)),{c(){V(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,i){O(e,a,i),n=!0},p(a,i){const r={};!t&&i&1&&(t=!0,r.value=a[0].value.data,M(()=>t=!1)),e.$set(r)},i(a){n||(E(e.$$.fragment,a),n=!0)},o(a){N(e.$$.fragment,a),n=!1},d(a){R(e,a)}}}function st(l){let e,t,n;function s(a){l[9](a)}let o={options:l[4]};return l[0].value.data!==void 0&&(o.value=l[0].value.data),e=new oe({props:o}),A.push(()=>L(e,"value",s)),{c(){V(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,i){O(e,a,i),n=!0},p(a,i){const r={};!t&&i&1&&(t=!0,r.value=a[0].value.data,M(()=>t=!1)),e.$set(r)},i(a){n||(E(e.$$.fragment,a),n=!0)},o(a){N(e.$$.fragment,a),n=!1},d(a){R(e,a)}}}function it(l){let e,t,n;function s(a){l[8](a)}let o={};return l[0].value.data!==void 0&&(o.value=l[0].value.data),e=new pe({props:o}),A.push(()=>L(e,"value",s)),{c(){V(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,i){O(e,a,i),n=!0},p(a,i){const r={};!t&&i&1&&(t=!0,r.value=a[0].value.data,M(()=>t=!1)),e.$set(r)},i(a){n||(E(e.$$.fragment,a),n=!0)},o(a){N(e.$$.fragment,a),n=!1},d(a){R(e,a)}}}function ot(l){let e,t,n=l[0]&&ye(l);return{c(){n&&n.c(),e=ee()},l(s){n&&n.l(s),e=ee()},m(s,o){n&&n.m(s,o),q(s,e,o),t=!0},p(s,[o]){s[0]?n?(n.p(s,o),o&1&&E(n,1)):(n=ye(s),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(H(),N(n,1,1,()=>{n=null}),Z())},i(s){t||(E(n),t=!0)},o(s){N(n),t=!1},d(s){n&&n.d(s),s&&b(e)}}}function ut(l,e,t){let{prop:n}=e,{numberDefaults:s={fixed:1,choice:{options:[1,2]},range:{min:1,max:2}}}=e,o=n.value.kind;function a(){if(n){if(n.kind==fe.Number){const c=s;t(0,n.value.data=c[o],n)}else if(n.kind==fe.Orientation){const c={fixed:"NE",choice:{options:["NE","NW"]}};t(0,n.value.data=c[o],n)}else if(n.kind==fe.Boolean){const c={fixed:!1,choice:{options:[!0,!1]}};t(0,n.value.data=c[o],n)}t(0,n.value.kind=o,n)}}const i=[{label:"fixed",value:ue.Fixed},{label:"choice",value:ue.Choice},{label:"range",value:ue.Range}],r=[{label:"NW",value:"NW"},{label:"NE",value:"NE"},{label:"SW",value:"SW"},{label:"SE",value:"SE"}],u=[{label:"true",value:!0},{label:"false",value:!1}];function f(c){o=c,t(1,o)}function g(c){l.$$.not_equal(n.value.data,c)&&(n.value.data=c,t(0,n))}function d(c){l.$$.not_equal(n.value.data,c)&&(n.value.data=c,t(0,n))}function h(c){l.$$.not_equal(n.value.data,c)&&(n.value.data=c,t(0,n))}function p(c){l.$$.not_equal(n.value.data.min,c)&&(n.value.data.min=c,t(0,n))}function w(c){l.$$.not_equal(n.value.data.max,c)&&(n.value.data.max=c,t(0,n))}function k(c){l.$$.not_equal(n.value.data.options,c)&&(n.value.data.options=c,t(0,n))}return l.$$set=c=>{"prop"in c&&t(0,n=c.prop),"numberDefaults"in c&&t(6,s=c.numberDefaults)},[n,o,a,i,r,u,s,f,g,d,h,p,w,k]}class x extends te{constructor(e){super(),ne(this,e,ut,ot,le,{prop:0,numberDefaults:6})}}function ft(l){let e;return{c(){e=U("Forma")},l(t){e=j(t,"Forma")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function we(l){let e,t,n,s,o,a,i,r,u,f,g,d,h,p,w,k,c,_;t=new G({props:{target:"scale_x",$$slots:{default:[pt]},$$scope:{ctx:l}}});function $(y){l[5](y)}let v={};l[0].shape.props.scale_x!==void 0&&(v.prop=l[0].shape.props.scale_x),s=new x({props:v}),A.push(()=>L(s,"prop",$)),r=new G({props:{target:"scale_y",$$slots:{default:[_t]},$$scope:{ctx:l}}});function m(y){l[6](y)}let S={};l[0].shape.props.scale_y!==void 0&&(S.prop=l[0].shape.props.scale_y),f=new x({props:S}),A.push(()=>L(f,"prop",m)),p=new G({props:{target:"rotation",$$slots:{default:[ct]},$$scope:{ctx:l}}});function F(y){l[7](y)}let C={numberDefaults:{fixed:0,choice:{options:[0,45]},range:{min:0,max:90}}};return l[0].shape.props.rotation!==void 0&&(C.prop=l[0].shape.props.rotation),k=new x({props:C}),A.push(()=>L(k,"prop",F)),{c(){e=B("div"),V(t.$$.fragment),n=T(),V(s.$$.fragment),a=T(),i=B("div"),V(r.$$.fragment),u=T(),V(f.$$.fragment),d=T(),h=B("div"),V(p.$$.fragment),w=T(),V(k.$$.fragment)},l(y){e=P(y,"DIV",{});var W=Q(e);D(t.$$.fragment,W),n=z(W),D(s.$$.fragment,W),W.forEach(b),a=z(y),i=P(y,"DIV",{});var X=Q(i);D(r.$$.fragment,X),u=z(X),D(f.$$.fragment,X),X.forEach(b),d=z(y),h=P(y,"DIV",{});var Y=Q(h);D(p.$$.fragment,Y),w=z(Y),D(k.$$.fragment,Y),Y.forEach(b)},m(y,W){q(y,e,W),O(t,e,null),I(e,n),O(s,e,null),q(y,a,W),q(y,i,W),O(r,i,null),I(i,u),O(f,i,null),q(y,d,W),q(y,h,W),O(p,h,null),I(h,w),O(k,h,null),_=!0},p(y,W){const X={};W&2048&&(X.$$scope={dirty:W,ctx:y}),t.$set(X);const Y={};!o&&W&1&&(o=!0,Y.prop=y[0].shape.props.scale_x,M(()=>o=!1)),s.$set(Y);const ce={};W&2048&&(ce.$$scope={dirty:W,ctx:y}),r.$set(ce);const me={};!g&&W&1&&(g=!0,me.prop=y[0].shape.props.scale_y,M(()=>g=!1)),f.$set(me);const ge={};W&2048&&(ge.$$scope={dirty:W,ctx:y}),p.$set(ge);const de={};!c&&W&1&&(c=!0,de.prop=y[0].shape.props.rotation,M(()=>c=!1)),k.$set(de)},i(y){_||(E(t.$$.fragment,y),E(s.$$.fragment,y),E(r.$$.fragment,y),E(f.$$.fragment,y),E(p.$$.fragment,y),E(k.$$.fragment,y),_=!0)},o(y){N(t.$$.fragment,y),N(s.$$.fragment,y),N(r.$$.fragment,y),N(f.$$.fragment,y),N(p.$$.fragment,y),N(k.$$.fragment,y),_=!1},d(y){y&&b(e),R(t),R(s),y&&b(a),y&&b(i),R(r),R(f),y&&b(d),y&&b(h),R(p),R(k)}}}function pt(l){let e;return{c(){e=U("Scala orizzontale")},l(t){e=j(t,"Scala orizzontale")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function _t(l){let e;return{c(){e=U("Scala verticale")},l(t){e=j(t,"Scala verticale")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function ct(l){let e;return{c(){e=U("Rotazione")},l(t){e=j(t,"Rotazione")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function Ee(l){let e,t,n,s,o,a,i,r,u,f,g,d;t=new G({props:{target:"squaring",$$slots:{default:[mt]},$$scope:{ctx:l}}});function h(c){l[8](c)}let p={numberDefaults:{fixed:.56,choice:{options:[0,.56,1]},range:{min:0,max:1}}};l[0].shape.props.squaring!==void 0&&(p.prop=l[0].shape.props.squaring),s=new x({props:p}),A.push(()=>L(s,"prop",h)),r=new G({props:{target:"negative",$$slots:{default:[gt]},$$scope:{ctx:l}}});function w(c){l[9](c)}let k={};return l[0].shape.props.negative!==void 0&&(k.prop=l[0].shape.props.negative),f=new x({props:k}),A.push(()=>L(f,"prop",w)),{c(){e=B("div"),V(t.$$.fragment),n=T(),V(s.$$.fragment),a=T(),i=B("div"),V(r.$$.fragment),u=T(),V(f.$$.fragment)},l(c){e=P(c,"DIV",{});var _=Q(e);D(t.$$.fragment,_),n=z(_),D(s.$$.fragment,_),_.forEach(b),a=z(c),i=P(c,"DIV",{});var $=Q(i);D(r.$$.fragment,$),u=z($),D(f.$$.fragment,$),$.forEach(b)},m(c,_){q(c,e,_),O(t,e,null),I(e,n),O(s,e,null),q(c,a,_),q(c,i,_),O(r,i,null),I(i,u),O(f,i,null),d=!0},p(c,_){const $={};_&2048&&($.$$scope={dirty:_,ctx:c}),t.$set($);const v={};!o&&_&1&&(o=!0,v.prop=c[0].shape.props.squaring,M(()=>o=!1)),s.$set(v);const m={};_&2048&&(m.$$scope={dirty:_,ctx:c}),r.$set(m);const S={};!g&&_&1&&(g=!0,S.prop=c[0].shape.props.negative,M(()=>g=!1)),f.$set(S)},i(c){d||(E(t.$$.fragment,c),E(s.$$.fragment,c),E(r.$$.fragment,c),E(f.$$.fragment,c),d=!0)},o(c){N(t.$$.fragment,c),N(s.$$.fragment,c),N(r.$$.fragment,c),N(f.$$.fragment,c),d=!1},d(c){c&&b(e),R(t),R(s),c&&b(a),c&&b(i),R(r),R(f)}}}function mt(l){let e;return{c(){e=U("Squadratura")},l(t){e=j(t,"Squadratura")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function gt(l){let e;return{c(){e=U("Negativo")},l(t){e=j(t,"Negativo")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function Se(l){let e,t,n,s,o,a;t=new G({props:{target:"orientamento",$$slots:{default:[dt]},$$scope:{ctx:l}}});function i(u){l[10](u)}let r={};return l[0].shape.props.orientation!==void 0&&(r.prop=l[0].shape.props.orientation),s=new x({props:r}),A.push(()=>L(s,"prop",i)),{c(){e=B("div"),V(t.$$.fragment),n=T(),V(s.$$.fragment)},l(u){e=P(u,"DIV",{});var f=Q(e);D(t.$$.fragment,f),n=z(f),D(s.$$.fragment,f),f.forEach(b)},m(u,f){q(u,e,f),O(t,e,null),I(e,n),O(s,e,null),a=!0},p(u,f){const g={};f&2048&&(g.$$scope={dirty:f,ctx:u}),t.$set(g);const d={};!o&&f&1&&(o=!0,d.prop=u[0].shape.props.orientation,M(()=>o=!1)),s.$set(d)},i(u){a||(E(t.$$.fragment,u),E(s.$$.fragment,u),a=!0)},o(u){N(t.$$.fragment,u),N(s.$$.fragment,u),a=!1},d(u){u&&b(e),R(t),R(s)}}}function dt(l){let e;return{c(){e=U("Orientamento")},l(t){e=j(t,"Orientamento")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function ht(l){let e,t,n=l[0].symbol+"",s,o,a,i,r,u,f,g,d,h,p,w;i=new G({props:{target:"shape",$$slots:{default:[ft]},$$scope:{ctx:l}}});function k(m){l[4](m)}let c={options:l[3]};l[1]!==void 0&&(c.value=l[1]),u=new oe({props:c}),A.push(()=>L(u,"value",k)),u.$on("change",l[2]);let _=l[0].shape.kind!=J.Void&&we(l),$=(l[0].shape.kind==J.Quarter||l[0].shape.kind==J.Ellipse)&&Ee(l),v=l[0].shape.kind==J.Quarter&&Se(l);return{c(){e=B("div"),t=B("div"),s=U(n),o=T(),a=B("div"),V(i.$$.fragment),r=T(),V(u.$$.fragment),g=T(),d=B("div"),_&&_.c(),h=T(),$&&$.c(),p=T(),v&&v.c(),this.h()},l(m){e=P(m,"DIV",{class:!0});var S=Q(e);t=P(S,"DIV",{class:!0});var F=Q(t);s=j(F,n),F.forEach(b),o=z(S),a=P(S,"DIV",{class:!0});var C=Q(a);D(i.$$.fragment,C),r=z(C),D(u.$$.fragment,C),C.forEach(b),g=z(S),d=P(S,"DIV",{class:!0});var y=Q(d);_&&_.l(y),h=z(y),$&&$.l(y),p=z(y),v&&v.l(y),y.forEach(b),S.forEach(b),this.h()},h(){K(t,"class","text-xl p-4 bg-slate-400 font-mono"),K(a,"class","flex flex-col"),K(d,"class","flex flex-col flex-nowrap gap-4"),K(e,"class","flex flex-row flex-nowrap gap-4")},m(m,S){q(m,e,S),I(e,t),I(t,s),I(e,o),I(e,a),O(i,a,null),I(a,r),O(u,a,null),I(e,g),I(e,d),_&&_.m(d,null),I(d,h),$&&$.m(d,null),I(d,p),v&&v.m(d,null),w=!0},p(m,[S]){(!w||S&1)&&n!==(n=m[0].symbol+"")&&ie(s,n);const F={};S&2048&&(F.$$scope={dirty:S,ctx:m}),i.$set(F);const C={};!f&&S&2&&(f=!0,C.value=m[1],M(()=>f=!1)),u.$set(C),m[0].shape.kind!=J.Void?_?(_.p(m,S),S&1&&E(_,1)):(_=we(m),_.c(),E(_,1),_.m(d,h)):_&&(H(),N(_,1,1,()=>{_=null}),Z()),m[0].shape.kind==J.Quarter||m[0].shape.kind==J.Ellipse?$?($.p(m,S),S&1&&E($,1)):($=Ee(m),$.c(),E($,1),$.m(d,p)):$&&(H(),N($,1,1,()=>{$=null}),Z()),m[0].shape.kind==J.Quarter?v?(v.p(m,S),S&1&&E(v,1)):(v=Se(m),v.c(),E(v,1),v.m(d,null)):v&&(H(),N(v,1,1,()=>{v=null}),Z())},i(m){w||(E(i.$$.fragment,m),E(u.$$.fragment,m),E(_),E($),E(v),w=!0)},o(m){N(i.$$.fragment,m),N(u.$$.fragment,m),N(_),N($),N(v),w=!1},d(m){m&&b(e),R(i),R(u),_&&_.d(),$&&$.d(),v&&v.d()}}}function vt(l,e,t){let{rule:n}=e,s=n.shape.kind;o();function o(){const p={void:Me,rectangle:Ce,ellipse:Ue,quarter:je};t(0,n.shape.props=p[s],n),t(0,n.shape.kind=s,n)}const a=[{label:"rectangle",value:J.Rectangle},{label:"ellipse",value:J.Ellipse},{label:"quarter",value:J.Quarter},{label:"void",value:J.Void}];function i(p){s=p,t(1,s)}function r(p){l.$$.not_equal(n.shape.props.scale_x,p)&&(n.shape.props.scale_x=p,t(0,n))}function u(p){l.$$.not_equal(n.shape.props.scale_y,p)&&(n.shape.props.scale_y=p,t(0,n))}function f(p){l.$$.not_equal(n.shape.props.rotation,p)&&(n.shape.props.rotation=p,t(0,n))}function g(p){l.$$.not_equal(n.shape.props.squaring,p)&&(n.shape.props.squaring=p,t(0,n))}function d(p){l.$$.not_equal(n.shape.props.negative,p)&&(n.shape.props.negative=p,t(0,n))}function h(p){l.$$.not_equal(n.shape.props.orientation,p)&&(n.shape.props.orientation=p,t(0,n))}return l.$$set=p=>{"rule"in p&&t(0,n=p.rule)},[n,s,o,a,i,r,u,f,g,d,h]}class $t extends te{constructor(e){super(),ne(this,e,vt,ht,le,{rule:0})}}function Ne(l,e,t){const n=l.slice();return n[2]=e[t],n[3]=e,n[4]=t,n}function qe(l,e){let t,n,s,o,a;function i(u){e[1](u,e[2],e[3],e[4])}let r={};return e[2]!==void 0&&(r.rule=e[2]),n=new $t({props:r}),A.push(()=>L(n,"rule",i)),{key:l,first:null,c(){t=B("div"),V(n.$$.fragment),o=T(),this.h()},l(u){t=P(u,"DIV",{class:!0});var f=Q(t);D(n.$$.fragment,f),o=z(f),f.forEach(b),this.h()},h(){K(t,"class","flex flex-row flex-nowrap gap-4"),this.first=t},m(u,f){q(u,t,f),O(n,t,null),I(t,o),a=!0},p(u,f){e=u;const g={};!s&&f&1&&(s=!0,g.rule=e[2],M(()=>s=!1)),n.$set(g)},i(u){a||(E(n.$$.fragment,u),a=!0)},o(u){N(n.$$.fragment,u),a=!1},d(u){u&&b(t),R(n)}}}function bt(l){let e,t=[],n=new Map,s,o=l[0].rules;const a=i=>i[2].symbol;for(let i=0;i<o.length;i+=1){let r=Ne(l,o,i),u=a(r);n.set(u,t[i]=qe(u,r))}return{c(){e=B("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=P(i,"DIV",{class:!0});var r=Q(e);for(let u=0;u<t.length;u+=1)t[u].l(r);r.forEach(b),this.h()},h(){K(e,"class","flex flex-col flex-nowrap gap-4")},m(i,r){q(i,e,r);for(let u=0;u<t.length;u+=1)t[u].m(e,null);s=!0},p(i,[r]){r&1&&(o=i[0].rules,H(),t=_e(t,r,a,1,i,o,n,e,We,qe,null,Ne),Z())},i(i){if(!s){for(let r=0;r<o.length;r+=1)E(t[r]);s=!0}},o(i){for(let r=0;r<t.length;r+=1)N(t[r]);s=!1},d(i){i&&b(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function kt(l,e,t){let{syntax:n}=e;function s(o,a,i,r){i[r]=o,t(0,n)}return l.$$set=o=>{"syntax"in o&&t(0,n=o.syntax)},[n,s]}class yt extends te{constructor(e){super(),ne(this,e,kt,bt,le,{syntax:0})}}function Ie(l,e,t){const n=l.slice();return n[10]=e[t],n[11]=e,n[12]=t,n}function Ve(l,e,t){const n=l.slice();return n[10]=e[t],n[12]=t,n}function De(l,e){let t,n=e[10].name+"",s,o,a,i;function r(){return e[5](e[10])}return{key:l,first:null,c(){t=B("div"),s=U(n),o=T(),this.h()},l(u){t=P(u,"DIV",{class:!0});var f=Q(t);s=j(f,n),o=z(f),f.forEach(b),this.h()},h(){K(t,"class","px-3 py-1"),ae(t,"bg-slate-300",e[12]!=e[0]),ae(t,"bg-slate-400",e[12]==e[0]),this.first=t},m(u,f){q(u,t,f),I(t,s),I(t,o),a||(i=se(t,"click",r),a=!0)},p(u,f){e=u,f&2&&n!==(n=e[10].name+"")&&ie(s,n),f&3&&ae(t,"bg-slate-300",e[12]!=e[0]),f&3&&ae(t,"bg-slate-400",e[12]==e[0])},d(u){u&&b(t),a=!1,i()}}}function Oe(l){let e,t,n,s,o,a,i,r,u,f,g,d,h,p=JSON.stringify(l[10],null,2)+"",w,k;n=new G({props:{target:"SyntaxName",$$slots:{default:[wt]},$$scope:{ctx:l}}});function c(m){l[6](m,l[10])}let _={name:"SyntaxName"};l[10].name!==void 0&&(_.value=l[10].name),o=new Te({props:_}),A.push(()=>L(o,"value",c));function $(m){l[7](m,l[10],l[11],l[12])}let v={};return l[10]!==void 0&&(v.syntax=l[10]),f=new yt({props:v}),A.push(()=>L(f,"syntax",$)),{c(){e=B("div"),t=B("div"),V(n.$$.fragment),s=T(),V(o.$$.fragment),i=T(),r=B("hr"),u=T(),V(f.$$.fragment),d=T(),h=B("pre"),w=U(p),this.h()},l(m){e=P(m,"DIV",{class:!0});var S=Q(e);t=P(S,"DIV",{class:!0});var F=Q(t);D(n.$$.fragment,F),F.forEach(b),s=z(S),D(o.$$.fragment,S),S.forEach(b),i=z(m),r=P(m,"HR",{class:!0}),u=z(m),D(f.$$.fragment,m),d=z(m),h=P(m,"PRE",{});var C=Q(h);w=j(C,p),C.forEach(b),this.h()},h(){K(t,"class","mb-2"),K(e,"class","flex flex-col mb-8"),K(r,"class","mb-8")},m(m,S){q(m,e,S),I(e,t),O(n,t,null),I(e,s),O(o,e,null),q(m,i,S),q(m,r,S),q(m,u,S),O(f,m,S),q(m,d,S),q(m,h,S),I(h,w),k=!0},p(m,S){l=m;const F={};S&16384&&(F.$$scope={dirty:S,ctx:l}),n.$set(F);const C={};!a&&S&2&&(a=!0,C.value=l[10].name,M(()=>a=!1)),o.$set(C);const y={};!g&&S&2&&(g=!0,y.syntax=l[10],M(()=>g=!1)),f.$set(y),(!k||S&2)&&p!==(p=JSON.stringify(l[10],null,2)+"")&&ie(w,p)},i(m){k||(E(n.$$.fragment,m),E(o.$$.fragment,m),E(f.$$.fragment,m),k=!0)},o(m){N(n.$$.fragment,m),N(o.$$.fragment,m),N(f.$$.fragment,m),k=!1},d(m){m&&b(e),R(n),R(o),m&&b(i),m&&b(r),m&&b(u),R(f,m),m&&b(d),m&&b(h)}}}function wt(l){let e;return{c(){e=U("Nome sintassi")},l(t){e=j(t,"Nome sintassi")},m(t,n){q(t,e,n)},d(t){t&&b(e)}}}function Re(l){let e,t,n=l[12]==l[0]&&Oe(l);return{c(){n&&n.c(),e=ee()},l(s){n&&n.l(s),e=ee()},m(s,o){n&&n.m(s,o),q(s,e,o),t=!0},p(s,o){s[12]==s[0]?n?(n.p(s,o),o&1&&E(n,1)):(n=Oe(s),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(H(),N(n,1,1,()=>{n=null}),Z())},i(s){t||(E(n),t=!0)},o(s){N(n),t=!1},d(s){n&&n.d(s),s&&b(e)}}}function Et(l){let e,t,n,s,o,a=[],i=new Map,r,u,f,g,d,h=l[1];const p=_=>_[10].name;for(let _=0;_<h.length;_+=1){let $=Ve(l,h,_),v=p($);i.set(v,a[_]=De(v,$))}let w=l[1],k=[];for(let _=0;_<w.length;_+=1)k[_]=Re(Ie(l,w,_));const c=_=>N(k[_],1,1,()=>{k[_]=null});return{c(){e=B("div"),t=B("div"),n=B("button"),s=U("+ Add syntax"),o=T();for(let _=0;_<a.length;_+=1)a[_].c();r=T(),u=B("div");for(let _=0;_<k.length;_+=1)k[_].c();this.h()},l(_){e=P(_,"DIV",{class:!0});var $=Q(e);t=P($,"DIV",{class:!0});var v=Q(t);n=P(v,"BUTTON",{class:!0});var m=Q(n);s=j(m,"+ Add syntax"),m.forEach(b),o=z(v);for(let F=0;F<a.length;F+=1)a[F].l(v);v.forEach(b),r=z($),u=P($,"DIV",{class:!0});var S=Q(u);for(let F=0;F<k.length;F+=1)k[F].l(S);S.forEach(b),$.forEach(b),this.h()},h(){K(n,"class","flex bg-slate-200 mb-4 p-3 hover:bg-slate-300"),K(t,"class","flex basis-60 flex-col flex-nowrap gap-2 p-4 bg-slate-100"),K(u,"class","p-8"),K(e,"class","flex flex-row flex-nowrap")},m(_,$){q(_,e,$),I(e,t),I(t,n),I(n,s),I(t,o);for(let v=0;v<a.length;v+=1)a[v].m(t,null);I(e,r),I(e,u);for(let v=0;v<k.length;v+=1)k[v].m(u,null);f=!0,g||(d=se(n,"click",l[4]),g=!0)},p(_,[$]){if($&11&&(h=_[1],a=_e(a,$,p,1,_,h,i,t,Be,De,null,Ve)),$&3){w=_[1];let v;for(v=0;v<w.length;v+=1){const m=Ie(_,w,v);k[v]?(k[v].p(m,$),E(k[v],1)):(k[v]=Re(m),k[v].c(),E(k[v],1),k[v].m(u,null))}for(H(),v=w.length;v<k.length;v+=1)c(v);Z()}},i(_){if(!f){for(let $=0;$<w.length;$+=1)E(k[$]);f=!0}},o(_){k=k.filter(Boolean);for(let $=0;$<k.length;$+=1)N(k[$]);f=!1},d(_){_&&b(e);for(let $=0;$<a.length;$+=1)a[$].d();Ae(k,_),g=!1,d()}}}function St(l,e){for(let t of l.rules)if(t.symbol==e)return t;throw new Error("missingSymbol")}function Nt(l,e,t){let n,s;$e(l,re,h=>t(1,n=h)),$e(l,Ge,h=>t(8,s=h));let o;function a(){const h=[];for(const p of s){const w=p.structure.replace(/(\r\n|\n|\r)/gm,"");w&&h.push(...w.split(""))}return Je.uniq(h)}for(let h of n){const p=h.rules.map(w=>w.symbol);for(let w of a())p.includes(w)||h.rules.push(He(w));for(let w of p)if(!a().includes(w)){const k=St(h,w),c=h.rules.indexOf(k);h.rules.splice(c,1)}}n.length||i("Regular");function i(h=null){h||(h=Pe(5)),Le(re,n=[...n,Ze(h,a())],n),t(0,o=n.length-1)}function r(h){t(0,o=n.indexOf(h))}const u=()=>{i()},f=h=>{r(h)};function g(h,p){l.$$.not_equal(p.name,h)&&(p.name=h,re.set(n))}function d(h,p,w,k){w[k]=h,re.set(n)}return l.$$.update=()=>{l.$$.dirty&3&&!o&&n.length&&t(0,o=0)},[o,n,i,r,u,f,g,d]}class Tt extends te{constructor(e){super(),ne(this,e,Nt,Et,le,{})}}export{Tt as default};
